var er=Object.defineProperty;var tr=(h,s,a)=>s in h?er(h,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):h[s]=a;var We=(h,s,a)=>tr(h,typeof s!="symbol"?s+"":s,a);import{t as template,a as append}from"../chunks/BPyiyC_m.js";import"../chunks/B2YF9tyq.js";import{S as get_descriptor,ab as teardown,aq as push,s as sibling,m as first_child,e as child,ar as pop,r as reset,n as next,t as template_effect,q as get}from"../chunks/CpwNkmoQ.js";import{s as set_text}from"../chunks/BAHnar9m.js";import{e as each,i as index}from"../chunks/DMQQkh9r.js";import{e as event}from"../chunks/DpYJPrsp.js";import{i as init}from"../chunks/D3sFF71D.js";import{a as setup_stores,s as store_get}from"../chunks/VC3jnv3y.js";import{w as writable}from"../chunks/D7C5tOZ4.js";import{c as commonjsGlobal,a as getDefaultExportFromCjs}from"../chunks/_d1bhYXs.js";import{r as require$$0}from"../chunks/C08jCxmb.js";function bind_prop(h,s,a){var t=get_descriptor(h,s);t&&t.set&&(h[s]=a,teardown(()=>{h[s]=null}))}function preventDefault(h){return function(...s){var a=s[0];return a.preventDefault(),h==null?void 0:h.apply(this,s)}}var woqlDoc,hasRequiredWoqlDoc;function requireWoqlDoc(){if(hasRequiredWoqlDoc)return woqlDoc;hasRequiredWoqlDoc=1;function h(i){if(i==null)return null;if(typeof i=="number")return{"@type":"Value",data:{"@type":"xsd:decimal","@value":i}};if(typeof i=="boolean")return{"@type":"Value",data:{"@type":"xsd:boolean","@value":i}};if(typeof i=="string")return i.indexOf("v:")===-1?{"@type":"Value",data:{"@type":"xsd:string","@value":i}}:{"@type":"Value",variable:i.split(":")[1]};if(i instanceof s)return{"@type":"Value",variable:i.name};if(typeof i=="object"&&!Array.isArray(i)){const e=[];for(const[n,c]of Object.entries(i))e.push({"@type":"FieldValuePair",field:n,value:h(c)});return{"@type":"Value",dictionary:{"@type":"DictionaryTemplate",data:e}}}if(typeof i=="object"&&Array.isArray(i))return{"@type":"Value",list:i.map(h)}}function s(i){this.name=i,this.json=function(){return{"@type":"Value",variable:this.name}}}function a(i){return this.doc=i,this.encoded=h(i),this.encoded}function t(...i){const e={};for(let n=0,c=arguments.length;n<c;n+=1){const r=i[n];e[r]=new s(r)}return e}return woqlDoc={Vars:t,Var:s,Doc:a},woqlDoc}var browser,hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,browser=typeof self=="object"?self.FormData:window.FormData),browser}var utils,hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;/**
 * @file Terminus Client Utility Functions
 * @license Apache Version 2
 * Object for bunding up common Terminus Utility Functions
 */const h={};return h.checkValidName=function(s){return typeof s!="string"||s.trim()===""?!1:/^[a-zA-Z0-9_]*$/.test(s)},h.ACTIONS={CREATE_DATABASE:"create_database",DELETE_DATABASE:"delete_database",SCHEMA_READ_ACCESS:"schema_read_access",SCHEMA_WRITE_ACCESS:"schema_write_access",INSTANCE_READ_ACCESS:"instance_read_access",INSTANCE_WRITE_ACCESS:"instance_write_access",COMMIT_READ_ACCESS:"commit_read_access",COMMIT_WRITE_ACCESS:"commit_write_access",META_READ_ACCESS:"meta_read_access",META_WRITE_ACCESS:"meta_write_access",CLASS_FRAME:"class_frame",BRANCH:"branch",CLONE:"clone",FETCH:"fetch",PUSH:"push",REBASE:"rebase"},h.encodeURISegment=function(s){return typeof s!="string"||(s=encodeURI(s),s=s.replace(/\?/g,"%3F"),s=s.replace(/&/g,"%26"),s=s.replace(/\+/g,"%2B"),s=s.replace(/#/g,"%23")),s},h.decodeURISegment=function(s){return typeof s!="string"||(s=s.replace(/%3F/g,"?"),s=s.replace(/%2B/g,"+"),s=s.replace(/%23/g,"#"),s=decodeURI(s)),s},h.removeDocType=function(s){return typeof s=="string"&&s.lastIndexOf("/")>-1?s.substr(s.lastIndexOf("/")+1):s},h.standard_urls={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",xsd:"http://www.w3.org/2001/XMLSchema#",xdd:"http://terminusdb.com/schema/xdd#",owl:"http://www.w3.org/2002/07/owl#",system:"http://terminusdb.com/schema/system#",vio:"http://terminusdb.com/schema/vio#",repo:"http://terminusdb.com/schema/repository#",layer:"http://terminusdb.com/schema/layer#",woql:"http://terminusdb.com/schema/woql#",ref:"http://terminusdb.com/schema/ref#",api:"http://terminusdb.com/schema/api#"},h.URIEncodePayload=function(s){if(typeof s=="string")return encodeURIComponent(s);const a=[];for(const t of Object.keys(s))if(typeof s[t]=="object")for(const i of Object.keys(s[t])){const e=s[t][i];a.push(`${encodeURIComponent(i)}=${encodeURIComponent(e)}`)}else a.push(`${encodeURIComponent(t)}=${encodeURIComponent(s[t])}`);return a.join("&")},h.addURLPrefix=function(s,a){this.standard_urls[s]=a},h.empty=function(s){if(!s)return!0;if(s.length>0)return!1;if(s.length===0)return!0;if(typeof s=="object"){for(const a of Object.keys(s))if(Object.prototype.hasOwnProperty.call(s,a))return!1}return!0},h.genBNID=function(s){s=s||"";const a=Math.random().toString(36).substring(7);return`${s}${a}${new Date().getTime()}`},h.getShorthand=function(s){if(typeof s=="object"&&s.length&&(s=s[0]),s&&typeof s=="string")for(const a of Object.keys(this.standard_urls)){const t=this.standard_urls[a];if(s.substring(0,t.length)===t)return`${a}:${s.substring(t.length)}`}return!1},h.compareIDs=function(s,a){return s===a||this.unshorten(s)===a||this.shorten(s)===a||this.unshorten(s)===this.unshorten(a)},h.shorten=function(s,a){if(s)return s.indexOf("#")!==-1?s.split("#").pop():s.indexOf("terminusdb://")!==-1?s.split("/").pop():s},h.unshorten=function(s){if(!s)return;if(this.validURL(s)||!s)return s;const a=s.split(":");return a[1]&&this.standard_urls[a[0]]?this.standard_urls[a[0]]+a[1]:s},h.json_shorten=function(s,a){const t=(e,n)=>{if(Array.isArray(e)){const c=[];for(let r=0;r<e.length;r++)c.push(t(e[r],n));return c}return typeof e=="object"?this.json_shorten(e,n):typeof e=="string"?this.shorten(e,n):e};a=a||s["@context"];const i={};for(const e in s){const n=e[0]==="@"?e:this.shorten(e,a),c=t(s[e],a);i[n]=c}return i},h.json_unshorten=function(s,a){const t=(e,n)=>{if(Array.isArray(e)){const c=[];for(let r=0;r<e.length;r++)c.push(t(e[r],n));return c}return typeof e=="object"?this.json_unshorten(e,n):typeof e=="string"?this.unshorten(e,n):e};a=a||s["@context"];const i={};for(const e in s){const n=e[0]==="@"?e:this.unshorten(e,a),c=t(s[e],a);i[n]=c}return i},h.validURL=function(s){return s&&typeof s!="string"&&(s=`${s}`),!!(s&&(s.substring(0,7)==="http://"||s.substring(0,8)==="https://"))},h.isIRI=function(s,a,t){if(!s)return!1;if(t&&a&&a[s.split(":")[0]])return!0;if(a){for(pref in a)if(s.substring(0,a[pref].length)===a[pref])return!0}const i=s.split(":")[0];return["http","https","terminusdb"].indexOf(i)!==-1},h.labelFromURL=function(s){let a=this.urlFragment(s);return a=a||s,a.lastIndexOf("/")<a.length-1&&(a=a.substring(a.lastIndexOf("/")+1)),a=a.replace(/_/g," "),a.charAt(0).toUpperCase()+a.slice(1)},h.labelFromVariable=function(s){return s=s.replace(/_/g," "),s.charAt(0).toUpperCase()+s.slice(1)},h.urlFragment=function(s){s=typeof s!="string"?window.location.href:s;let a=s.split("#");if(a.length<=1&&(this.validURL(s)||(a=s.split(":"))),a.length>=1){const[,t]=a;if(t){const[i]=t.split("?");s=i}}return s},h.lastURLBit=function(s){s=typeof s>"u"?window.location.href:s;const[a]=s.split("#"),[t]=a.split("?");return s=t.substring(s.lastIndexOf("/")+1),s},h.getStdURL=function(s,a,t){if(this.standard_urls[s])if(t){if(t===this.standard_urls[s]+a)return t}else return this.standard_urls[s]+a;return!1},h.addNamespacesToVariables=function(s){const a=[];for(let t=0;t<s.length;t++)s[t]&&a.push(this.addNamespaceToVariable(s[t]));return a},h.addNamespaceToVariable=function(s){return typeof s=="string"&&s.substring(0,2)!=="v:"?`v:${s}`:s},h.removeNamespaceFromVariable=function(s){return s.substring(0,2)==="v:"?s.substring(2):s},h.removeNamespacesFromVariables=function(s){const a=[];for(let t=0;t<s.length;t++)a.push(this.removeNamespaceFromVariable(s[t]));return a},h.getConfigValue=function(s,a){if(typeof s=="string"&&(s=this.removeNamespaceFromVariable(s)),typeof s=="string"&&a[s]){const t=a[s];return t&&t["@value"]?t["@value"]:t}return s},h.TypeHelper={},h.TypeHelper.isStringType=function(s){return s==="http://www.w3.org/2001/XMLSchema#string"||s==="xsd:string"},h.TypeHelper.isDatatype=function(s){const a=h.shorten(s);return!!(a&&a.substring(0,4)==="xsd:"||a.substring(0,4)==="xdd:")},h.TypeHelper.numberWithCommas=function(s,a){if(a=a||",",s>=1e3||s<=-1e3){const t=s.toString().split(".");s<=-1e3&&(t[0]=t[0].substring(1)),t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,a),s<=-1e3?s=`-${t.join(".")}`:s=t.join(".")}return s},h.TypeHelper.formatBytes=function(s,a=2){if(s===0)return"0 Bytes";const t=1024,i=a<0?0:a,e=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],n=Math.floor(Math.log(s)/Math.log(t));return`${parseFloat((s/t**n).toFixed(i))} ${e[n]}`},h.TypeHelper.datatypes=["xdd:coordinate","xdd:coordinatePolyline","xdd:coordinatePolygon","xdd:dateRange","xdd:gYearRange","xdd:integerRange","xdd:decimalRange","xdd:cc","xdd:email","xdd:html","xdd:url","xsd:anySimpleType","xsd:string","xsd:boolean","xsd:decimal","xsd:double","xsd:float","xsd:time","xsd:date","xsd:dateTime","xsd:dateTimeStamp","xsd:gYear","xsd:gMonth","xsd:gDay","xsd:gYearMonth","xsd:gMonthDay","xsd:duration","xsd:yearMonthDuration","xsd:dayTimeDuration","xsd:byte","xsd:short","xsd:integer","xsd:long","xsd:unsignedByte","xsd:unsignedInt","xsd:unsignedLong","xsd:nonNegativeInteger","xsd:positiveInteger","xsd:negativeInteger","xsd:nonPositiveInteger","xsd:base64Binary","xsd:anyURI","xsd:language","xsd:normalizedString","xsd:token","xsd:NMTOKEN","xsd:Name","xsd:NCName","xsd:NOTATION","xsd:QName","xsd:ID","xsd:IDREF","xsd:ENTITY","rdf:XMLLiteral","rdf:PlainLiteral","rdfs:Literal","xdd:json"],h.TypeHelper.parseRangeValue=function(s,a){a=a||",";let t=[];return typeof s=="object"&&s.length?t=s:s&&(typeof s!="string"&&(s=`${s}`),s.length&&s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?(t.push(s.substring(1,s.indexOf(a))),t.push(s.substring(s.indexOf(a)+1,s.length-1))):t.push(s)),t},h.DateHelper={},h.DateHelper.parseXsdTime=function(s){if(!s)return{};const a=this.extractXsdTimezone(s);return a&&(s=s.substring(0,s.length-a.length)),{hour:s.substring(0,2),minute:s.substring(3,5),second:s.substring(6),timezone:a}},h.DateHelper.parseXsdDate=function(s){const a=this.extractXsdTimezone(s);a&&(s=s.substring(0,s.length-a.length));let t;s.substring(0,1)==="-"?t=s.substring(0,5):t=s.substring(0,4);let i;if(t&&Math.abs(t)<1e4){let e=s.substring(t.length+1,t.length+3);if(e)e=parseInt(e,10);else return!1;let n=s.substring(t.length+4);if(n)n=parseInt(n,10);else return!1;i={year:t,month:e,day:n,timezone:a}}return i},h.DateHelper.parseDate=function(s,a){let t;if(s==="xsd:date")t=this.parseXsdDate(a);else if(s==="xsd:time")t=this.parseXsdTime(a);else if(s==="xsd:dateTime")t=this.parseXsdDateTime(a);else if(s==="xsd:gYear")t={year:a};else if(s==="xsd:gYearRange")t={year:a};else if(s==="xsd:gMonth")t={month:a.substring(2)};else if(s==="xsd:gDay")t={day:a};else if(s==="xsd:gYearMonth"){const i=a.split("-");for(;i.length<2;)i.push("");t={year:i[0],month:i[1]}}else if(s==="xsd:gMonthDay"){const i=a.split("-");for(;i.length<2;)i.push("");t={month:i[0],day:i[1]}}else s==="xsd:dateTimeStamp"&&(t=this.parseXsdDateTime(a));return t},h.DateHelper.addXsdPadding=function(s){const a={};return typeof s.year<"u"&&s.year!==!1&&s.year<1e3?Math.abs(s.year)<10?a.year=s.year<0?`-000${Math.abs(s.year)}`:`000${s.year}`:Math.abs(s.year)<100?a.year=s.year<0?`-00${Math.abs(s.year)}`:`00${s.year}`:a.year=s.year<0?`-0${Math.abs(s.year)}`:`0${s.year}`:s.year&&(a.year=s.year),typeof s.month<"u"&&s.month!==!1&&s.month<10?a.month=`0${s.month}`:s.month&&(a.month=s.month),typeof s.day<"u"&&s.day!==!1&&s.day<10?a.day=`0${s.day}`:s.day&&(a.day=s.day),typeof s.hour<"u"&&s.hour!==!1&&s.hour<10?a.hour=`0${s.hour}`:s.hour&&(a.hour=s.hour),typeof s.minute<"u"&&s.minute!==!1&&s.minute<10?a.minute=`0${s.minute}`:s.minute&&(a.minute=s.minute),typeof s.second<"u"&&s.second!==!1&&s.second<10?a.second=`0${s.second}`:s.second&&(a.second=s.second),a},h.DateHelper.xsdFromParsed=function(s,a){const t=this.addXsdPadding(s);let i;if(a==="xsd:gYear")i=t.year?t.year:!1;else{if(a==="xsd:time")return t.hour&&t.minute&&t.second?`${t.hour}:${t.minute}:${t.second}`:!1;if(a==="xsd:date")return t.year&&t.month&&t.day?`${t.year}-${t.month}-${t.day}`:!1;a==="xsd:dateTime"||a==="xsd:dateTimeStamp"?(i=t.year&&t.month&&t.day?`${t.year}-${t.month}-${t.day}T`:!1,i&&(i+=`${t.hour?t.hour:"12"}:${t.minute?t.minute:"00"}:${t.second?t.second:"00"}`)):a==="xsd:gMonth"?i=t.month?`--${t.month}`:!1:a==="xsd:gDay"?i=t.day?`---${t.day}`:!1:a==="xsd:gYearMonth"?i=t.year&&t.month?`${t.year}-${t.month}`:!1:a==="xsd:gMonthDay"&&(i=t.day&&t.month?`--${t.month}-${t.day}`:!1)}return t.timezone&&(i+=t.timezone),i},h.DateHelper.convertTimestampToXsd=function(s){const a=new Date(s*1e3);return{year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate(),hour:a.getHours(),minute:a.getMinutes(),second:a.getSeconds()}},h.DateHelper.parseXsdDateTime=function(s){if(!s)return{};if(typeof s=="number")return this.convertTimestampToXsd(s);const a=this.extractXsdTimezone(s);a&&(s=s.substring(0,s.length-a.length));const t=this.parseXsdDate(s),i=this.parseXsdTime(s.substring(s.indexOf("T")+1));for(const e of Object.keys(i))t[e]=i[e];return t.timezone=a,t},h.DateHelper.extractXsdTimezone=function(s){return typeof s=="string"&&s.endsWith("Z")?"Z":(typeof s=="string"&&(s.charAt(s.length-6)==="+"||s.charAt(s.length-6)==="-")&&s.substring(s.length-6),!1)},utils=h,utils}var typedef,hasRequiredTypedef;function requireTypedef(){if(hasRequiredTypedef)return typedef;hasRequiredTypedef=1;const h=requireUtils(),{ACTIONS:s}=h.ACTIONS;return typedef={},typedef}/**
 * @file Terminus Constants
 * @license Apache Version 2
 * Constants representing API actions
 */var _const,hasRequired_const;function require_const(){return hasRequired_const||(hasRequired_const=1,_const=Object.freeze({POST:"POST",GET:"GET",DELETE:"DELETE",PUT:"PUT",HEAD:"HEAD",QUERY_DOCUMENT:"QUERY_DOCUMENT",SQUASH_BRANCH:"SQUASH_BRANCH",UPDATE_SCHEMA:"UPDATE_SCHEMA",CONNECT:"connect",CREATE_DATABASE:"create_database",READ_DATABASE:"read_database",UPDATE_DATABASE:"update_database",CREATE_USER:"create_user",READ_USER:"read_user",UPDATE_USER:"update_user",CREATE_ORGANIZATION:"create_organization",READ_ORGANIZATION:"read_organization",UPDATE_ORGANIZATION:"update_organization",GET_ROLES:"get_roles",UPDATE_ROLES:"update_roles",CREATE_GRAPH:"create_graph",GET_TRIPLES:"get_triples",INSERT_TRIPLES:"insert_triples",UPDATE_TRIPLES:"update_triples",CLASS_FRAME:"class_frame",WOQL_QUERY:"woql_query",CLONE:"clone",CSV:"csv",WOQL:"woql",FRAME:"frame",PUSH:"push",PULL:"pull",FETCH:"fetch",REBASE:"rebase",RESET:"reset",BRANCH:"branch",RESET_BRANCH:"reset_branch",ADD_CSV:"add_csv",GET_CSV:"get_csv",UPDATE_CSV:"update_csv",MESSAGE:"message",ACTION:"action",INFO:"info",OPTIMIZE_SYSTEM:"optimize_system",GET_DIFF:"getDiff",PATCH:"patch"})),_const}var pako={},deflate$1={},deflate={},trees={},hasRequiredTrees;function requireTrees(){if(hasRequiredTrees)return trees;hasRequiredTrees=1;const h=4,s=0,a=1,t=2;function i(m){let Q=m.length;for(;--Q>=0;)m[Q]=0}const e=0,n=1,c=2,r=3,u=258,l=29,o=256,y=o+1+l,b=30,A=19,j=2*y+1,F=15,oe=16,re=7,k=256,x=16,U=17,$=18,H=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ae=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),K=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),pe=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_e=512,Y=new Array((y+2)*2);i(Y);const ie=new Array(b*2);i(ie);const Ae=new Array(_e);i(Ae);const qe=new Array(u-r+1);i(qe);const Ie=new Array(l);i(Ie);const Ve=new Array(b);i(Ve);function Fe(m,Q,z,G,X){this.static_tree=m,this.extra_bits=Q,this.extra_base=z,this.elems=G,this.max_length=X,this.has_stree=m&&m.length}let Je,se,Ce;function xe(m,Q){this.dyn_tree=m,this.max_code=0,this.stat_desc=Q}const Xe=m=>m<256?Ae[m]:Ae[256+(m>>>7)],Te=(m,Q)=>{m.pending_buf[m.pending++]=Q&255,m.pending_buf[m.pending++]=Q>>>8&255},ve=(m,Q,z)=>{m.bi_valid>oe-z?(m.bi_buf|=Q<<m.bi_valid&65535,Te(m,m.bi_buf),m.bi_buf=Q>>oe-m.bi_valid,m.bi_valid+=z-oe):(m.bi_buf|=Q<<m.bi_valid&65535,m.bi_valid+=z)},Le=(m,Q,z)=>{ve(m,z[Q*2],z[Q*2+1])},rt=(m,Q)=>{let z=0;do z|=m&1,m>>>=1,z<<=1;while(--Q>0);return z>>>1},st=m=>{m.bi_valid===16?(Te(m,m.bi_buf),m.bi_buf=0,m.bi_valid=0):m.bi_valid>=8&&(m.pending_buf[m.pending++]=m.bi_buf&255,m.bi_buf>>=8,m.bi_valid-=8)},ot=(m,Q)=>{const z=Q.dyn_tree,G=Q.max_code,X=Q.stat_desc.static_tree,te=Q.stat_desc.has_stree,O=Q.stat_desc.extra_bits,D=Q.stat_desc.extra_base,d=Q.stat_desc.max_length;let I,he,N,ge,Z,Oe,T=0;for(ge=0;ge<=F;ge++)m.bl_count[ge]=0;for(z[m.heap[m.heap_max]*2+1]=0,I=m.heap_max+1;I<j;I++)he=m.heap[I],ge=z[z[he*2+1]*2+1]+1,ge>d&&(ge=d,T++),z[he*2+1]=ge,!(he>G)&&(m.bl_count[ge]++,Z=0,he>=D&&(Z=O[he-D]),Oe=z[he*2],m.opt_len+=Oe*(ge+Z),te&&(m.static_len+=Oe*(X[he*2+1]+Z)));if(T!==0){do{for(ge=d-1;m.bl_count[ge]===0;)ge--;m.bl_count[ge]--,m.bl_count[ge+1]+=2,m.bl_count[d]--,T-=2}while(T>0);for(ge=d;ge!==0;ge--)for(he=m.bl_count[ge];he!==0;)N=m.heap[--I],!(N>G)&&(z[N*2+1]!==ge&&(m.opt_len+=(ge-z[N*2+1])*z[N*2],z[N*2+1]=ge),he--)}},Be=(m,Q,z)=>{const G=new Array(F+1);let X=0,te,O;for(te=1;te<=F;te++)X=X+z[te-1]<<1,G[te]=X;for(O=0;O<=Q;O++){let D=m[O*2+1];D!==0&&(m[O*2]=rt(G[D]++,D))}},we=()=>{let m,Q,z,G,X;const te=new Array(F+1);for(z=0,G=0;G<l-1;G++)for(Ie[G]=z,m=0;m<1<<H[G];m++)qe[z++]=G;for(qe[z-1]=G,X=0,G=0;G<16;G++)for(Ve[G]=X,m=0;m<1<<ae[G];m++)Ae[X++]=G;for(X>>=7;G<b;G++)for(Ve[G]=X<<7,m=0;m<1<<ae[G]-7;m++)Ae[256+X++]=G;for(Q=0;Q<=F;Q++)te[Q]=0;for(m=0;m<=143;)Y[m*2+1]=8,m++,te[8]++;for(;m<=255;)Y[m*2+1]=9,m++,te[9]++;for(;m<=279;)Y[m*2+1]=7,m++,te[7]++;for(;m<=287;)Y[m*2+1]=8,m++,te[8]++;for(Be(Y,y+1,te),m=0;m<b;m++)ie[m*2+1]=5,ie[m*2]=rt(m,5);Je=new Fe(Y,H,o+1,y,F),se=new Fe(ie,ae,0,b,F),Ce=new Fe(new Array(0),K,0,A,re)},Ee=m=>{let Q;for(Q=0;Q<y;Q++)m.dyn_ltree[Q*2]=0;for(Q=0;Q<b;Q++)m.dyn_dtree[Q*2]=0;for(Q=0;Q<A;Q++)m.bl_tree[Q*2]=0;m.dyn_ltree[k*2]=1,m.opt_len=m.static_len=0,m.sym_next=m.matches=0},Me=m=>{m.bi_valid>8?Te(m,m.bi_buf):m.bi_valid>0&&(m.pending_buf[m.pending++]=m.bi_buf),m.bi_buf=0,m.bi_valid=0},He=(m,Q,z,G)=>{const X=Q*2,te=z*2;return m[X]<m[te]||m[X]===m[te]&&G[Q]<=G[z]},Ke=(m,Q,z)=>{const G=m.heap[z];let X=z<<1;for(;X<=m.heap_len&&(X<m.heap_len&&He(Q,m.heap[X+1],m.heap[X],m.depth)&&X++,!He(Q,G,m.heap[X],m.depth));)m.heap[z]=m.heap[X],z=X,X<<=1;m.heap[z]=G},dt=(m,Q,z)=>{let G,X,te=0,O,D;if(m.sym_next!==0)do G=m.pending_buf[m.sym_buf+te++]&255,G+=(m.pending_buf[m.sym_buf+te++]&255)<<8,X=m.pending_buf[m.sym_buf+te++],G===0?Le(m,X,Q):(O=qe[X],Le(m,O+o+1,Q),D=H[O],D!==0&&(X-=Ie[O],ve(m,X,D)),G--,O=Xe(G),Le(m,O,z),D=ae[O],D!==0&&(G-=Ve[O],ve(m,G,D)));while(te<m.sym_next);Le(m,k,Q)},Ge=(m,Q)=>{const z=Q.dyn_tree,G=Q.stat_desc.static_tree,X=Q.stat_desc.has_stree,te=Q.stat_desc.elems;let O,D,d=-1,I;for(m.heap_len=0,m.heap_max=j,O=0;O<te;O++)z[O*2]!==0?(m.heap[++m.heap_len]=d=O,m.depth[O]=0):z[O*2+1]=0;for(;m.heap_len<2;)I=m.heap[++m.heap_len]=d<2?++d:0,z[I*2]=1,m.depth[I]=0,m.opt_len--,X&&(m.static_len-=G[I*2+1]);for(Q.max_code=d,O=m.heap_len>>1;O>=1;O--)Ke(m,z,O);I=te;do O=m.heap[1],m.heap[1]=m.heap[m.heap_len--],Ke(m,z,1),D=m.heap[1],m.heap[--m.heap_max]=O,m.heap[--m.heap_max]=D,z[I*2]=z[O*2]+z[D*2],m.depth[I]=(m.depth[O]>=m.depth[D]?m.depth[O]:m.depth[D])+1,z[O*2+1]=z[D*2+1]=I,m.heap[1]=I++,Ke(m,z,1);while(m.heap_len>=2);m.heap[--m.heap_max]=m.heap[1],ot(m,Q),Be(z,d,m.bl_count)},at=(m,Q,z)=>{let G,X=-1,te,O=Q[0*2+1],D=0,d=7,I=4;for(O===0&&(d=138,I=3),Q[(z+1)*2+1]=65535,G=0;G<=z;G++)te=O,O=Q[(G+1)*2+1],!(++D<d&&te===O)&&(D<I?m.bl_tree[te*2]+=D:te!==0?(te!==X&&m.bl_tree[te*2]++,m.bl_tree[x*2]++):D<=10?m.bl_tree[U*2]++:m.bl_tree[$*2]++,D=0,X=te,O===0?(d=138,I=3):te===O?(d=6,I=3):(d=7,I=4))},Ye=(m,Q,z)=>{let G,X=-1,te,O=Q[0*2+1],D=0,d=7,I=4;for(O===0&&(d=138,I=3),G=0;G<=z;G++)if(te=O,O=Q[(G+1)*2+1],!(++D<d&&te===O)){if(D<I)do Le(m,te,m.bl_tree);while(--D!==0);else te!==0?(te!==X&&(Le(m,te,m.bl_tree),D--),Le(m,x,m.bl_tree),ve(m,D-3,2)):D<=10?(Le(m,U,m.bl_tree),ve(m,D-3,3)):(Le(m,$,m.bl_tree),ve(m,D-11,7));D=0,X=te,O===0?(d=138,I=3):te===O?(d=6,I=3):(d=7,I=4)}},S=m=>{let Q;for(at(m,m.dyn_ltree,m.l_desc.max_code),at(m,m.dyn_dtree,m.d_desc.max_code),Ge(m,m.bl_desc),Q=A-1;Q>=3&&m.bl_tree[pe[Q]*2+1]===0;Q--);return m.opt_len+=3*(Q+1)+5+5+4,Q},de=(m,Q,z,G)=>{let X;for(ve(m,Q-257,5),ve(m,z-1,5),ve(m,G-4,4),X=0;X<G;X++)ve(m,m.bl_tree[pe[X]*2+1],3);Ye(m,m.dyn_ltree,Q-1),Ye(m,m.dyn_dtree,z-1)},Ne=m=>{let Q=4093624447,z;for(z=0;z<=31;z++,Q>>>=1)if(Q&1&&m.dyn_ltree[z*2]!==0)return s;if(m.dyn_ltree[9*2]!==0||m.dyn_ltree[10*2]!==0||m.dyn_ltree[13*2]!==0)return a;for(z=32;z<o;z++)if(m.dyn_ltree[z*2]!==0)return a;return s};let Se=!1;const De=m=>{Se||(we(),Se=!0),m.l_desc=new xe(m.dyn_ltree,Je),m.d_desc=new xe(m.dyn_dtree,se),m.bl_desc=new xe(m.bl_tree,Ce),m.bi_buf=0,m.bi_valid=0,Ee(m)},ye=(m,Q,z,G)=>{ve(m,(e<<1)+(G?1:0),3),Me(m),Te(m,z),Te(m,~z),z&&m.pending_buf.set(m.window.subarray(Q,Q+z),m.pending),m.pending+=z},tt=m=>{ve(m,n<<1,3),Le(m,k,Y),st(m)},it=(m,Q,z,G)=>{let X,te,O=0;m.level>0?(m.strm.data_type===t&&(m.strm.data_type=Ne(m)),Ge(m,m.l_desc),Ge(m,m.d_desc),O=S(m),X=m.opt_len+3+7>>>3,te=m.static_len+3+7>>>3,te<=X&&(X=te)):X=te=z+5,z+4<=X&&Q!==-1?ye(m,Q,z,G):m.strategy===h||te===X?(ve(m,(n<<1)+(G?1:0),3),dt(m,Y,ie)):(ve(m,(c<<1)+(G?1:0),3),de(m,m.l_desc.max_code+1,m.d_desc.max_code+1,O+1),dt(m,m.dyn_ltree,m.dyn_dtree)),Ee(m),G&&Me(m)},ut=(m,Q,z)=>(m.pending_buf[m.sym_buf+m.sym_next++]=Q,m.pending_buf[m.sym_buf+m.sym_next++]=Q>>8,m.pending_buf[m.sym_buf+m.sym_next++]=z,Q===0?m.dyn_ltree[z*2]++:(m.matches++,Q--,m.dyn_ltree[(qe[z]+o+1)*2]++,m.dyn_dtree[Xe(Q)*2]++),m.sym_next===m.sym_end);return trees._tr_init=De,trees._tr_stored_block=ye,trees._tr_flush_block=it,trees._tr_tally=ut,trees._tr_align=tt,trees}var adler32_1,hasRequiredAdler32;function requireAdler32(){return hasRequiredAdler32||(hasRequiredAdler32=1,adler32_1=(s,a,t,i)=>{let e=s&65535|0,n=s>>>16&65535|0,c=0;for(;t!==0;){c=t>2e3?2e3:t,t-=c;do e=e+a[i++]|0,n=n+e|0;while(--c);e%=65521,n%=65521}return e|n<<16|0}),adler32_1}var crc32_1,hasRequiredCrc32;function requireCrc32(){if(hasRequiredCrc32)return crc32_1;hasRequiredCrc32=1;const h=()=>{let t,i=[];for(var e=0;e<256;e++){t=e;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;i[e]=t}return i},s=new Uint32Array(h());return crc32_1=(t,i,e,n)=>{const c=s,r=n+e;t^=-1;for(let u=n;u<r;u++)t=t>>>8^c[(t^i[u])&255];return t^-1},crc32_1}var messages,hasRequiredMessages;function requireMessages(){return hasRequiredMessages||(hasRequiredMessages=1,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),messages}var constants,hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,constants={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),constants}var hasRequiredDeflate$1;function requireDeflate$1(){if(hasRequiredDeflate$1)return deflate;hasRequiredDeflate$1=1;const{_tr_init:h,_tr_stored_block:s,_tr_flush_block:a,_tr_tally:t,_tr_align:i}=requireTrees(),e=requireAdler32(),n=requireCrc32(),c=requireMessages(),{Z_NO_FLUSH:r,Z_PARTIAL_FLUSH:u,Z_FULL_FLUSH:l,Z_FINISH:o,Z_BLOCK:y,Z_OK:b,Z_STREAM_END:A,Z_STREAM_ERROR:j,Z_DATA_ERROR:F,Z_BUF_ERROR:oe,Z_DEFAULT_COMPRESSION:re,Z_FILTERED:k,Z_HUFFMAN_ONLY:x,Z_RLE:U,Z_FIXED:$,Z_DEFAULT_STRATEGY:H,Z_UNKNOWN:ae,Z_DEFLATED:K}=requireConstants(),pe=9,_e=15,Y=8,qe=256+1+29,Ie=30,Ve=19,Fe=2*qe+1,Je=15,se=3,Ce=258,xe=Ce+se+1,Xe=32,Te=42,ve=57,Le=69,rt=73,st=91,ot=103,Be=113,we=666,Ee=1,Me=2,He=3,Ke=4,dt=3,Ge=(f,q)=>(f.msg=c[q],q),at=f=>f*2-(f>4?9:0),Ye=f=>{let q=f.length;for(;--q>=0;)f[q]=0},S=f=>{let q,_,C,E=f.w_size;q=f.hash_size,C=q;do _=f.head[--C],f.head[C]=_>=E?_-E:0;while(--q);q=E,C=q;do _=f.prev[--C],f.prev[C]=_>=E?_-E:0;while(--q)};let Ne=(f,q,_)=>(q<<f.hash_shift^_)&f.hash_mask;const Se=f=>{const q=f.state;let _=q.pending;_>f.avail_out&&(_=f.avail_out),_!==0&&(f.output.set(q.pending_buf.subarray(q.pending_out,q.pending_out+_),f.next_out),f.next_out+=_,q.pending_out+=_,f.total_out+=_,f.avail_out-=_,q.pending-=_,q.pending===0&&(q.pending_out=0))},De=(f,q)=>{a(f,f.block_start>=0?f.block_start:-1,f.strstart-f.block_start,q),f.block_start=f.strstart,Se(f.strm)},ye=(f,q)=>{f.pending_buf[f.pending++]=q},tt=(f,q)=>{f.pending_buf[f.pending++]=q>>>8&255,f.pending_buf[f.pending++]=q&255},it=(f,q,_,C)=>{let E=f.avail_in;return E>C&&(E=C),E===0?0:(f.avail_in-=E,q.set(f.input.subarray(f.next_in,f.next_in+E),_),f.state.wrap===1?f.adler=e(f.adler,q,E,_):f.state.wrap===2&&(f.adler=n(f.adler,q,E,_)),f.next_in+=E,f.total_in+=E,E)},ut=(f,q)=>{let _=f.max_chain_length,C=f.strstart,E,V,ee=f.prev_length,J=f.nice_match;const $e=f.strstart>f.w_size-xe?f.strstart-(f.w_size-xe):0,be=f.window,Re=f.w_mask,je=f.prev,Pe=f.strstart+Ce;let et=be[C+ee-1],Ue=be[C+ee];f.prev_length>=f.good_match&&(_>>=2),J>f.lookahead&&(J=f.lookahead);do if(E=q,!(be[E+ee]!==Ue||be[E+ee-1]!==et||be[E]!==be[C]||be[++E]!==be[C+1])){C+=2,E++;do;while(be[++C]===be[++E]&&be[++C]===be[++E]&&be[++C]===be[++E]&&be[++C]===be[++E]&&be[++C]===be[++E]&&be[++C]===be[++E]&&be[++C]===be[++E]&&be[++C]===be[++E]&&C<Pe);if(V=Ce-(Pe-C),C=Pe-Ce,V>ee){if(f.match_start=q,ee=V,V>=J)break;et=be[C+ee-1],Ue=be[C+ee]}}while((q=je[q&Re])>$e&&--_!==0);return ee<=f.lookahead?ee:f.lookahead},m=f=>{const q=f.w_size;let _,C,E;do{if(C=f.window_size-f.lookahead-f.strstart,f.strstart>=q+(q-xe)&&(f.window.set(f.window.subarray(q,q+q-C),0),f.match_start-=q,f.strstart-=q,f.block_start-=q,f.insert>f.strstart&&(f.insert=f.strstart),S(f),C+=q),f.strm.avail_in===0)break;if(_=it(f.strm,f.window,f.strstart+f.lookahead,C),f.lookahead+=_,f.lookahead+f.insert>=se)for(E=f.strstart-f.insert,f.ins_h=f.window[E],f.ins_h=Ne(f,f.ins_h,f.window[E+1]);f.insert&&(f.ins_h=Ne(f,f.ins_h,f.window[E+se-1]),f.prev[E&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=E,E++,f.insert--,!(f.lookahead+f.insert<se)););}while(f.lookahead<xe&&f.strm.avail_in!==0)},Q=(f,q)=>{let _=f.pending_buf_size-5>f.w_size?f.w_size:f.pending_buf_size-5,C,E,V,ee=0,J=f.strm.avail_in;do{if(C=65535,V=f.bi_valid+42>>3,f.strm.avail_out<V||(V=f.strm.avail_out-V,E=f.strstart-f.block_start,C>E+f.strm.avail_in&&(C=E+f.strm.avail_in),C>V&&(C=V),C<_&&(C===0&&q!==o||q===r||C!==E+f.strm.avail_in)))break;ee=q===o&&C===E+f.strm.avail_in?1:0,s(f,0,0,ee),f.pending_buf[f.pending-4]=C,f.pending_buf[f.pending-3]=C>>8,f.pending_buf[f.pending-2]=~C,f.pending_buf[f.pending-1]=~C>>8,Se(f.strm),E&&(E>C&&(E=C),f.strm.output.set(f.window.subarray(f.block_start,f.block_start+E),f.strm.next_out),f.strm.next_out+=E,f.strm.avail_out-=E,f.strm.total_out+=E,f.block_start+=E,C-=E),C&&(it(f.strm,f.strm.output,f.strm.next_out,C),f.strm.next_out+=C,f.strm.avail_out-=C,f.strm.total_out+=C)}while(ee===0);return J-=f.strm.avail_in,J&&(J>=f.w_size?(f.matches=2,f.window.set(f.strm.input.subarray(f.strm.next_in-f.w_size,f.strm.next_in),0),f.strstart=f.w_size,f.insert=f.strstart):(f.window_size-f.strstart<=J&&(f.strstart-=f.w_size,f.window.set(f.window.subarray(f.w_size,f.w_size+f.strstart),0),f.matches<2&&f.matches++,f.insert>f.strstart&&(f.insert=f.strstart)),f.window.set(f.strm.input.subarray(f.strm.next_in-J,f.strm.next_in),f.strstart),f.strstart+=J,f.insert+=J>f.w_size-f.insert?f.w_size-f.insert:J),f.block_start=f.strstart),f.high_water<f.strstart&&(f.high_water=f.strstart),ee?Ke:q!==r&&q!==o&&f.strm.avail_in===0&&f.strstart===f.block_start?Me:(V=f.window_size-f.strstart,f.strm.avail_in>V&&f.block_start>=f.w_size&&(f.block_start-=f.w_size,f.strstart-=f.w_size,f.window.set(f.window.subarray(f.w_size,f.w_size+f.strstart),0),f.matches<2&&f.matches++,V+=f.w_size,f.insert>f.strstart&&(f.insert=f.strstart)),V>f.strm.avail_in&&(V=f.strm.avail_in),V&&(it(f.strm,f.window,f.strstart,V),f.strstart+=V,f.insert+=V>f.w_size-f.insert?f.w_size-f.insert:V),f.high_water<f.strstart&&(f.high_water=f.strstart),V=f.bi_valid+42>>3,V=f.pending_buf_size-V>65535?65535:f.pending_buf_size-V,_=V>f.w_size?f.w_size:V,E=f.strstart-f.block_start,(E>=_||(E||q===o)&&q!==r&&f.strm.avail_in===0&&E<=V)&&(C=E>V?V:E,ee=q===o&&f.strm.avail_in===0&&C===E?1:0,s(f,f.block_start,C,ee),f.block_start+=C,Se(f.strm)),ee?He:Ee)},z=(f,q)=>{let _,C;for(;;){if(f.lookahead<xe){if(m(f),f.lookahead<xe&&q===r)return Ee;if(f.lookahead===0)break}if(_=0,f.lookahead>=se&&(f.ins_h=Ne(f,f.ins_h,f.window[f.strstart+se-1]),_=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),_!==0&&f.strstart-_<=f.w_size-xe&&(f.match_length=ut(f,_)),f.match_length>=se)if(C=t(f,f.strstart-f.match_start,f.match_length-se),f.lookahead-=f.match_length,f.match_length<=f.max_lazy_match&&f.lookahead>=se){f.match_length--;do f.strstart++,f.ins_h=Ne(f,f.ins_h,f.window[f.strstart+se-1]),_=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart;while(--f.match_length!==0);f.strstart++}else f.strstart+=f.match_length,f.match_length=0,f.ins_h=f.window[f.strstart],f.ins_h=Ne(f,f.ins_h,f.window[f.strstart+1]);else C=t(f,0,f.window[f.strstart]),f.lookahead--,f.strstart++;if(C&&(De(f,!1),f.strm.avail_out===0))return Ee}return f.insert=f.strstart<se-1?f.strstart:se-1,q===o?(De(f,!0),f.strm.avail_out===0?He:Ke):f.sym_next&&(De(f,!1),f.strm.avail_out===0)?Ee:Me},G=(f,q)=>{let _,C,E;for(;;){if(f.lookahead<xe){if(m(f),f.lookahead<xe&&q===r)return Ee;if(f.lookahead===0)break}if(_=0,f.lookahead>=se&&(f.ins_h=Ne(f,f.ins_h,f.window[f.strstart+se-1]),_=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),f.prev_length=f.match_length,f.prev_match=f.match_start,f.match_length=se-1,_!==0&&f.prev_length<f.max_lazy_match&&f.strstart-_<=f.w_size-xe&&(f.match_length=ut(f,_),f.match_length<=5&&(f.strategy===k||f.match_length===se&&f.strstart-f.match_start>4096)&&(f.match_length=se-1)),f.prev_length>=se&&f.match_length<=f.prev_length){E=f.strstart+f.lookahead-se,C=t(f,f.strstart-1-f.prev_match,f.prev_length-se),f.lookahead-=f.prev_length-1,f.prev_length-=2;do++f.strstart<=E&&(f.ins_h=Ne(f,f.ins_h,f.window[f.strstart+se-1]),_=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart);while(--f.prev_length!==0);if(f.match_available=0,f.match_length=se-1,f.strstart++,C&&(De(f,!1),f.strm.avail_out===0))return Ee}else if(f.match_available){if(C=t(f,0,f.window[f.strstart-1]),C&&De(f,!1),f.strstart++,f.lookahead--,f.strm.avail_out===0)return Ee}else f.match_available=1,f.strstart++,f.lookahead--}return f.match_available&&(C=t(f,0,f.window[f.strstart-1]),f.match_available=0),f.insert=f.strstart<se-1?f.strstart:se-1,q===o?(De(f,!0),f.strm.avail_out===0?He:Ke):f.sym_next&&(De(f,!1),f.strm.avail_out===0)?Ee:Me},X=(f,q)=>{let _,C,E,V;const ee=f.window;for(;;){if(f.lookahead<=Ce){if(m(f),f.lookahead<=Ce&&q===r)return Ee;if(f.lookahead===0)break}if(f.match_length=0,f.lookahead>=se&&f.strstart>0&&(E=f.strstart-1,C=ee[E],C===ee[++E]&&C===ee[++E]&&C===ee[++E])){V=f.strstart+Ce;do;while(C===ee[++E]&&C===ee[++E]&&C===ee[++E]&&C===ee[++E]&&C===ee[++E]&&C===ee[++E]&&C===ee[++E]&&C===ee[++E]&&E<V);f.match_length=Ce-(V-E),f.match_length>f.lookahead&&(f.match_length=f.lookahead)}if(f.match_length>=se?(_=t(f,1,f.match_length-se),f.lookahead-=f.match_length,f.strstart+=f.match_length,f.match_length=0):(_=t(f,0,f.window[f.strstart]),f.lookahead--,f.strstart++),_&&(De(f,!1),f.strm.avail_out===0))return Ee}return f.insert=0,q===o?(De(f,!0),f.strm.avail_out===0?He:Ke):f.sym_next&&(De(f,!1),f.strm.avail_out===0)?Ee:Me},te=(f,q)=>{let _;for(;;){if(f.lookahead===0&&(m(f),f.lookahead===0)){if(q===r)return Ee;break}if(f.match_length=0,_=t(f,0,f.window[f.strstart]),f.lookahead--,f.strstart++,_&&(De(f,!1),f.strm.avail_out===0))return Ee}return f.insert=0,q===o?(De(f,!0),f.strm.avail_out===0?He:Ke):f.sym_next&&(De(f,!1),f.strm.avail_out===0)?Ee:Me};function O(f,q,_,C,E){this.good_length=f,this.max_lazy=q,this.nice_length=_,this.max_chain=C,this.func=E}const D=[new O(0,0,0,0,Q),new O(4,4,8,4,z),new O(4,5,16,8,z),new O(4,6,32,32,z),new O(4,4,16,16,G),new O(8,16,32,32,G),new O(8,16,128,128,G),new O(8,32,128,256,G),new O(32,128,258,1024,G),new O(32,258,258,4096,G)],d=f=>{f.window_size=2*f.w_size,Ye(f.head),f.max_lazy_match=D[f.level].max_lazy,f.good_match=D[f.level].good_length,f.nice_match=D[f.level].nice_length,f.max_chain_length=D[f.level].max_chain,f.strstart=0,f.block_start=0,f.lookahead=0,f.insert=0,f.match_length=f.prev_length=se-1,f.match_available=0,f.ins_h=0};function I(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=K,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Fe*2),this.dyn_dtree=new Uint16Array((2*Ie+1)*2),this.bl_tree=new Uint16Array((2*Ve+1)*2),Ye(this.dyn_ltree),Ye(this.dyn_dtree),Ye(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Je+1),this.heap=new Uint16Array(2*qe+1),Ye(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*qe+1),Ye(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const he=f=>{if(!f)return 1;const q=f.state;return!q||q.strm!==f||q.status!==Te&&q.status!==ve&&q.status!==Le&&q.status!==rt&&q.status!==st&&q.status!==ot&&q.status!==Be&&q.status!==we?1:0},N=f=>{if(he(f))return Ge(f,j);f.total_in=f.total_out=0,f.data_type=ae;const q=f.state;return q.pending=0,q.pending_out=0,q.wrap<0&&(q.wrap=-q.wrap),q.status=q.wrap===2?ve:q.wrap?Te:Be,f.adler=q.wrap===2?0:1,q.last_flush=-2,h(q),b},ge=f=>{const q=N(f);return q===b&&d(f.state),q},Z=(f,q)=>he(f)||f.state.wrap!==2?j:(f.state.gzhead=q,b),Oe=(f,q,_,C,E,V)=>{if(!f)return j;let ee=1;if(q===re&&(q=6),C<0?(ee=0,C=-C):C>15&&(ee=2,C-=16),E<1||E>pe||_!==K||C<8||C>15||q<0||q>9||V<0||V>$||C===8&&ee!==1)return Ge(f,j);C===8&&(C=9);const J=new I;return f.state=J,J.strm=f,J.status=Te,J.wrap=ee,J.gzhead=null,J.w_bits=C,J.w_size=1<<J.w_bits,J.w_mask=J.w_size-1,J.hash_bits=E+7,J.hash_size=1<<J.hash_bits,J.hash_mask=J.hash_size-1,J.hash_shift=~~((J.hash_bits+se-1)/se),J.window=new Uint8Array(J.w_size*2),J.head=new Uint16Array(J.hash_size),J.prev=new Uint16Array(J.w_size),J.lit_bufsize=1<<E+6,J.pending_buf_size=J.lit_bufsize*4,J.pending_buf=new Uint8Array(J.pending_buf_size),J.sym_buf=J.lit_bufsize,J.sym_end=(J.lit_bufsize-1)*3,J.level=q,J.strategy=V,J.method=_,ge(f)},T=(f,q)=>Oe(f,q,K,_e,Y,H),W=(f,q)=>{if(he(f)||q>y||q<0)return f?Ge(f,j):j;const _=f.state;if(!f.output||f.avail_in!==0&&!f.input||_.status===we&&q!==o)return Ge(f,f.avail_out===0?oe:j);const C=_.last_flush;if(_.last_flush=q,_.pending!==0){if(Se(f),f.avail_out===0)return _.last_flush=-1,b}else if(f.avail_in===0&&at(q)<=at(C)&&q!==o)return Ge(f,oe);if(_.status===we&&f.avail_in!==0)return Ge(f,oe);if(_.status===Te&&_.wrap===0&&(_.status=Be),_.status===Te){let E=K+(_.w_bits-8<<4)<<8,V=-1;if(_.strategy>=x||_.level<2?V=0:_.level<6?V=1:_.level===6?V=2:V=3,E|=V<<6,_.strstart!==0&&(E|=Xe),E+=31-E%31,tt(_,E),_.strstart!==0&&(tt(_,f.adler>>>16),tt(_,f.adler&65535)),f.adler=1,_.status=Be,Se(f),_.pending!==0)return _.last_flush=-1,b}if(_.status===ve){if(f.adler=0,ye(_,31),ye(_,139),ye(_,8),_.gzhead)ye(_,(_.gzhead.text?1:0)+(_.gzhead.hcrc?2:0)+(_.gzhead.extra?4:0)+(_.gzhead.name?8:0)+(_.gzhead.comment?16:0)),ye(_,_.gzhead.time&255),ye(_,_.gzhead.time>>8&255),ye(_,_.gzhead.time>>16&255),ye(_,_.gzhead.time>>24&255),ye(_,_.level===9?2:_.strategy>=x||_.level<2?4:0),ye(_,_.gzhead.os&255),_.gzhead.extra&&_.gzhead.extra.length&&(ye(_,_.gzhead.extra.length&255),ye(_,_.gzhead.extra.length>>8&255)),_.gzhead.hcrc&&(f.adler=n(f.adler,_.pending_buf,_.pending,0)),_.gzindex=0,_.status=Le;else if(ye(_,0),ye(_,0),ye(_,0),ye(_,0),ye(_,0),ye(_,_.level===9?2:_.strategy>=x||_.level<2?4:0),ye(_,dt),_.status=Be,Se(f),_.pending!==0)return _.last_flush=-1,b}if(_.status===Le){if(_.gzhead.extra){let E=_.pending,V=(_.gzhead.extra.length&65535)-_.gzindex;for(;_.pending+V>_.pending_buf_size;){let J=_.pending_buf_size-_.pending;if(_.pending_buf.set(_.gzhead.extra.subarray(_.gzindex,_.gzindex+J),_.pending),_.pending=_.pending_buf_size,_.gzhead.hcrc&&_.pending>E&&(f.adler=n(f.adler,_.pending_buf,_.pending-E,E)),_.gzindex+=J,Se(f),_.pending!==0)return _.last_flush=-1,b;E=0,V-=J}let ee=new Uint8Array(_.gzhead.extra);_.pending_buf.set(ee.subarray(_.gzindex,_.gzindex+V),_.pending),_.pending+=V,_.gzhead.hcrc&&_.pending>E&&(f.adler=n(f.adler,_.pending_buf,_.pending-E,E)),_.gzindex=0}_.status=rt}if(_.status===rt){if(_.gzhead.name){let E=_.pending,V;do{if(_.pending===_.pending_buf_size){if(_.gzhead.hcrc&&_.pending>E&&(f.adler=n(f.adler,_.pending_buf,_.pending-E,E)),Se(f),_.pending!==0)return _.last_flush=-1,b;E=0}_.gzindex<_.gzhead.name.length?V=_.gzhead.name.charCodeAt(_.gzindex++)&255:V=0,ye(_,V)}while(V!==0);_.gzhead.hcrc&&_.pending>E&&(f.adler=n(f.adler,_.pending_buf,_.pending-E,E)),_.gzindex=0}_.status=st}if(_.status===st){if(_.gzhead.comment){let E=_.pending,V;do{if(_.pending===_.pending_buf_size){if(_.gzhead.hcrc&&_.pending>E&&(f.adler=n(f.adler,_.pending_buf,_.pending-E,E)),Se(f),_.pending!==0)return _.last_flush=-1,b;E=0}_.gzindex<_.gzhead.comment.length?V=_.gzhead.comment.charCodeAt(_.gzindex++)&255:V=0,ye(_,V)}while(V!==0);_.gzhead.hcrc&&_.pending>E&&(f.adler=n(f.adler,_.pending_buf,_.pending-E,E))}_.status=ot}if(_.status===ot){if(_.gzhead.hcrc){if(_.pending+2>_.pending_buf_size&&(Se(f),_.pending!==0))return _.last_flush=-1,b;ye(_,f.adler&255),ye(_,f.adler>>8&255),f.adler=0}if(_.status=Be,Se(f),_.pending!==0)return _.last_flush=-1,b}if(f.avail_in!==0||_.lookahead!==0||q!==r&&_.status!==we){let E=_.level===0?Q(_,q):_.strategy===x?te(_,q):_.strategy===U?X(_,q):D[_.level].func(_,q);if((E===He||E===Ke)&&(_.status=we),E===Ee||E===He)return f.avail_out===0&&(_.last_flush=-1),b;if(E===Me&&(q===u?i(_):q!==y&&(s(_,0,0,!1),q===l&&(Ye(_.head),_.lookahead===0&&(_.strstart=0,_.block_start=0,_.insert=0))),Se(f),f.avail_out===0))return _.last_flush=-1,b}return q!==o?b:_.wrap<=0?A:(_.wrap===2?(ye(_,f.adler&255),ye(_,f.adler>>8&255),ye(_,f.adler>>16&255),ye(_,f.adler>>24&255),ye(_,f.total_in&255),ye(_,f.total_in>>8&255),ye(_,f.total_in>>16&255),ye(_,f.total_in>>24&255)):(tt(_,f.adler>>>16),tt(_,f.adler&65535)),Se(f),_.wrap>0&&(_.wrap=-_.wrap),_.pending!==0?b:A)},ht=f=>{if(he(f))return j;const q=f.state.status;return f.state=null,q===Be?Ge(f,F):b},me=(f,q)=>{let _=q.length;if(he(f))return j;const C=f.state,E=C.wrap;if(E===2||E===1&&C.status!==Te||C.lookahead)return j;if(E===1&&(f.adler=e(f.adler,q,_,0)),C.wrap=0,_>=C.w_size){E===0&&(Ye(C.head),C.strstart=0,C.block_start=0,C.insert=0);let $e=new Uint8Array(C.w_size);$e.set(q.subarray(_-C.w_size,_),0),q=$e,_=C.w_size}const V=f.avail_in,ee=f.next_in,J=f.input;for(f.avail_in=_,f.next_in=0,f.input=q,m(C);C.lookahead>=se;){let $e=C.strstart,be=C.lookahead-(se-1);do C.ins_h=Ne(C,C.ins_h,C.window[$e+se-1]),C.prev[$e&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=$e,$e++;while(--be);C.strstart=$e,C.lookahead=se-1,m(C)}return C.strstart+=C.lookahead,C.block_start=C.strstart,C.insert=C.lookahead,C.lookahead=0,C.match_length=C.prev_length=se-1,C.match_available=0,f.next_in=ee,f.input=J,f.avail_in=V,C.wrap=E,b};return deflate.deflateInit=T,deflate.deflateInit2=Oe,deflate.deflateReset=ge,deflate.deflateResetKeep=N,deflate.deflateSetHeader=Z,deflate.deflate=W,deflate.deflateEnd=ht,deflate.deflateSetDictionary=me,deflate.deflateInfo="pako deflate (from Nodeca project)",deflate}var common={},hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;const h=(s,a)=>Object.prototype.hasOwnProperty.call(s,a);return common.assign=function(s){const a=Array.prototype.slice.call(arguments,1);for(;a.length;){const t=a.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const i in t)h(t,i)&&(s[i]=t[i])}}return s},common.flattenChunks=s=>{let a=0;for(let i=0,e=s.length;i<e;i++)a+=s[i].length;const t=new Uint8Array(a);for(let i=0,e=0,n=s.length;i<n;i++){let c=s[i];t.set(c,e),e+=c.length}return t},common}var strings={},hasRequiredStrings;function requireStrings(){if(hasRequiredStrings)return strings;hasRequiredStrings=1;let h=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{h=!1}const s=new Uint8Array(256);for(let t=0;t<256;t++)s[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;s[254]=s[254]=1,strings.string2buf=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let i,e,n,c,r,u=t.length,l=0;for(c=0;c<u;c++)e=t.charCodeAt(c),(e&64512)===55296&&c+1<u&&(n=t.charCodeAt(c+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),c++)),l+=e<128?1:e<2048?2:e<65536?3:4;for(i=new Uint8Array(l),r=0,c=0;r<l;c++)e=t.charCodeAt(c),(e&64512)===55296&&c+1<u&&(n=t.charCodeAt(c+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),c++)),e<128?i[r++]=e:e<2048?(i[r++]=192|e>>>6,i[r++]=128|e&63):e<65536?(i[r++]=224|e>>>12,i[r++]=128|e>>>6&63,i[r++]=128|e&63):(i[r++]=240|e>>>18,i[r++]=128|e>>>12&63,i[r++]=128|e>>>6&63,i[r++]=128|e&63);return i};const a=(t,i)=>{if(i<65534&&t.subarray&&h)return String.fromCharCode.apply(null,t.length===i?t:t.subarray(0,i));let e="";for(let n=0;n<i;n++)e+=String.fromCharCode(t[n]);return e};return strings.buf2string=(t,i)=>{const e=i||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,i));let n,c;const r=new Array(e*2);for(c=0,n=0;n<e;){let u=t[n++];if(u<128){r[c++]=u;continue}let l=s[u];if(l>4){r[c++]=65533,n+=l-1;continue}for(u&=l===2?31:l===3?15:7;l>1&&n<e;)u=u<<6|t[n++]&63,l--;if(l>1){r[c++]=65533;continue}u<65536?r[c++]=u:(u-=65536,r[c++]=55296|u>>10&1023,r[c++]=56320|u&1023)}return a(r,c)},strings.utf8border=(t,i)=>{i=i||t.length,i>t.length&&(i=t.length);let e=i-1;for(;e>=0&&(t[e]&192)===128;)e--;return e<0||e===0?i:e+s[t[e]]>i?e:i},strings}var zstream,hasRequiredZstream;function requireZstream(){if(hasRequiredZstream)return zstream;hasRequiredZstream=1;function h(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return zstream=h,zstream}var hasRequiredDeflate;function requireDeflate(){if(hasRequiredDeflate)return deflate$1;hasRequiredDeflate=1;const h=requireDeflate$1(),s=requireCommon(),a=requireStrings(),t=requireMessages(),i=requireZstream(),e=Object.prototype.toString,{Z_NO_FLUSH:n,Z_SYNC_FLUSH:c,Z_FULL_FLUSH:r,Z_FINISH:u,Z_OK:l,Z_STREAM_END:o,Z_DEFAULT_COMPRESSION:y,Z_DEFAULT_STRATEGY:b,Z_DEFLATED:A}=requireConstants();function j(k){this.options=s.assign({level:y,method:A,chunkSize:16384,windowBits:15,memLevel:8,strategy:b},k||{});let x=this.options;x.raw&&x.windowBits>0?x.windowBits=-x.windowBits:x.gzip&&x.windowBits>0&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;let U=h.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(U!==l)throw new Error(t[U]);if(x.header&&h.deflateSetHeader(this.strm,x.header),x.dictionary){let $;if(typeof x.dictionary=="string"?$=a.string2buf(x.dictionary):e.call(x.dictionary)==="[object ArrayBuffer]"?$=new Uint8Array(x.dictionary):$=x.dictionary,U=h.deflateSetDictionary(this.strm,$),U!==l)throw new Error(t[U]);this._dict_set=!0}}j.prototype.push=function(k,x){const U=this.strm,$=this.options.chunkSize;let H,ae;if(this.ended)return!1;for(x===~~x?ae=x:ae=x===!0?u:n,typeof k=="string"?U.input=a.string2buf(k):e.call(k)==="[object ArrayBuffer]"?U.input=new Uint8Array(k):U.input=k,U.next_in=0,U.avail_in=U.input.length;;){if(U.avail_out===0&&(U.output=new Uint8Array($),U.next_out=0,U.avail_out=$),(ae===c||ae===r)&&U.avail_out<=6){this.onData(U.output.subarray(0,U.next_out)),U.avail_out=0;continue}if(H=h.deflate(U,ae),H===o)return U.next_out>0&&this.onData(U.output.subarray(0,U.next_out)),H=h.deflateEnd(this.strm),this.onEnd(H),this.ended=!0,H===l;if(U.avail_out===0){this.onData(U.output);continue}if(ae>0&&U.next_out>0){this.onData(U.output.subarray(0,U.next_out)),U.avail_out=0;continue}if(U.avail_in===0)break}return!0},j.prototype.onData=function(k){this.chunks.push(k)},j.prototype.onEnd=function(k){k===l&&(this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=k,this.msg=this.strm.msg};function F(k,x){const U=new j(x);if(U.push(k,!0),U.err)throw U.msg||t[U.err];return U.result}function oe(k,x){return x=x||{},x.raw=!0,F(k,x)}function re(k,x){return x=x||{},x.gzip=!0,F(k,x)}return deflate$1.Deflate=j,deflate$1.deflate=F,deflate$1.deflateRaw=oe,deflate$1.gzip=re,deflate$1.constants=requireConstants(),deflate$1}var inflate$1={},inflate={},inffast,hasRequiredInffast;function requireInffast(){if(hasRequiredInffast)return inffast;hasRequiredInffast=1;const h=16209,s=16191;return inffast=function(t,i){let e,n,c,r,u,l,o,y,b,A,j,F,oe,re,k,x,U,$,H,ae,K,pe,_e,Y;const ie=t.state;e=t.next_in,_e=t.input,n=e+(t.avail_in-5),c=t.next_out,Y=t.output,r=c-(i-t.avail_out),u=c+(t.avail_out-257),l=ie.dmax,o=ie.wsize,y=ie.whave,b=ie.wnext,A=ie.window,j=ie.hold,F=ie.bits,oe=ie.lencode,re=ie.distcode,k=(1<<ie.lenbits)-1,x=(1<<ie.distbits)-1;e:do{F<15&&(j+=_e[e++]<<F,F+=8,j+=_e[e++]<<F,F+=8),U=oe[j&k];t:for(;;){if($=U>>>24,j>>>=$,F-=$,$=U>>>16&255,$===0)Y[c++]=U&65535;else if($&16){H=U&65535,$&=15,$&&(F<$&&(j+=_e[e++]<<F,F+=8),H+=j&(1<<$)-1,j>>>=$,F-=$),F<15&&(j+=_e[e++]<<F,F+=8,j+=_e[e++]<<F,F+=8),U=re[j&x];r:for(;;){if($=U>>>24,j>>>=$,F-=$,$=U>>>16&255,$&16){if(ae=U&65535,$&=15,F<$&&(j+=_e[e++]<<F,F+=8,F<$&&(j+=_e[e++]<<F,F+=8)),ae+=j&(1<<$)-1,ae>l){t.msg="invalid distance too far back",ie.mode=h;break e}if(j>>>=$,F-=$,$=c-r,ae>$){if($=ae-$,$>y&&ie.sane){t.msg="invalid distance too far back",ie.mode=h;break e}if(K=0,pe=A,b===0){if(K+=o-$,$<H){H-=$;do Y[c++]=A[K++];while(--$);K=c-ae,pe=Y}}else if(b<$){if(K+=o+b-$,$-=b,$<H){H-=$;do Y[c++]=A[K++];while(--$);if(K=0,b<H){$=b,H-=$;do Y[c++]=A[K++];while(--$);K=c-ae,pe=Y}}}else if(K+=b-$,$<H){H-=$;do Y[c++]=A[K++];while(--$);K=c-ae,pe=Y}for(;H>2;)Y[c++]=pe[K++],Y[c++]=pe[K++],Y[c++]=pe[K++],H-=3;H&&(Y[c++]=pe[K++],H>1&&(Y[c++]=pe[K++]))}else{K=c-ae;do Y[c++]=Y[K++],Y[c++]=Y[K++],Y[c++]=Y[K++],H-=3;while(H>2);H&&(Y[c++]=Y[K++],H>1&&(Y[c++]=Y[K++]))}}else if(($&64)===0){U=re[(U&65535)+(j&(1<<$)-1)];continue r}else{t.msg="invalid distance code",ie.mode=h;break e}break}}else if(($&64)===0){U=oe[(U&65535)+(j&(1<<$)-1)];continue t}else if($&32){ie.mode=s;break e}else{t.msg="invalid literal/length code",ie.mode=h;break e}break}}while(e<n&&c<u);H=F>>3,e-=H,F-=H<<3,j&=(1<<F)-1,t.next_in=e,t.next_out=c,t.avail_in=e<n?5+(n-e):5-(e-n),t.avail_out=c<u?257+(u-c):257-(c-u),ie.hold=j,ie.bits=F},inffast}var inftrees,hasRequiredInftrees;function requireInftrees(){if(hasRequiredInftrees)return inftrees;hasRequiredInftrees=1;const h=15,s=852,a=592,t=0,i=1,e=2,n=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),c=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),r=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),u=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);return inftrees=(o,y,b,A,j,F,oe,re)=>{const k=re.bits;let x=0,U=0,$=0,H=0,ae=0,K=0,pe=0,_e=0,Y=0,ie=0,Ae,qe,Ie,Ve,Fe,Je=null,se;const Ce=new Uint16Array(h+1),xe=new Uint16Array(h+1);let Xe=null,Te,ve,Le;for(x=0;x<=h;x++)Ce[x]=0;for(U=0;U<A;U++)Ce[y[b+U]]++;for(ae=k,H=h;H>=1&&Ce[H]===0;H--);if(ae>H&&(ae=H),H===0)return j[F++]=1<<24|64<<16|0,j[F++]=1<<24|64<<16|0,re.bits=1,0;for($=1;$<H&&Ce[$]===0;$++);for(ae<$&&(ae=$),_e=1,x=1;x<=h;x++)if(_e<<=1,_e-=Ce[x],_e<0)return-1;if(_e>0&&(o===t||H!==1))return-1;for(xe[1]=0,x=1;x<h;x++)xe[x+1]=xe[x]+Ce[x];for(U=0;U<A;U++)y[b+U]!==0&&(oe[xe[y[b+U]]++]=U);if(o===t?(Je=Xe=oe,se=20):o===i?(Je=n,Xe=c,se=257):(Je=r,Xe=u,se=0),ie=0,U=0,x=$,Fe=F,K=ae,pe=0,Ie=-1,Y=1<<ae,Ve=Y-1,o===i&&Y>s||o===e&&Y>a)return 1;for(;;){Te=x-pe,oe[U]+1<se?(ve=0,Le=oe[U]):oe[U]>=se?(ve=Xe[oe[U]-se],Le=Je[oe[U]-se]):(ve=96,Le=0),Ae=1<<x-pe,qe=1<<K,$=qe;do qe-=Ae,j[Fe+(ie>>pe)+qe]=Te<<24|ve<<16|Le|0;while(qe!==0);for(Ae=1<<x-1;ie&Ae;)Ae>>=1;if(Ae!==0?(ie&=Ae-1,ie+=Ae):ie=0,U++,--Ce[x]===0){if(x===H)break;x=y[b+oe[U]]}if(x>ae&&(ie&Ve)!==Ie){for(pe===0&&(pe=ae),Fe+=$,K=x-pe,_e=1<<K;K+pe<H&&(_e-=Ce[K+pe],!(_e<=0));)K++,_e<<=1;if(Y+=1<<K,o===i&&Y>s||o===e&&Y>a)return 1;Ie=ie&Ve,j[Ie]=ae<<24|K<<16|Fe-F|0}}return ie!==0&&(j[Fe+ie]=x-pe<<24|64<<16|0),re.bits=ae,0},inftrees}var hasRequiredInflate$1;function requireInflate$1(){if(hasRequiredInflate$1)return inflate;hasRequiredInflate$1=1;const h=requireAdler32(),s=requireCrc32(),a=requireInffast(),t=requireInftrees(),i=0,e=1,n=2,{Z_FINISH:c,Z_BLOCK:r,Z_TREES:u,Z_OK:l,Z_STREAM_END:o,Z_NEED_DICT:y,Z_STREAM_ERROR:b,Z_DATA_ERROR:A,Z_MEM_ERROR:j,Z_BUF_ERROR:F,Z_DEFLATED:oe}=requireConstants(),re=16180,k=16181,x=16182,U=16183,$=16184,H=16185,ae=16186,K=16187,pe=16188,_e=16189,Y=16190,ie=16191,Ae=16192,qe=16193,Ie=16194,Ve=16195,Fe=16196,Je=16197,se=16198,Ce=16199,xe=16200,Xe=16201,Te=16202,ve=16203,Le=16204,rt=16205,st=16206,ot=16207,Be=16208,we=16209,Ee=16210,Me=16211,He=852,Ke=592,Ge=15,at=O=>(O>>>24&255)+(O>>>8&65280)+((O&65280)<<8)+((O&255)<<24);function Ye(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const S=O=>{if(!O)return 1;const D=O.state;return!D||D.strm!==O||D.mode<re||D.mode>Me?1:0},de=O=>{if(S(O))return b;const D=O.state;return O.total_in=O.total_out=D.total=0,O.msg="",D.wrap&&(O.adler=D.wrap&1),D.mode=re,D.last=0,D.havedict=0,D.flags=-1,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new Int32Array(He),D.distcode=D.distdyn=new Int32Array(Ke),D.sane=1,D.back=-1,l},Ne=O=>{if(S(O))return b;const D=O.state;return D.wsize=0,D.whave=0,D.wnext=0,de(O)},Se=(O,D)=>{let d;if(S(O))return b;const I=O.state;return D<0?(d=0,D=-D):(d=(D>>4)+5,D<48&&(D&=15)),D&&(D<8||D>15)?b:(I.window!==null&&I.wbits!==D&&(I.window=null),I.wrap=d,I.wbits=D,Ne(O))},De=(O,D)=>{if(!O)return b;const d=new Ye;O.state=d,d.strm=O,d.window=null,d.mode=re;const I=Se(O,D);return I!==l&&(O.state=null),I},ye=O=>De(O,Ge);let tt=!0,it,ut;const m=O=>{if(tt){it=new Int32Array(512),ut=new Int32Array(32);let D=0;for(;D<144;)O.lens[D++]=8;for(;D<256;)O.lens[D++]=9;for(;D<280;)O.lens[D++]=7;for(;D<288;)O.lens[D++]=8;for(t(e,O.lens,0,288,it,0,O.work,{bits:9}),D=0;D<32;)O.lens[D++]=5;t(n,O.lens,0,32,ut,0,O.work,{bits:5}),tt=!1}O.lencode=it,O.lenbits=9,O.distcode=ut,O.distbits=5},Q=(O,D,d,I)=>{let he;const N=O.state;return N.window===null&&(N.wsize=1<<N.wbits,N.wnext=0,N.whave=0,N.window=new Uint8Array(N.wsize)),I>=N.wsize?(N.window.set(D.subarray(d-N.wsize,d),0),N.wnext=0,N.whave=N.wsize):(he=N.wsize-N.wnext,he>I&&(he=I),N.window.set(D.subarray(d-I,d-I+he),N.wnext),I-=he,I?(N.window.set(D.subarray(d-I,d),0),N.wnext=I,N.whave=N.wsize):(N.wnext+=he,N.wnext===N.wsize&&(N.wnext=0),N.whave<N.wsize&&(N.whave+=he))),0},z=(O,D)=>{let d,I,he,N,ge,Z,Oe,T,W,ht,me,f,q,_,C=0,E,V,ee,J,$e,be,Re,je;const Pe=new Uint8Array(4);let et,Ue;const mt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(S(O)||!O.output||!O.input&&O.avail_in!==0)return b;d=O.state,d.mode===ie&&(d.mode=Ae),ge=O.next_out,he=O.output,Oe=O.avail_out,N=O.next_in,I=O.input,Z=O.avail_in,T=d.hold,W=d.bits,ht=Z,me=Oe,je=l;e:for(;;)switch(d.mode){case re:if(d.wrap===0){d.mode=Ae;break}for(;W<16;){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}if(d.wrap&2&&T===35615){d.wbits===0&&(d.wbits=15),d.check=0,Pe[0]=T&255,Pe[1]=T>>>8&255,d.check=s(d.check,Pe,2,0),T=0,W=0,d.mode=k;break}if(d.head&&(d.head.done=!1),!(d.wrap&1)||(((T&255)<<8)+(T>>8))%31){O.msg="incorrect header check",d.mode=we;break}if((T&15)!==oe){O.msg="unknown compression method",d.mode=we;break}if(T>>>=4,W-=4,Re=(T&15)+8,d.wbits===0&&(d.wbits=Re),Re>15||Re>d.wbits){O.msg="invalid window size",d.mode=we;break}d.dmax=1<<d.wbits,d.flags=0,O.adler=d.check=1,d.mode=T&512?_e:ie,T=0,W=0;break;case k:for(;W<16;){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}if(d.flags=T,(d.flags&255)!==oe){O.msg="unknown compression method",d.mode=we;break}if(d.flags&57344){O.msg="unknown header flags set",d.mode=we;break}d.head&&(d.head.text=T>>8&1),d.flags&512&&d.wrap&4&&(Pe[0]=T&255,Pe[1]=T>>>8&255,d.check=s(d.check,Pe,2,0)),T=0,W=0,d.mode=x;case x:for(;W<32;){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}d.head&&(d.head.time=T),d.flags&512&&d.wrap&4&&(Pe[0]=T&255,Pe[1]=T>>>8&255,Pe[2]=T>>>16&255,Pe[3]=T>>>24&255,d.check=s(d.check,Pe,4,0)),T=0,W=0,d.mode=U;case U:for(;W<16;){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}d.head&&(d.head.xflags=T&255,d.head.os=T>>8),d.flags&512&&d.wrap&4&&(Pe[0]=T&255,Pe[1]=T>>>8&255,d.check=s(d.check,Pe,2,0)),T=0,W=0,d.mode=$;case $:if(d.flags&1024){for(;W<16;){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}d.length=T,d.head&&(d.head.extra_len=T),d.flags&512&&d.wrap&4&&(Pe[0]=T&255,Pe[1]=T>>>8&255,d.check=s(d.check,Pe,2,0)),T=0,W=0}else d.head&&(d.head.extra=null);d.mode=H;case H:if(d.flags&1024&&(f=d.length,f>Z&&(f=Z),f&&(d.head&&(Re=d.head.extra_len-d.length,d.head.extra||(d.head.extra=new Uint8Array(d.head.extra_len)),d.head.extra.set(I.subarray(N,N+f),Re)),d.flags&512&&d.wrap&4&&(d.check=s(d.check,I,f,N)),Z-=f,N+=f,d.length-=f),d.length))break e;d.length=0,d.mode=ae;case ae:if(d.flags&2048){if(Z===0)break e;f=0;do Re=I[N+f++],d.head&&Re&&d.length<65536&&(d.head.name+=String.fromCharCode(Re));while(Re&&f<Z);if(d.flags&512&&d.wrap&4&&(d.check=s(d.check,I,f,N)),Z-=f,N+=f,Re)break e}else d.head&&(d.head.name=null);d.length=0,d.mode=K;case K:if(d.flags&4096){if(Z===0)break e;f=0;do Re=I[N+f++],d.head&&Re&&d.length<65536&&(d.head.comment+=String.fromCharCode(Re));while(Re&&f<Z);if(d.flags&512&&d.wrap&4&&(d.check=s(d.check,I,f,N)),Z-=f,N+=f,Re)break e}else d.head&&(d.head.comment=null);d.mode=pe;case pe:if(d.flags&512){for(;W<16;){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}if(d.wrap&4&&T!==(d.check&65535)){O.msg="header crc mismatch",d.mode=we;break}T=0,W=0}d.head&&(d.head.hcrc=d.flags>>9&1,d.head.done=!0),O.adler=d.check=0,d.mode=ie;break;case _e:for(;W<32;){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}O.adler=d.check=at(T),T=0,W=0,d.mode=Y;case Y:if(d.havedict===0)return O.next_out=ge,O.avail_out=Oe,O.next_in=N,O.avail_in=Z,d.hold=T,d.bits=W,y;O.adler=d.check=1,d.mode=ie;case ie:if(D===r||D===u)break e;case Ae:if(d.last){T>>>=W&7,W-=W&7,d.mode=st;break}for(;W<3;){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}switch(d.last=T&1,T>>>=1,W-=1,T&3){case 0:d.mode=qe;break;case 1:if(m(d),d.mode=Ce,D===u){T>>>=2,W-=2;break e}break;case 2:d.mode=Fe;break;case 3:O.msg="invalid block type",d.mode=we}T>>>=2,W-=2;break;case qe:for(T>>>=W&7,W-=W&7;W<32;){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}if((T&65535)!==(T>>>16^65535)){O.msg="invalid stored block lengths",d.mode=we;break}if(d.length=T&65535,T=0,W=0,d.mode=Ie,D===u)break e;case Ie:d.mode=Ve;case Ve:if(f=d.length,f){if(f>Z&&(f=Z),f>Oe&&(f=Oe),f===0)break e;he.set(I.subarray(N,N+f),ge),Z-=f,N+=f,Oe-=f,ge+=f,d.length-=f;break}d.mode=ie;break;case Fe:for(;W<14;){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}if(d.nlen=(T&31)+257,T>>>=5,W-=5,d.ndist=(T&31)+1,T>>>=5,W-=5,d.ncode=(T&15)+4,T>>>=4,W-=4,d.nlen>286||d.ndist>30){O.msg="too many length or distance symbols",d.mode=we;break}d.have=0,d.mode=Je;case Je:for(;d.have<d.ncode;){for(;W<3;){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}d.lens[mt[d.have++]]=T&7,T>>>=3,W-=3}for(;d.have<19;)d.lens[mt[d.have++]]=0;if(d.lencode=d.lendyn,d.lenbits=7,et={bits:d.lenbits},je=t(i,d.lens,0,19,d.lencode,0,d.work,et),d.lenbits=et.bits,je){O.msg="invalid code lengths set",d.mode=we;break}d.have=0,d.mode=se;case se:for(;d.have<d.nlen+d.ndist;){for(;C=d.lencode[T&(1<<d.lenbits)-1],E=C>>>24,V=C>>>16&255,ee=C&65535,!(E<=W);){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}if(ee<16)T>>>=E,W-=E,d.lens[d.have++]=ee;else{if(ee===16){for(Ue=E+2;W<Ue;){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}if(T>>>=E,W-=E,d.have===0){O.msg="invalid bit length repeat",d.mode=we;break}Re=d.lens[d.have-1],f=3+(T&3),T>>>=2,W-=2}else if(ee===17){for(Ue=E+3;W<Ue;){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}T>>>=E,W-=E,Re=0,f=3+(T&7),T>>>=3,W-=3}else{for(Ue=E+7;W<Ue;){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}T>>>=E,W-=E,Re=0,f=11+(T&127),T>>>=7,W-=7}if(d.have+f>d.nlen+d.ndist){O.msg="invalid bit length repeat",d.mode=we;break}for(;f--;)d.lens[d.have++]=Re}}if(d.mode===we)break;if(d.lens[256]===0){O.msg="invalid code -- missing end-of-block",d.mode=we;break}if(d.lenbits=9,et={bits:d.lenbits},je=t(e,d.lens,0,d.nlen,d.lencode,0,d.work,et),d.lenbits=et.bits,je){O.msg="invalid literal/lengths set",d.mode=we;break}if(d.distbits=6,d.distcode=d.distdyn,et={bits:d.distbits},je=t(n,d.lens,d.nlen,d.ndist,d.distcode,0,d.work,et),d.distbits=et.bits,je){O.msg="invalid distances set",d.mode=we;break}if(d.mode=Ce,D===u)break e;case Ce:d.mode=xe;case xe:if(Z>=6&&Oe>=258){O.next_out=ge,O.avail_out=Oe,O.next_in=N,O.avail_in=Z,d.hold=T,d.bits=W,a(O,me),ge=O.next_out,he=O.output,Oe=O.avail_out,N=O.next_in,I=O.input,Z=O.avail_in,T=d.hold,W=d.bits,d.mode===ie&&(d.back=-1);break}for(d.back=0;C=d.lencode[T&(1<<d.lenbits)-1],E=C>>>24,V=C>>>16&255,ee=C&65535,!(E<=W);){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}if(V&&(V&240)===0){for(J=E,$e=V,be=ee;C=d.lencode[be+((T&(1<<J+$e)-1)>>J)],E=C>>>24,V=C>>>16&255,ee=C&65535,!(J+E<=W);){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}T>>>=J,W-=J,d.back+=J}if(T>>>=E,W-=E,d.back+=E,d.length=ee,V===0){d.mode=rt;break}if(V&32){d.back=-1,d.mode=ie;break}if(V&64){O.msg="invalid literal/length code",d.mode=we;break}d.extra=V&15,d.mode=Xe;case Xe:if(d.extra){for(Ue=d.extra;W<Ue;){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}d.length+=T&(1<<d.extra)-1,T>>>=d.extra,W-=d.extra,d.back+=d.extra}d.was=d.length,d.mode=Te;case Te:for(;C=d.distcode[T&(1<<d.distbits)-1],E=C>>>24,V=C>>>16&255,ee=C&65535,!(E<=W);){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}if((V&240)===0){for(J=E,$e=V,be=ee;C=d.distcode[be+((T&(1<<J+$e)-1)>>J)],E=C>>>24,V=C>>>16&255,ee=C&65535,!(J+E<=W);){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}T>>>=J,W-=J,d.back+=J}if(T>>>=E,W-=E,d.back+=E,V&64){O.msg="invalid distance code",d.mode=we;break}d.offset=ee,d.extra=V&15,d.mode=ve;case ve:if(d.extra){for(Ue=d.extra;W<Ue;){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}d.offset+=T&(1<<d.extra)-1,T>>>=d.extra,W-=d.extra,d.back+=d.extra}if(d.offset>d.dmax){O.msg="invalid distance too far back",d.mode=we;break}d.mode=Le;case Le:if(Oe===0)break e;if(f=me-Oe,d.offset>f){if(f=d.offset-f,f>d.whave&&d.sane){O.msg="invalid distance too far back",d.mode=we;break}f>d.wnext?(f-=d.wnext,q=d.wsize-f):q=d.wnext-f,f>d.length&&(f=d.length),_=d.window}else _=he,q=ge-d.offset,f=d.length;f>Oe&&(f=Oe),Oe-=f,d.length-=f;do he[ge++]=_[q++];while(--f);d.length===0&&(d.mode=xe);break;case rt:if(Oe===0)break e;he[ge++]=d.length,Oe--,d.mode=xe;break;case st:if(d.wrap){for(;W<32;){if(Z===0)break e;Z--,T|=I[N++]<<W,W+=8}if(me-=Oe,O.total_out+=me,d.total+=me,d.wrap&4&&me&&(O.adler=d.check=d.flags?s(d.check,he,me,ge-me):h(d.check,he,me,ge-me)),me=Oe,d.wrap&4&&(d.flags?T:at(T))!==d.check){O.msg="incorrect data check",d.mode=we;break}T=0,W=0}d.mode=ot;case ot:if(d.wrap&&d.flags){for(;W<32;){if(Z===0)break e;Z--,T+=I[N++]<<W,W+=8}if(d.wrap&4&&T!==(d.total&4294967295)){O.msg="incorrect length check",d.mode=we;break}T=0,W=0}d.mode=Be;case Be:je=o;break e;case we:je=A;break e;case Ee:return j;case Me:default:return b}return O.next_out=ge,O.avail_out=Oe,O.next_in=N,O.avail_in=Z,d.hold=T,d.bits=W,(d.wsize||me!==O.avail_out&&d.mode<we&&(d.mode<st||D!==c))&&Q(O,O.output,O.next_out,me-O.avail_out),ht-=O.avail_in,me-=O.avail_out,O.total_in+=ht,O.total_out+=me,d.total+=me,d.wrap&4&&me&&(O.adler=d.check=d.flags?s(d.check,he,me,O.next_out-me):h(d.check,he,me,O.next_out-me)),O.data_type=d.bits+(d.last?64:0)+(d.mode===ie?128:0)+(d.mode===Ce||d.mode===Ie?256:0),(ht===0&&me===0||D===c)&&je===l&&(je=F),je},G=O=>{if(S(O))return b;let D=O.state;return D.window&&(D.window=null),O.state=null,l},X=(O,D)=>{if(S(O))return b;const d=O.state;return(d.wrap&2)===0?b:(d.head=D,D.done=!1,l)},te=(O,D)=>{const d=D.length;let I,he,N;return S(O)||(I=O.state,I.wrap!==0&&I.mode!==Y)?b:I.mode===Y&&(he=1,he=h(he,D,d,0),he!==I.check)?A:(N=Q(O,D,d,d),N?(I.mode=Ee,j):(I.havedict=1,l))};return inflate.inflateReset=Ne,inflate.inflateReset2=Se,inflate.inflateResetKeep=de,inflate.inflateInit=ye,inflate.inflateInit2=De,inflate.inflate=z,inflate.inflateEnd=G,inflate.inflateGetHeader=X,inflate.inflateSetDictionary=te,inflate.inflateInfo="pako inflate (from Nodeca project)",inflate}var gzheader,hasRequiredGzheader;function requireGzheader(){if(hasRequiredGzheader)return gzheader;hasRequiredGzheader=1;function h(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return gzheader=h,gzheader}var hasRequiredInflate;function requireInflate(){if(hasRequiredInflate)return inflate$1;hasRequiredInflate=1;const h=requireInflate$1(),s=requireCommon(),a=requireStrings(),t=requireMessages(),i=requireZstream(),e=requireGzheader(),n=Object.prototype.toString,{Z_NO_FLUSH:c,Z_FINISH:r,Z_OK:u,Z_STREAM_END:l,Z_NEED_DICT:o,Z_STREAM_ERROR:y,Z_DATA_ERROR:b,Z_MEM_ERROR:A}=requireConstants();function j(re){this.options=s.assign({chunkSize:1024*64,windowBits:15,to:""},re||{});const k=this.options;k.raw&&k.windowBits>=0&&k.windowBits<16&&(k.windowBits=-k.windowBits,k.windowBits===0&&(k.windowBits=-15)),k.windowBits>=0&&k.windowBits<16&&!(re&&re.windowBits)&&(k.windowBits+=32),k.windowBits>15&&k.windowBits<48&&(k.windowBits&15)===0&&(k.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;let x=h.inflateInit2(this.strm,k.windowBits);if(x!==u)throw new Error(t[x]);if(this.header=new e,h.inflateGetHeader(this.strm,this.header),k.dictionary&&(typeof k.dictionary=="string"?k.dictionary=a.string2buf(k.dictionary):n.call(k.dictionary)==="[object ArrayBuffer]"&&(k.dictionary=new Uint8Array(k.dictionary)),k.raw&&(x=h.inflateSetDictionary(this.strm,k.dictionary),x!==u)))throw new Error(t[x])}j.prototype.push=function(re,k){const x=this.strm,U=this.options.chunkSize,$=this.options.dictionary;let H,ae,K;if(this.ended)return!1;for(k===~~k?ae=k:ae=k===!0?r:c,n.call(re)==="[object ArrayBuffer]"?x.input=new Uint8Array(re):x.input=re,x.next_in=0,x.avail_in=x.input.length;;){for(x.avail_out===0&&(x.output=new Uint8Array(U),x.next_out=0,x.avail_out=U),H=h.inflate(x,ae),H===o&&$&&(H=h.inflateSetDictionary(x,$),H===u?H=h.inflate(x,ae):H===b&&(H=o));x.avail_in>0&&H===l&&x.state.wrap>0&&re[x.next_in]!==0;)h.inflateReset(x),H=h.inflate(x,ae);switch(H){case y:case b:case o:case A:return this.onEnd(H),this.ended=!0,!1}if(K=x.avail_out,x.next_out&&(x.avail_out===0||H===l))if(this.options.to==="string"){let pe=a.utf8border(x.output,x.next_out),_e=x.next_out-pe,Y=a.buf2string(x.output,pe);x.next_out=_e,x.avail_out=U-_e,_e&&x.output.set(x.output.subarray(pe,pe+_e),0),this.onData(Y)}else this.onData(x.output.length===x.next_out?x.output:x.output.subarray(0,x.next_out));if(!(H===u&&K===0)){if(H===l)return H=h.inflateEnd(this.strm),this.onEnd(H),this.ended=!0,!0;if(x.avail_in===0)break}}return!0},j.prototype.onData=function(re){this.chunks.push(re)},j.prototype.onEnd=function(re){re===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=re,this.msg=this.strm.msg};function F(re,k){const x=new j(k);if(x.push(re),x.err)throw x.msg||t[x.err];return x.result}function oe(re,k){return k=k||{},k.raw=!0,F(re,k)}return inflate$1.Inflate=j,inflate$1.inflate=F,inflate$1.inflateRaw=oe,inflate$1.ungzip=F,inflate$1.constants=requireConstants(),inflate$1}var hasRequiredPako;function requirePako(){if(hasRequiredPako)return pako;hasRequiredPako=1;const{Deflate:h,deflate:s,deflateRaw:a,gzip:t}=requireDeflate(),{Inflate:i,inflate:e,inflateRaw:n,ungzip:c}=requireInflate(),r=requireConstants();return pako.Deflate=h,pako.deflate=s,pako.deflateRaw=a,pako.gzip=t,pako.Inflate=i,pako.inflate=e,pako.inflateRaw=n,pako.ungzip=c,pako.constants=r,pako}var axios_1,hasRequiredAxios;function requireAxios(){if(hasRequiredAxios)return axios_1;hasRequiredAxios=1;function h(p,g){return function(){return p.apply(g,arguments)}}const{toString:s}=Object.prototype,{getPrototypeOf:a}=Object,t=(p=>g=>{const w=s.call(g);return p[w]||(p[w]=w.slice(8,-1).toLowerCase())})(Object.create(null)),i=p=>(p=p.toLowerCase(),g=>t(g)===p),e=p=>g=>typeof g===p,{isArray:n}=Array,c=e("undefined");function r(p){return p!==null&&!c(p)&&p.constructor!==null&&!c(p.constructor)&&y(p.constructor.isBuffer)&&p.constructor.isBuffer(p)}const u=i("ArrayBuffer");function l(p){let g;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?g=ArrayBuffer.isView(p):g=p&&p.buffer&&u(p.buffer),g}const o=e("string"),y=e("function"),b=e("number"),A=p=>p!==null&&typeof p=="object",j=p=>p===!0||p===!1,F=p=>{if(t(p)!=="object")return!1;const g=a(p);return(g===null||g===Object.prototype||Object.getPrototypeOf(g)===null)&&!(Symbol.toStringTag in p)&&!(Symbol.iterator in p)},oe=i("Date"),re=i("File"),k=i("Blob"),x=i("FileList"),U=p=>A(p)&&y(p.pipe),$=p=>{let g;return p&&(typeof FormData=="function"&&p instanceof FormData||y(p.append)&&((g=t(p))==="formdata"||g==="object"&&y(p.toString)&&p.toString()==="[object FormData]"))},H=i("URLSearchParams"),ae=p=>p.trim?p.trim():p.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function K(p,g,{allOwnKeys:w=!1}={}){if(p===null||typeof p>"u")return;let v,R;if(typeof p!="object"&&(p=[p]),n(p))for(v=0,R=p.length;v<R;v++)g.call(null,p[v],v,p);else{const L=w?Object.getOwnPropertyNames(p):Object.keys(p),P=L.length;let B;for(v=0;v<P;v++)B=L[v],g.call(null,p[B],B,p)}}function pe(p,g){g=g.toLowerCase();const w=Object.keys(p);let v=w.length,R;for(;v-- >0;)if(R=w[v],g===R.toLowerCase())return R;return null}const _e=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:commonjsGlobal,Y=p=>!c(p)&&p!==_e;function ie(){const{caseless:p}=Y(this)&&this||{},g={},w=(v,R)=>{const L=p&&pe(g,R)||R;F(g[L])&&F(v)?g[L]=ie(g[L],v):F(v)?g[L]=ie({},v):n(v)?g[L]=v.slice():g[L]=v};for(let v=0,R=arguments.length;v<R;v++)arguments[v]&&K(arguments[v],w);return g}const Ae=(p,g,w,{allOwnKeys:v}={})=>(K(g,(R,L)=>{w&&y(R)?p[L]=h(R,w):p[L]=R},{allOwnKeys:v}),p),qe=p=>(p.charCodeAt(0)===65279&&(p=p.slice(1)),p),Ie=(p,g,w,v)=>{p.prototype=Object.create(g.prototype,v),p.prototype.constructor=p,Object.defineProperty(p,"super",{value:g.prototype}),w&&Object.assign(p.prototype,w)},Ve=(p,g,w,v)=>{let R,L,P;const B={};if(g=g||{},p==null)return g;do{for(R=Object.getOwnPropertyNames(p),L=R.length;L-- >0;)P=R[L],(!v||v(P,p,g))&&!B[P]&&(g[P]=p[P],B[P]=!0);p=w!==!1&&a(p)}while(p&&(!w||w(p,g))&&p!==Object.prototype);return g},Fe=(p,g,w)=>{p=String(p),(w===void 0||w>p.length)&&(w=p.length),w-=g.length;const v=p.indexOf(g,w);return v!==-1&&v===w},Je=p=>{if(!p)return null;if(n(p))return p;let g=p.length;if(!b(g))return null;const w=new Array(g);for(;g-- >0;)w[g]=p[g];return w},se=(p=>g=>p&&g instanceof p)(typeof Uint8Array<"u"&&a(Uint8Array)),Ce=(p,g)=>{const v=(p&&p[Symbol.iterator]).call(p);let R;for(;(R=v.next())&&!R.done;){const L=R.value;g.call(p,L[0],L[1])}},xe=(p,g)=>{let w;const v=[];for(;(w=p.exec(g))!==null;)v.push(w);return v},Xe=i("HTMLFormElement"),Te=p=>p.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(w,v,R){return v.toUpperCase()+R}),ve=(({hasOwnProperty:p})=>(g,w)=>p.call(g,w))(Object.prototype),Le=i("RegExp"),rt=(p,g)=>{const w=Object.getOwnPropertyDescriptors(p),v={};K(w,(R,L)=>{let P;(P=g(R,L,p))!==!1&&(v[L]=P||R)}),Object.defineProperties(p,v)},st=p=>{rt(p,(g,w)=>{if(y(p)&&["arguments","caller","callee"].indexOf(w)!==-1)return!1;const v=p[w];if(y(v)){if(g.enumerable=!1,"writable"in g){g.writable=!1;return}g.set||(g.set=()=>{throw Error("Can not rewrite read-only method '"+w+"'")})}})},ot=(p,g)=>{const w={},v=R=>{R.forEach(L=>{w[L]=!0})};return n(p)?v(p):v(String(p).split(g)),w},Be=()=>{},we=(p,g)=>(p=+p,Number.isFinite(p)?p:g),Ee="abcdefghijklmnopqrstuvwxyz",Me="0123456789",He={DIGIT:Me,ALPHA:Ee,ALPHA_DIGIT:Ee+Ee.toUpperCase()+Me},Ke=(p=16,g=He.ALPHA_DIGIT)=>{let w="";const{length:v}=g;for(;p--;)w+=g[Math.random()*v|0];return w};function dt(p){return!!(p&&y(p.append)&&p[Symbol.toStringTag]==="FormData"&&p[Symbol.iterator])}const Ge=p=>{const g=new Array(10),w=(v,R)=>{if(A(v)){if(g.indexOf(v)>=0)return;if(!("toJSON"in v)){g[R]=v;const L=n(v)?[]:{};return K(v,(P,B)=>{const ce=w(P,R+1);!c(ce)&&(L[B]=ce)}),g[R]=void 0,L}}return v};return w(p,0)},at=i("AsyncFunction");var S={isArray:n,isArrayBuffer:u,isBuffer:r,isFormData:$,isArrayBufferView:l,isString:o,isNumber:b,isBoolean:j,isObject:A,isPlainObject:F,isUndefined:c,isDate:oe,isFile:re,isBlob:k,isRegExp:Le,isFunction:y,isStream:U,isURLSearchParams:H,isTypedArray:se,isFileList:x,forEach:K,merge:ie,extend:Ae,trim:ae,stripBOM:qe,inherits:Ie,toFlatObject:Ve,kindOf:t,kindOfTest:i,endsWith:Fe,toArray:Je,forEachEntry:Ce,matchAll:xe,isHTMLForm:Xe,hasOwnProperty:ve,hasOwnProp:ve,reduceDescriptors:rt,freezeMethods:st,toObjectSet:ot,toCamelCase:Te,noop:Be,toFiniteNumber:we,findKey:pe,global:_e,isContextDefined:Y,ALPHABET:He,generateString:Ke,isSpecCompliantForm:dt,toJSONObject:Ge,isAsyncFn:at,isThenable:p=>p&&(A(p)||y(p))&&y(p.then)&&y(p.catch)};function de(p,g,w,v,R){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=p,this.name="AxiosError",g&&(this.code=g),w&&(this.config=w),v&&(this.request=v),R&&(this.response=R)}S.inherits(de,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:S.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ne=de.prototype,Se={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(p=>{Se[p]={value:p}}),Object.defineProperties(de,Se),Object.defineProperty(Ne,"isAxiosError",{value:!0}),de.from=(p,g,w,v,R,L)=>{const P=Object.create(Ne);return S.toFlatObject(p,P,function(ce){return ce!==Error.prototype},B=>B!=="isAxiosError"),de.call(P,p.message,g,w,v,R),P.cause=p,P.name=p.name,L&&Object.assign(P,L),P};var De=null;function ye(p){return S.isPlainObject(p)||S.isArray(p)}function tt(p){return S.endsWith(p,"[]")?p.slice(0,-2):p}function it(p,g,w){return p?p.concat(g).map(function(R,L){return R=tt(R),!w&&L?"["+R+"]":R}).join(w?".":""):g}function ut(p){return S.isArray(p)&&!p.some(ye)}const m=S.toFlatObject(S,{},null,function(g){return/^is[A-Z]/.test(g)});function Q(p,g,w){if(!S.isObject(p))throw new TypeError("target must be an object");g=g||new FormData,w=S.toFlatObject(w,{metaTokens:!0,dots:!1,indexes:!1},!1,function(fe,ze){return!S.isUndefined(ze[fe])});const v=w.metaTokens,R=w.visitor||ne,L=w.dots,P=w.indexes,ce=(w.Blob||typeof Blob<"u"&&Blob)&&S.isSpecCompliantForm(g);if(!S.isFunction(R))throw new TypeError("visitor must be a function");function le(ue){if(ue===null)return"";if(S.isDate(ue))return ue.toISOString();if(!ce&&S.isBlob(ue))throw new de("Blob is not supported. Use a Buffer instead.");return S.isArrayBuffer(ue)||S.isTypedArray(ue)?ce&&typeof Blob=="function"?new Blob([ue]):Buffer.from(ue):ue}function ne(ue,fe,ze){let Ze=ue;if(ue&&!ze&&typeof ue=="object"){if(S.endsWith(fe,"{}"))fe=v?fe:fe.slice(0,-2),ue=JSON.stringify(ue);else if(S.isArray(ue)&&ut(ue)||(S.isFileList(ue)||S.endsWith(fe,"[]"))&&(Ze=S.toArray(ue)))return fe=tt(fe),Ze.forEach(function(pt,Yt){!(S.isUndefined(pt)||pt===null)&&g.append(P===!0?it([fe],Yt,L):P===null?fe:fe+"[]",le(pt))}),!1}return ye(ue)?!0:(g.append(it(ze,fe,L),le(ue)),!1)}const M=[],Qe=Object.assign(m,{defaultVisitor:ne,convertValue:le,isVisitable:ye});function nt(ue,fe){if(!S.isUndefined(ue)){if(M.indexOf(ue)!==-1)throw Error("Circular reference detected in "+fe.join("."));M.push(ue),S.forEach(ue,function(Ze,lt){(!(S.isUndefined(Ze)||Ze===null)&&R.call(g,Ze,S.isString(lt)?lt.trim():lt,fe,Qe))===!0&&nt(Ze,fe?fe.concat(lt):[lt])}),M.pop()}}if(!S.isObject(p))throw new TypeError("data must be an object");return nt(p),g}function z(p){const g={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(p).replace(/[!'()~]|%20|%00/g,function(v){return g[v]})}function G(p,g){this._pairs=[],p&&Q(p,this,g)}const X=G.prototype;X.append=function(g,w){this._pairs.push([g,w])},X.toString=function(g){const w=g?function(v){return g.call(this,v,z)}:z;return this._pairs.map(function(R){return w(R[0])+"="+w(R[1])},"").join("&")};function te(p){return encodeURIComponent(p).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function O(p,g,w){if(!g)return p;const v=w&&w.encode||te,R=w&&w.serialize;let L;if(R?L=R(g,w):L=S.isURLSearchParams(g)?g.toString():new G(g,w).toString(v),L){const P=p.indexOf("#");P!==-1&&(p=p.slice(0,P)),p+=(p.indexOf("?")===-1?"?":"&")+L}return p}class D{constructor(){this.handlers=[]}use(g,w,v){return this.handlers.push({fulfilled:g,rejected:w,synchronous:v?v.synchronous:!1,runWhen:v?v.runWhen:null}),this.handlers.length-1}eject(g){this.handlers[g]&&(this.handlers[g]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(g){S.forEach(this.handlers,function(v){v!==null&&g(v)})}}var d=D,I={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},he=typeof URLSearchParams<"u"?URLSearchParams:G,N=typeof FormData<"u"?FormData:null,ge=typeof Blob<"u"?Blob:null,Z={isBrowser:!0,classes:{URLSearchParams:he,FormData:N,Blob:ge},protocols:["http","https","file","blob","url","data"]};const Oe=typeof window<"u"&&typeof document<"u",T=(p=>Oe&&["ReactNative","NativeScript","NS"].indexOf(p)<0)(typeof navigator<"u"&&navigator.product),W=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function";var ht=Object.freeze({__proto__:null,hasBrowserEnv:Oe,hasStandardBrowserWebWorkerEnv:W,hasStandardBrowserEnv:T}),me={...ht,...Z};function f(p,g){return Q(p,new me.classes.URLSearchParams,Object.assign({visitor:function(w,v,R,L){return me.isNode&&S.isBuffer(w)?(this.append(v,w.toString("base64")),!1):L.defaultVisitor.apply(this,arguments)}},g))}function q(p){return S.matchAll(/\w+|\[(\w*)]/g,p).map(g=>g[0]==="[]"?"":g[1]||g[0])}function _(p){const g={},w=Object.keys(p);let v;const R=w.length;let L;for(v=0;v<R;v++)L=w[v],g[L]=p[L];return g}function C(p){function g(w,v,R,L){let P=w[L++];if(P==="__proto__")return!0;const B=Number.isFinite(+P),ce=L>=w.length;return P=!P&&S.isArray(R)?R.length:P,ce?(S.hasOwnProp(R,P)?R[P]=[R[P],v]:R[P]=v,!B):((!R[P]||!S.isObject(R[P]))&&(R[P]=[]),g(w,v,R[P],L)&&S.isArray(R[P])&&(R[P]=_(R[P])),!B)}if(S.isFormData(p)&&S.isFunction(p.entries)){const w={};return S.forEachEntry(p,(v,R)=>{g(q(v),R,w,0)}),w}return null}function E(p,g,w){if(S.isString(p))try{return(g||JSON.parse)(p),S.trim(p)}catch(v){if(v.name!=="SyntaxError")throw v}return(w||JSON.stringify)(p)}const V={transitional:I,adapter:["xhr","http"],transformRequest:[function(g,w){const v=w.getContentType()||"",R=v.indexOf("application/json")>-1,L=S.isObject(g);if(L&&S.isHTMLForm(g)&&(g=new FormData(g)),S.isFormData(g))return R?JSON.stringify(C(g)):g;if(S.isArrayBuffer(g)||S.isBuffer(g)||S.isStream(g)||S.isFile(g)||S.isBlob(g))return g;if(S.isArrayBufferView(g))return g.buffer;if(S.isURLSearchParams(g))return w.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),g.toString();let B;if(L){if(v.indexOf("application/x-www-form-urlencoded")>-1)return f(g,this.formSerializer).toString();if((B=S.isFileList(g))||v.indexOf("multipart/form-data")>-1){const ce=this.env&&this.env.FormData;return Q(B?{"files[]":g}:g,ce&&new ce,this.formSerializer)}}return L||R?(w.setContentType("application/json",!1),E(g)):g}],transformResponse:[function(g){const w=this.transitional||V.transitional,v=w&&w.forcedJSONParsing,R=this.responseType==="json";if(g&&S.isString(g)&&(v&&!this.responseType||R)){const P=!(w&&w.silentJSONParsing)&&R;try{return JSON.parse(g)}catch(B){if(P)throw B.name==="SyntaxError"?de.from(B,de.ERR_BAD_RESPONSE,this,null,this.response):B}}return g}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:me.classes.FormData,Blob:me.classes.Blob},validateStatus:function(g){return g>=200&&g<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};S.forEach(["delete","get","head","post","put","patch"],p=>{V.headers[p]={}});var ee=V;const J=S.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var $e=p=>{const g={};let w,v,R;return p&&p.split(`
`).forEach(function(P){R=P.indexOf(":"),w=P.substring(0,R).trim().toLowerCase(),v=P.substring(R+1).trim(),!(!w||g[w]&&J[w])&&(w==="set-cookie"?g[w]?g[w].push(v):g[w]=[v]:g[w]=g[w]?g[w]+", "+v:v)}),g};const be=Symbol("internals");function Re(p){return p&&String(p).trim().toLowerCase()}function je(p){return p===!1||p==null?p:S.isArray(p)?p.map(je):String(p)}function Pe(p){const g=Object.create(null),w=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let v;for(;v=w.exec(p);)g[v[1]]=v[2];return g}const et=p=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(p.trim());function Ue(p,g,w,v,R){if(S.isFunction(v))return v.call(this,g,w);if(R&&(g=w),!!S.isString(g)){if(S.isString(v))return g.indexOf(v)!==-1;if(S.isRegExp(v))return v.test(g)}}function mt(p){return p.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(g,w,v)=>w.toUpperCase()+v)}function $t(p,g){const w=S.toCamelCase(" "+g);["get","set","has"].forEach(v=>{Object.defineProperty(p,v+w,{value:function(R,L,P){return this[v].call(this,g,R,L,P)},configurable:!0})})}class bt{constructor(g){g&&this.set(g)}set(g,w,v){const R=this;function L(B,ce,le){const ne=Re(ce);if(!ne)throw new Error("header name must be a non-empty string");const M=S.findKey(R,ne);(!M||R[M]===void 0||le===!0||le===void 0&&R[M]!==!1)&&(R[M||ce]=je(B))}const P=(B,ce)=>S.forEach(B,(le,ne)=>L(le,ne,ce));return S.isPlainObject(g)||g instanceof this.constructor?P(g,w):S.isString(g)&&(g=g.trim())&&!et(g)?P($e(g),w):g!=null&&L(w,g,v),this}get(g,w){if(g=Re(g),g){const v=S.findKey(this,g);if(v){const R=this[v];if(!w)return R;if(w===!0)return Pe(R);if(S.isFunction(w))return w.call(this,R,v);if(S.isRegExp(w))return w.exec(R);throw new TypeError("parser must be boolean|regexp|function")}}}has(g,w){if(g=Re(g),g){const v=S.findKey(this,g);return!!(v&&this[v]!==void 0&&(!w||Ue(this,this[v],v,w)))}return!1}delete(g,w){const v=this;let R=!1;function L(P){if(P=Re(P),P){const B=S.findKey(v,P);B&&(!w||Ue(v,v[B],B,w))&&(delete v[B],R=!0)}}return S.isArray(g)?g.forEach(L):L(g),R}clear(g){const w=Object.keys(this);let v=w.length,R=!1;for(;v--;){const L=w[v];(!g||Ue(this,this[L],L,g,!0))&&(delete this[L],R=!0)}return R}normalize(g){const w=this,v={};return S.forEach(this,(R,L)=>{const P=S.findKey(v,L);if(P){w[P]=je(R),delete w[L];return}const B=g?mt(L):String(L).trim();B!==L&&delete w[L],w[B]=je(R),v[B]=!0}),this}concat(...g){return this.constructor.concat(this,...g)}toJSON(g){const w=Object.create(null);return S.forEach(this,(v,R)=>{v!=null&&v!==!1&&(w[R]=g&&S.isArray(v)?v.join(", "):v)}),w}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([g,w])=>g+": "+w).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(g){return g instanceof this?g:new this(g)}static concat(g,...w){const v=new this(g);return w.forEach(R=>v.set(R)),v}static accessor(g){const v=(this[be]=this[be]={accessors:{}}).accessors,R=this.prototype;function L(P){const B=Re(P);v[B]||($t(R,P),v[B]=!0)}return S.isArray(g)?g.forEach(L):L(g),this}}bt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),S.reduceDescriptors(bt.prototype,({value:p},g)=>{let w=g[0].toUpperCase()+g.slice(1);return{get:()=>p,set(v){this[w]=v}}}),S.freezeMethods(bt);var ft=bt;function vt(p,g){const w=this||ee,v=g||w,R=ft.from(v.headers);let L=v.data;return S.forEach(p,function(B){L=B.call(w,L,R.normalize(),g?g.status:void 0)}),R.normalize(),L}function Lt(p){return!!(p&&p.__CANCEL__)}function gt(p,g,w){de.call(this,p??"canceled",de.ERR_CANCELED,g,w),this.name="CanceledError"}S.inherits(gt,de,{__CANCEL__:!0});function Ut(p,g,w){const v=w.config.validateStatus;!w.status||!v||v(w.status)?p(w):g(new de("Request failed with status code "+w.status,[de.ERR_BAD_REQUEST,de.ERR_BAD_RESPONSE][Math.floor(w.status/100)-4],w.config,w.request,w))}var zt=me.hasStandardBrowserEnv?{write(p,g,w,v,R,L){const P=[p+"="+encodeURIComponent(g)];S.isNumber(w)&&P.push("expires="+new Date(w).toGMTString()),S.isString(v)&&P.push("path="+v),S.isString(R)&&P.push("domain="+R),L===!0&&P.push("secure"),document.cookie=P.join("; ")},read(p){const g=document.cookie.match(new RegExp("(^|;\\s*)("+p+")=([^;]*)"));return g?decodeURIComponent(g[3]):null},remove(p){this.write(p,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function It(p){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(p)}function Ft(p,g){return g?p.replace(/\/?\/$/,"")+"/"+g.replace(/^\/+/,""):p}function Pt(p,g){return p&&!It(g)?Ft(p,g):g}var Nt=me.hasStandardBrowserEnv?function(){const g=/(msie|trident)/i.test(navigator.userAgent),w=document.createElement("a");let v;function R(L){let P=L;return g&&(w.setAttribute("href",P),P=w.href),w.setAttribute("href",P),{href:w.href,protocol:w.protocol?w.protocol.replace(/:$/,""):"",host:w.host,search:w.search?w.search.replace(/^\?/,""):"",hash:w.hash?w.hash.replace(/^#/,""):"",hostname:w.hostname,port:w.port,pathname:w.pathname.charAt(0)==="/"?w.pathname:"/"+w.pathname}}return v=R(window.location.href),function(P){const B=S.isString(P)?R(P):P;return B.protocol===v.protocol&&B.host===v.host}}():function(){return function(){return!0}}();function Vt(p){const g=/^([-+\w]{1,25})(:?\/\/|:)/.exec(p);return g&&g[1]||""}function Bt(p,g){p=p||10;const w=new Array(p),v=new Array(p);let R=0,L=0,P;return g=g!==void 0?g:1e3,function(ce){const le=Date.now(),ne=v[L];P||(P=le),w[R]=ce,v[R]=le;let M=L,Qe=0;for(;M!==R;)Qe+=w[M++],M=M%p;if(R=(R+1)%p,R===L&&(L=(L+1)%p),le-P<g)return;const nt=ne&&le-ne;return nt?Math.round(Qe*1e3/nt):void 0}}function qt(p,g){let w=0;const v=Bt(50,250);return R=>{const L=R.loaded,P=R.lengthComputable?R.total:void 0,B=L-w,ce=v(B),le=L<=P;w=L;const ne={loaded:L,total:P,progress:P?L/P:void 0,bytes:B,rate:ce||void 0,estimated:ce&&P&&le?(P-L)/ce:void 0,event:R};ne[g?"download":"upload"]=!0,p(ne)}}var Mt=typeof XMLHttpRequest<"u"&&function(p){return new Promise(function(w,v){let R=p.data;const L=ft.from(p.headers).normalize();let{responseType:P,withXSRFToken:B}=p,ce;function le(){p.cancelToken&&p.cancelToken.unsubscribe(ce),p.signal&&p.signal.removeEventListener("abort",ce)}let ne;if(S.isFormData(R)){if(me.hasStandardBrowserEnv||me.hasStandardBrowserWebWorkerEnv)L.setContentType(!1);else if((ne=L.getContentType())!==!1){const[fe,...ze]=ne?ne.split(";").map(Ze=>Ze.trim()).filter(Boolean):[];L.setContentType([fe||"multipart/form-data",...ze].join("; "))}}let M=new XMLHttpRequest;if(p.auth){const fe=p.auth.username||"",ze=p.auth.password?unescape(encodeURIComponent(p.auth.password)):"";L.set("Authorization","Basic "+btoa(fe+":"+ze))}const Qe=Pt(p.baseURL,p.url);M.open(p.method.toUpperCase(),O(Qe,p.params,p.paramsSerializer),!0),M.timeout=p.timeout;function nt(){if(!M)return;const fe=ft.from("getAllResponseHeaders"in M&&M.getAllResponseHeaders()),Ze={data:!P||P==="text"||P==="json"?M.responseText:M.response,status:M.status,statusText:M.statusText,headers:fe,config:p,request:M};Ut(function(pt){w(pt),le()},function(pt){v(pt),le()},Ze),M=null}if("onloadend"in M?M.onloadend=nt:M.onreadystatechange=function(){!M||M.readyState!==4||M.status===0&&!(M.responseURL&&M.responseURL.indexOf("file:")===0)||setTimeout(nt)},M.onabort=function(){M&&(v(new de("Request aborted",de.ECONNABORTED,p,M)),M=null)},M.onerror=function(){v(new de("Network Error",de.ERR_NETWORK,p,M)),M=null},M.ontimeout=function(){let ze=p.timeout?"timeout of "+p.timeout+"ms exceeded":"timeout exceeded";const Ze=p.transitional||I;p.timeoutErrorMessage&&(ze=p.timeoutErrorMessage),v(new de(ze,Ze.clarifyTimeoutError?de.ETIMEDOUT:de.ECONNABORTED,p,M)),M=null},me.hasStandardBrowserEnv&&(B&&S.isFunction(B)&&(B=B(p)),B||B!==!1&&Nt(Qe))){const fe=p.xsrfHeaderName&&p.xsrfCookieName&&zt.read(p.xsrfCookieName);fe&&L.set(p.xsrfHeaderName,fe)}R===void 0&&L.setContentType(null),"setRequestHeader"in M&&S.forEach(L.toJSON(),function(ze,Ze){M.setRequestHeader(Ze,ze)}),S.isUndefined(p.withCredentials)||(M.withCredentials=!!p.withCredentials),P&&P!=="json"&&(M.responseType=p.responseType),typeof p.onDownloadProgress=="function"&&M.addEventListener("progress",qt(p.onDownloadProgress,!0)),typeof p.onUploadProgress=="function"&&M.upload&&M.upload.addEventListener("progress",qt(p.onUploadProgress)),(p.cancelToken||p.signal)&&(ce=fe=>{M&&(v(!fe||fe.type?new gt(null,p,M):fe),M.abort(),M=null)},p.cancelToken&&p.cancelToken.subscribe(ce),p.signal&&(p.signal.aborted?ce():p.signal.addEventListener("abort",ce)));const ue=Vt(Qe);if(ue&&me.protocols.indexOf(ue)===-1){v(new de("Unsupported protocol "+ue+":",de.ERR_BAD_REQUEST,p));return}M.send(R||null)})};const Ot={http:De,xhr:Mt};S.forEach(Ot,(p,g)=>{if(p){try{Object.defineProperty(p,"name",{value:g})}catch{}Object.defineProperty(p,"adapterName",{value:g})}});const St=p=>`- ${p}`,Ht=p=>S.isFunction(p)||p===null||p===!1;var Tt={getAdapter:p=>{p=S.isArray(p)?p:[p];const{length:g}=p;let w,v;const R={};for(let L=0;L<g;L++){w=p[L];let P;if(v=w,!Ht(w)&&(v=Ot[(P=String(w)).toLowerCase()],v===void 0))throw new de(`Unknown adapter '${P}'`);if(v)break;R[P||"#"+L]=v}if(!v){const L=Object.entries(R).map(([B,ce])=>`adapter ${B} `+(ce===!1?"is not supported by the environment":"is not available in the build"));let P=g?L.length>1?`since :
`+L.map(St).join(`
`):" "+St(L[0]):"as no adapter specified";throw new de("There is no suitable adapter to dispatch the request "+P,"ERR_NOT_SUPPORT")}return v},adapters:Ot};function Rt(p){if(p.cancelToken&&p.cancelToken.throwIfRequested(),p.signal&&p.signal.aborted)throw new gt(null,p)}function Dt(p){return Rt(p),p.headers=ft.from(p.headers),p.data=vt.call(p,p.transformRequest),["post","put","patch"].indexOf(p.method)!==-1&&p.headers.setContentType("application/x-www-form-urlencoded",!1),Tt.getAdapter(p.adapter||ee.adapter)(p).then(function(v){return Rt(p),v.data=vt.call(p,p.transformResponse,v),v.headers=ft.from(v.headers),v},function(v){return Lt(v)||(Rt(p),v&&v.response&&(v.response.data=vt.call(p,p.transformResponse,v.response),v.response.headers=ft.from(v.response.headers))),Promise.reject(v)})}const kt=p=>p instanceof ft?{...p}:p;function yt(p,g){g=g||{};const w={};function v(le,ne,M){return S.isPlainObject(le)&&S.isPlainObject(ne)?S.merge.call({caseless:M},le,ne):S.isPlainObject(ne)?S.merge({},ne):S.isArray(ne)?ne.slice():ne}function R(le,ne,M){if(S.isUndefined(ne)){if(!S.isUndefined(le))return v(void 0,le,M)}else return v(le,ne,M)}function L(le,ne){if(!S.isUndefined(ne))return v(void 0,ne)}function P(le,ne){if(S.isUndefined(ne)){if(!S.isUndefined(le))return v(void 0,le)}else return v(void 0,ne)}function B(le,ne,M){if(M in g)return v(le,ne);if(M in p)return v(void 0,le)}const ce={url:L,method:L,data:L,baseURL:P,transformRequest:P,transformResponse:P,paramsSerializer:P,timeout:P,timeoutMessage:P,withCredentials:P,withXSRFToken:P,adapter:P,responseType:P,xsrfCookieName:P,xsrfHeaderName:P,onUploadProgress:P,onDownloadProgress:P,decompress:P,maxContentLength:P,maxBodyLength:P,beforeRedirect:P,transport:P,httpAgent:P,httpsAgent:P,cancelToken:P,socketPath:P,responseEncoding:P,validateStatus:B,headers:(le,ne)=>R(kt(le),kt(ne),!0)};return S.forEach(Object.keys(Object.assign({},p,g)),function(ne){const M=ce[ne]||R,Qe=M(p[ne],g[ne],ne);S.isUndefined(Qe)&&M!==B||(w[ne]=Qe)}),w}const Wt="1.6.8",Ct={};["object","boolean","number","function","string","symbol"].forEach((p,g)=>{Ct[p]=function(v){return typeof v===p||"a"+(g<1?"n ":" ")+p}});const jt={};Ct.transitional=function(g,w,v){function R(L,P){return"[Axios v"+Wt+"] Transitional option '"+L+"'"+P+(v?". "+v:"")}return(L,P,B)=>{if(g===!1)throw new de(R(P," has been removed"+(w?" in "+w:"")),de.ERR_DEPRECATED);return w&&!jt[P]&&(jt[P]=!0,console.warn(R(P," has been deprecated since v"+w+" and will be removed in the near future"))),g?g(L,P,B):!0}};function Gt(p,g,w){if(typeof p!="object")throw new de("options must be an object",de.ERR_BAD_OPTION_VALUE);const v=Object.keys(p);let R=v.length;for(;R-- >0;){const L=v[R],P=g[L];if(P){const B=p[L],ce=B===void 0||P(B,L,p);if(ce!==!0)throw new de("option "+L+" must be "+ce,de.ERR_BAD_OPTION_VALUE);continue}if(w!==!0)throw new de("Unknown option "+L,de.ERR_BAD_OPTION)}}var xt={assertOptions:Gt,validators:Ct};const ct=xt.validators;class _t{constructor(g){this.defaults=g,this.interceptors={request:new d,response:new d}}async request(g,w){try{return await this._request(g,w)}catch(v){if(v instanceof Error){let R;Error.captureStackTrace?Error.captureStackTrace(R={}):R=new Error;const L=R.stack?R.stack.replace(/^.+\n/,""):"";v.stack?L&&!String(v.stack).endsWith(L.replace(/^.+\n.+\n/,""))&&(v.stack+=`
`+L):v.stack=L}throw v}}_request(g,w){typeof g=="string"?(w=w||{},w.url=g):w=g||{},w=yt(this.defaults,w);const{transitional:v,paramsSerializer:R,headers:L}=w;v!==void 0&&xt.assertOptions(v,{silentJSONParsing:ct.transitional(ct.boolean),forcedJSONParsing:ct.transitional(ct.boolean),clarifyTimeoutError:ct.transitional(ct.boolean)},!1),R!=null&&(S.isFunction(R)?w.paramsSerializer={serialize:R}:xt.assertOptions(R,{encode:ct.function,serialize:ct.function},!0)),w.method=(w.method||this.defaults.method||"get").toLowerCase();let P=L&&S.merge(L.common,L[w.method]);L&&S.forEach(["delete","get","head","post","put","patch","common"],ue=>{delete L[ue]}),w.headers=ft.concat(P,L);const B=[];let ce=!0;this.interceptors.request.forEach(function(fe){typeof fe.runWhen=="function"&&fe.runWhen(w)===!1||(ce=ce&&fe.synchronous,B.unshift(fe.fulfilled,fe.rejected))});const le=[];this.interceptors.response.forEach(function(fe){le.push(fe.fulfilled,fe.rejected)});let ne,M=0,Qe;if(!ce){const ue=[Dt.bind(this),void 0];for(ue.unshift.apply(ue,B),ue.push.apply(ue,le),Qe=ue.length,ne=Promise.resolve(w);M<Qe;)ne=ne.then(ue[M++],ue[M++]);return ne}Qe=B.length;let nt=w;for(M=0;M<Qe;){const ue=B[M++],fe=B[M++];try{nt=ue(nt)}catch(ze){fe.call(this,ze);break}}try{ne=Dt.call(this,nt)}catch(ue){return Promise.reject(ue)}for(M=0,Qe=le.length;M<Qe;)ne=ne.then(le[M++],le[M++]);return ne}getUri(g){g=yt(this.defaults,g);const w=Pt(g.baseURL,g.url);return O(w,g.params,g.paramsSerializer)}}S.forEach(["delete","get","head","options"],function(g){_t.prototype[g]=function(w,v){return this.request(yt(v||{},{method:g,url:w,data:(v||{}).data}))}}),S.forEach(["post","put","patch"],function(g){function w(v){return function(L,P,B){return this.request(yt(B||{},{method:g,headers:v?{"Content-Type":"multipart/form-data"}:{},url:L,data:P}))}}_t.prototype[g]=w(),_t.prototype[g+"Form"]=w(!0)});var wt=_t;class Et{constructor(g){if(typeof g!="function")throw new TypeError("executor must be a function.");let w;this.promise=new Promise(function(L){w=L});const v=this;this.promise.then(R=>{if(!v._listeners)return;let L=v._listeners.length;for(;L-- >0;)v._listeners[L](R);v._listeners=null}),this.promise.then=R=>{let L;const P=new Promise(B=>{v.subscribe(B),L=B}).then(R);return P.cancel=function(){v.unsubscribe(L)},P},g(function(L,P,B){v.reason||(v.reason=new gt(L,P,B),w(v.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(g){if(this.reason){g(this.reason);return}this._listeners?this._listeners.push(g):this._listeners=[g]}unsubscribe(g){if(!this._listeners)return;const w=this._listeners.indexOf(g);w!==-1&&this._listeners.splice(w,1)}static source(){let g;return{token:new Et(function(R){g=R}),cancel:g}}}var Zt=Et;function Jt(p){return function(w){return p.apply(null,w)}}function Xt(p){return S.isObject(p)&&p.isAxiosError===!0}const At={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(At).forEach(([p,g])=>{At[g]=p});var Kt=At;function Qt(p){const g=new wt(p),w=h(wt.prototype.request,g);return S.extend(w,wt.prototype,g,{allOwnKeys:!0}),S.extend(w,g,null,{allOwnKeys:!0}),w.create=function(R){return Qt(yt(p,R))},w}const ke=Qt(ee);return ke.Axios=wt,ke.CanceledError=gt,ke.CancelToken=Zt,ke.isCancel=Lt,ke.VERSION=Wt,ke.toFormData=Q,ke.AxiosError=de,ke.Cancel=ke.CanceledError,ke.all=function(g){return Promise.all(g)},ke.spread=Jt,ke.isAxiosError=Xt,ke.mergeConfig=yt,ke.AxiosHeaders=ft,ke.formToJSON=p=>C(S.isHTMLForm(p)?new FormData(p):p),ke.getAdapter=Tt.getAdapter,ke.HttpStatusCode=Kt,ke.default=ke,axios_1=ke,axios_1}var axiosInstance_1,hasRequiredAxiosInstance;function requireAxiosInstance(){return hasRequiredAxiosInstance||(hasRequiredAxiosInstance=1,axiosInstance_1=requireAxios().create()),axiosInstance_1}var errorMessage,hasRequiredErrorMessage;function requireErrorMessage(){if(hasRequiredErrorMessage)return errorMessage;hasRequiredErrorMessage=1;function h(u,l,o){let y="";return o.response?(o=o.response,o.data&&(y+=`${s(o.data)}`)):o.body&&(y+=`${s(o.body)}`),u=u.split("?")[0],o.status&&(y+=`Code: ${o.status}`),o.action&&(y+=` Action: ${o.action}`),o.type&&(y+=` Type: ${o.type}`),u&&(y+=` url: ${u}`),l&&l.method&&(y+=` method: ${l.method}`),o.stack&&(y=[y,o.stack].join(`
`)),y}function s(u){if(typeof u=="object"){let l="";for(const o of Object.keys(u))u[o]&&typeof u[o]!="object"&&(l+=`${o} ${u[o]} `);return l}return u}function a(u,l,o){const y={};return y.status=403,y.url=(o||"")+(l||""),y.type="client",y.action=u,y.body=`${y.action} not permitted for ${y.url}`,y}function t(u,l,o){return`API Error ${h(u,l,o)}`}function i(u,l,o){return`Access Denied ${h(u,l,o)}`}function e(u,l){return`Invalid argument to
            ${l}. 
            ${u}
            is not a valid Terminus DB API endpoint`}function n(u,l){return`Invalid Parameter to
            ${u}. 
            ${l}`}function c(u){const l={};if(l.status=u.status,l.type=u.type,u.data&&typeof u.data=="object"){let o;try{o=u.text()}catch{try{o=u.json()}catch{o=u.toString()}}l.body=o}else u.data&&(l.body=u.data);return l.url=u.url,l.headers=u.headers,l.redirected=u.redirected,l}function r(u,l,o){const y=new Error(t(u,l,o));return o.response&&o.response.data&&(y.data=o.response.data),o.response&&o.response.status&&(y.status=o.response.status),y}return errorMessage={apiErrorFormatted:r,getErrorAsMessage:h,getAPIErrorMessage:t,getAccessDeniedMessage:i,accessDenied:a,getInvalidURIMessage:e,getInvalidParameterMessage:n,parseAPIError:c},errorMessage}const version="10.0.33",require$$5={version};var dispatchRequest,hasRequiredDispatchRequest;function requireDispatchRequest(){if(hasRequiredDispatchRequest)return dispatchRequest;hasRequiredDispatchRequest=1;const h=requirePako(),s=requireAxiosInstance(),a=requireUtils(),t=require_const(),i=requireErrorMessage(),{version:e}=require$$5;requireTypedef();function n(o){try{return btoa(o)}catch{return Buffer.from(o).toString("base64")}}function c(o){return{result:o.data,dataVersion:o.headers["terminusdb-data-version"]?o.headers["terminusdb-data-version"]:""}}function r(o){if(!o)return"";const y={jwt:"Bearer",basic:"Basic",apikey:"Token"};let b=o.key;return o.type==="basic"&&(b=n(`${o.user}:${o.key}`)),`${y[o.type]} ${b}`}function u(o,y,b){if(!o||typeof o!="object")return!1;const A=JSON.stringify(o);return A&&A.length>1024&&b?(y.headers["Content-Encoding"]="gzip",h.gzip(A)):!1}/**
 * @file Dispatch Request
 * @license Apache Version 2
 * @description Functions for dispatching API requests via the axios library.
 * @param {string} url  API endpoint URL
 * @param {string} action API action
 * @param {object} payload data to be transmitted to endpoint
 * @param {typedef.CredentialObj} local_auth the local authorization object
 * @param {typedef.CredentialObj} remote_auth the remote authoriuzation object
 * @param {object} customHeaders all the custom header to add to your call
 * @param {boolean} [getDataVersion] If true the function will return object having result
 * and dataVersion.
 * @param {boolean} [compress] If true, compress the data with gzip if its size is bigger than 1024
 */function l(o,y,b,A,j=null,F=null,oe=!1,re=!1){const k={mode:"cors",redirect:"follow",referrer:"client",maxContentLength:1/0,maxBodyLength:1/0,headers:{}};if(o.startsWith("https://127.0.0.1")&&typeof window>"u"){const x=require$$0,U=new x.Agent({rejectUnauthorized:!1});k.httpsAgent=U}switch(A&&typeof A=="object"&&(k.headers.Authorization=r(A)),j&&typeof j=="object"&&(k.headers["Authorization-Remote"]=r(j)),F&&typeof F=="object"&&Object.keys(F).map(x=>{k.headers[x]=F[x]}),typeof window>"u"&&(k.headers["User-Agent"]=`terminusdb-client-js/${e}`),y){case t.DELETE:return b&&(k.headers=k.headers?k.headers:{},k.headers["Content-Type"]="application/json; charset=utf-8",k.data=b),s.delete(o,k).then(x=>oe?c(x):x.data).catch(x=>{throw i.apiErrorFormatted(o,k,x)});case t.HEAD:return s.head(o,k).then(x=>oe?c(x):x.data).catch(x=>{throw i.apiErrorFormatted(o,k,x)});case t.GET:{if(b){const x=a.URIEncodePayload(b);x&&(o+=`?${x}`)}return s.get(o,k).then(x=>oe?c(x):x.data).catch(x=>{throw i.apiErrorFormatted(o,k,x)})}case t.ADD_CSV:case t.INSERT_TRIPLES:return k.headers=k.headers?k.headers:{},k.headers["Content-Type"]="application/form-data; charset=utf-8",s.put(o,b,k).then(x=>oe?c(x):x.data).catch(x=>{throw i.apiErrorFormatted(o,k,x)});case t.PUT:{k.headers=k.headers?k.headers:{},k.headers["Content-Type"]="application/json; charset=utf-8";let x=null;const U=JSON.stringify(b);return U.length>1024&&re&&(k.headers["Content-Encoding"]="gzip",x=h.gzip(U)),s.put(o,x||b,k).then($=>oe?c($):$.data).catch($=>{throw i.apiErrorFormatted(o,k,$)})}case t.QUERY_DOCUMENT:k.headers=k.headers?k.headers:{},k.headers["X-HTTP-Method-Override"]="GET";default:{k.headers=k.headers?k.headers:{},k.headers["Content-Type"]="application/json; charset=utf-8";const x=u(b,k,re);return s.post(o,x||b||{},k).then(U=>oe?c(U):U.data).catch(U=>{throw i.apiErrorFormatted(o,k,U)})}}}return dispatchRequest=l,dispatchRequest}var connectionConfig,hasRequiredConnectionConfig;function requireConnectionConfig(){if(hasRequiredConnectionConfig)return connectionConfig;hasRequiredConnectionConfig=1;const{encodeURISegment:h}=requireUtils();requireTypedef();/**
 * @file Terminus DB connection configuration
 * @license Apache Version 2
 * @description Object representing the state of a connection to a terminus db - these are:
 * provides methods for getting and setting connection parameters
 * @constructor
 * @param {string} serverUrl - the terminusdb server url
 * @param {typedef.ParamsObj} [params] - an object with the following connection parameters:
 */function s(a,t){this.server=void 0,this.baseServer=void 0,this.remote_auth=void 0,this.local_auth=void 0,this.organizationid=!1,this.dbid=!1,this.default_branch_id=t&&t.default_branch_id?t.default_branch_id:"main",this.default_repo_id="local",this.system_db="_system",this.api_extension="api/",this.branchid=this.default_branch_id,this.repoid=this.default_repo_id,this.refid=!1,this.connection_error=!1;const i=this.parseServerURL(a);this.server=i,t&&this.update(t)}return s.prototype.copy=function(){const a=new s(this.server);return a.api_extension=this.api_extension,a.remote_auth=this.remote_auth,a.local_auth=this.local_auth,a.organizationid=this.organizationid,a.dbid=this.dbid,a.branchid=this.branchid,a.repoid=this.repoid,a.refid=this.refid,a},s.prototype.update=function(a){if(!a)return;const t=a.organization||a.user;this.setOrganization(t),typeof a.db<"u"&&this.setDB(a.db),typeof a.token<"u"?this.setLocalBasicAuth(a.token,a.user,"apikey"):typeof a.jwt<"u"?this.setLocalBasicAuth(a.jwt,a.user,"jwt"):typeof a.key<"u"?this.setLocalBasicAuth(a.key,a.user):typeof a.user<"u"&&this.setLocalBasicAuth(null,a.user),typeof a.branch<"u"&&this.setBranch(a.branch),typeof a.ref<"u"&&this.setRef(a.ref),typeof a.repo<"u"&&this.setRepo(a.repo)},s.prototype.serverURL=function(){return this.server},s.prototype.author=function(){return this.author},s.prototype.apiURL=function(){return this.server+this.api_extension},s.prototype.apiURLInfo=function(){return`${this.apiURL()}info`},s.prototype.db=function(){if(!this.dbid)throw new Error("Invalid database name");return this.dbid},s.prototype.branch=function(){return this.branchid},s.prototype.ref=function(){return this.refid},s.prototype.organization=function(){return this.organizationid},s.prototype.repo=function(){return this.repoid},s.prototype.localAuth=function(){return this.local_auth?this.local_auth:!1},s.prototype.localUser=function(){return this.local_auth?this.local_auth.user:!1},s.prototype.user=function(a){return!a&&this.remote_auth&&this.remote_auth.type==="jwt"?this.remote_auth.user:this.local_auth?this.local_auth.user:!1},s.prototype.parseServerURL=function(a){if(a&&(a.substring(0,7)==="http://"||a.substring(0,8)==="https://"))return a.lastIndexOf("/")!==a.length-1&&(a+="/"),this.serverUrlEncoding(a);throw new Error(`Invalid Server URL: ${a}`)},s.prototype.serverUrlEncoding=function(a){const t=a.split("/");if(t.length>4){this.baseServer=a.replace(`${t[3]}/`,"");const i=h(t[3]);return a.replace(t[3],i)}return this.baseServer=a,a},s.prototype.clearCursor=function(){this.branchid=this.default_branch_id,this.repoid=this.default_repo_id,this.organizationid=!1,this.dbid=!1,this.refid=!1},s.prototype.setError=function(a){this.connection_error=a},s.prototype.setOrganization=function(a="admin"){this.organizationid=a},s.prototype.setDB=function(a){this.dbid=a},s.prototype.setRepo=function(a){this.repoid=a},s.prototype.setBranch=function(a){this.branchid=a||this.default_branch_id},s.prototype.setRef=function(a){this.refid=a},s.prototype.setRemoteBasicAuth=function(a,t){a?this.remote_auth={type:"jwt",user:t,key:a}:this.remote_auth=void 0},s.prototype.setLocalBasicAuth=function(a,t="admin",i="basic"){this.local_auth={type:i,user:t,key:a}},s.prototype.setLocalAuth=function(a){this.local_auth=a},s.prototype.setRemoteAuth=function(a){this.remote_auth=a},s.prototype.remoteAuth=function(){return this.remote_auth?this.remote_auth:!1},s.prototype.dbURL=function(){return this.dbBase("db")},s.prototype.userURL=function(a){let t=`${this.apiURL()}user`;return a&&(t+=`/${h(a)}`),t},s.prototype.organizationURL=function(a,t){let i=`${this.apiURL()}organization`;return a&&(i+=`/${h(a)}`),t&&(i+=`/${h(t)}`),i},s.prototype.userOrganizationsURL=function(){return`${this.apiURL()}user_organizations`},s.prototype.rolesURL=function(){return`${this.apiURL()}role`},s.prototype.updateRolesURL=function(){return`${this.apiURL()}update_role`},s.prototype.graphURL=function(a){return`${this.branchBase("graph")}/${a}/main`},s.prototype.triplesURL=function(a){let t="";return this.db()===this.system_db?this.dbBase("triples"):t=this.branchBase("triples"),t+=`/${a}/main`,t},s.prototype.csvURL=function(){return this.branchBase("csv")},s.prototype.queryURL=function(){return this.db()===this.system_db?this.dbBase("woql"):this.branchBase("woql")},s.prototype.log=function(){return this.db()===this.system_db?this.dbBase("log"):this.branchBase("log")},s.prototype.updateOrganizationRoleURL=function(){return`${this.apiURL()}update_role`},s.prototype.cloneURL=function(a){let t=`${this.apiURL()}clone/${this.organization()}`;return a&&(t+=`/${a}`),t},s.prototype.cloneableURL=function(){return`${this.serverURL()}${this.organization()}/${this.db()}`},s.prototype.pullURL=function(){return this.branchBase("pull")},s.prototype.patchURL=function(){return this.branchBase("patch")},s.prototype.diffURL=function(){return this.branchBase("diff")},s.prototype.applyURL=function(){return this.branchBase("apply")},s.prototype.docHistoryURL=function(a){const t=this.queryParameter(a);return this.db()===this.system_db?this.dbBase("history")+t:this.branchBase("history")+t},s.prototype.fetchURL=function(a){return`${this.dbBase("fetch")}/${a}/_commits`},s.prototype.rebaseURL=function(){return this.branchBase("rebase")},s.prototype.resetURL=function(){return this.branchBase("reset")},s.prototype.pushURL=function(){return this.branchBase("push")},s.prototype.branchURL=function(a){return`${this.repoBase("branch")}/branch/${a}`},s.prototype.squashBranchURL=function(a){return`${this.repoBase("squash")}/branch/${a}`},s.prototype.resetBranchUrl=function(a){return`${this.repoBase("reset")}/branch/${a}`},s.prototype.commitDescriptorUrl=function(a){return`${this.organization()}/${this.db()}/${this.repoid}/commit/${a}`},s.prototype.optimizeBranchUrl=function(a){return`${this.dbBase("optimize")}/${this.repoid}/branch/${encodeURIComponent(a)}`},s.prototype.dbBase=function(a){return`${this.apiURL()}${a}/${this.dbURLFragment()}`},s.prototype.repoBase=function(a){let t=this.dbBase(a);return this.repo()?t+=`/${this.repo()}`:t+=`/${this.default_repo_id}`,t},s.prototype.branchBase=function(a){let t=this.repoBase(a);return this.repo()==="_meta"?t:this.branch()==="_commits"?`${t}/${this.branch()}`:this.ref()?`${t}/commit/${this.ref()}`:this.branch()?`${t}/branch/${encodeURIComponent(this.branch())}`:(t+=`/branch/${this.default_branch_id}`,t)},s.prototype.dbURLFragment=function(){return this.db()===this.system_db?this.db():`${h(this.organization())}/${h(this.db())}`},s.prototype.documentURL=function(a){const t=this.queryParameter(a);return this.db()===this.system_db?this.dbBase("document")+t:this.branchBase("document")+t},s.prototype.prefixesURL=function(){return this.db()===this.system_db?this.dbBase("prefixes"):this.branchBase("prefixes")},s.prototype.queryParameter=function(a){return!a||typeof a!="object"?"":`?${Object.keys(a).map(i=>`${i}=${h(a[i])}`).join("&")}`},s.prototype.jsonSchemaURL=function(a){const t=this.queryParameter(a);return this.db()===this.system_db?this.dbBase("schema")+t:this.branchBase("schema")+t},connectionConfig=s,connectionConfig}var woqlPrinter,hasRequiredWoqlPrinter;function requireWoqlPrinter(){if(hasRequiredWoqlPrinter)return woqlPrinter;hasRequiredWoqlPrinter=1;function h(i,e){this.vocab=i,this.language=e,this.indent_spaces=4,this.boxed_predicates=["variable","array_element","node"],this.subject_cleaned_predicates=["subject","element"],this.schema_cleaned_predicates=["predicate","uri","of_type"],this.list_operators=["ValueList","Array","NamedAsVar","IndexedAsVar","AsVar"],this.query_list_operators=["And","Or"],this.operator_maps={IDGenerator:"idgen",IsA:"isa",PostResource:"post",QueryResource:"remote",AsVars:"as",NamedAsVars:"as",IndexedAsVars:"as",DeletedTriple:"removed_triple"},this.shortcuts={optional:"opt",substring:"substr",regexp:"re",subsumption:"sub",equals:"eq",concatenate:"concat"},this.pythonic={and:"woql_and",or:"woql_or",as:"woql_as",with:"woql_with",from:"woql_from",not:"woql_not"},this.show_context=!1}h.prototype.printJSON=function(i,e,n,c){e=e||0,n=n||!1;let r="";if(!i["@type"])return console.log("Bad structure passed to print json, no type: ",i),"";if(["Value","NodeValue","DataValue","ArithmeticValue","OrderTemplate"].indexOf(i["@type"])>-1)return this.pvar(i);let u=i["@type"];if(typeof i["@type"]=="string"&&u.indexOf(":")>-1&&(u=i["@type"].split(":")[1]),u==="QueryResource")return this.getQueryResourceStr(i,e,n,c);if(u){const l=this.unboxJSON(u,i);if(l){const b=this.printArgument(u,this.getBoxedPredicate(u,i),l,e,n);return this.isListOperator(u)?`[${b}]`:b}if(this.isListOperator(u))r+="[";else{const b=this.getFunctionForOperator(u,i),A=c?e*this.indent_spaces:0;r+=`${this.getWOQLPrelude(b,n,A)}(`}const o=this.getArgumentOrder(u,i),y=o.indexOf("query")===-1?o.length-1:o.length-2;o.forEach((b,A)=>{let j=b==="query"&&u!=="Put"||b==="consequent"||b==="resource";b==="resource"&&typeof i[b]=="string"&&(j=!1),r+=this.printArgument(u,b,i[b],e,j),A<y&&u!=="Get"&&(r+=", ")}),this.isListOperator(u)?r+="]":(this.argumentTakesNewline(u)&&(r+=`
${t(e*this.indent_spaces)}`),n||(r+=")"))}else console.log("wrong structure passed to print json ",i);return r},h.prototype.getQueryResourceStr=function(i,e,n,c){if(!i.source)return console.log("wrong structure passed to print json ",i),"";const r=i.source.url?"remote":"file",u=c?e*this.indent_spaces:0;let l=`${this.getWOQLPrelude(r,n,u)}(`;const o=i.source.file?`"${i.source.file}"`:`"${i.source.url}"`,y=i.format==="csv"?"":i.format;return l+=o,y&&(l+=`, ${y}`),l},h.prototype.getArgumentOrder=function(i,e){const n=Object.keys(e);return n.splice(n.indexOf("@type"),1),n},h.prototype.argumentTakesNewline=function(i){return this.isQueryListOperator(i)},h.prototype.argumentRequiresArray=function(i,e){return(i==="group_by"||i==="list")&&e.length>1},h.prototype.printArgument=function(i,e,n,c,r){let u="";r&&(u+=")");const l=this.argumentTakesNewline(i);if(l&&(u+=`
${t((c+1)*this.indent_spaces)}`),n["@type"]==="True")return"true";if(e==="document")return this.decompileDocument(n);if(e==="variables")return this.decompileVariables(n);if(e==="group_by"||e==="template")return this.decompileVariables(n,!0);if(e==="columns")return this.decompileAsVars(n,c+1);if(e==="pattern")return this.decompileRegexPattern(n,c+1);if(Array.isArray(n)){const o=[];for(let b=0;b<n.length;b++){const A=l?c+1:c;o.push(this.printJSON(n[b],A,r,l))}const y=l?`,
${t(++c*this.indent_spaces)}`:",";this.argumentRequiresArray(e,o)?u+=`[${o.join(y)}]`:u+=o.join(y)}else if(typeof n=="object"){const o=this.printJSON(n,c,r);u+=o}else if(typeof n=="string")u+=this.uncleanArgument(n,i,e);else if(typeof n=="number")return n;return u},h.prototype.decompileDocument=function(i){const e={};return this.decompileDictionary(e,i),`WOQL.doc(${JSON.stringify(e)})`},h.prototype.decompileDictionary=function(i,e){e.dictionary&&e.dictionary.data&&Array.isArray(e.dictionary.data)&&e.dictionary.data.forEach(n=>{this.decompileFieldValuePair(i,n)})},h.prototype.decompileFieldValuePair=function(i,e){const n=e.field||"";let c=!1;if(e.value&&e.value){if(e.value.data)c=e.value.data["@value"];else if(e.value.dictionary&&Array.isArray(e.value.dictionary.data)){const r={};this.decompileDictionary(r,e.value),c=r}}i[n]=c},h.prototype.decompileVariables=function(i,e=!1){if(Array.isArray(i)){let n="";return i.forEach((c,r)=>{n+=`"v:${c}"`,r<i.length-1&&(n+=", ")}),e&&i.length>1&&(n=`[${n}]`),n}return""},h.prototype.decompileRegexPattern=function(i){return typeof i=="object"&&i["@type"]==="DataValue"?this.pvar(i):i["@type"].startsWith("Path")?`"${this.decompilePathPattern(i)}"`:`"${i.replace("\\","\\\\")}"`},h.prototype.pvar=function(i){if(i.variable){let e=i.variable;const n=i.order?i.order:"";return e.indexOf(":")===-1&&(e=`v:${e}`),n!==""&&n!=="asc"?`["${e}","${n}"]`:`"${e}"`}if(i.node)return`"${i.node}"`;if(i.data)return JSON.stringify(i.data);if(i.list){const e=i.list;if(Array.isArray(e)){const n=[];return e.forEach((c,r)=>{n.push(this.pvar(c))}),`[${n.join(", ")}]`}return this.pvar(i.list)}return!1},h.prototype.getWOQLPrelude=function(i,e,n){if(i==="true"||i==="false")return this.language==="python"?i.charAt(0).toUpperCase()+i.slice(1):i;let c="WOQL.";return this.language==="python"&&(this.pythonic[i]&&(i=this.pythonic[i]),c="WOQLQuery()."),e?`.${i}`:(n?`
${t(n)}`:"")+c+i},h.prototype.uncleanArgument=function(i,e,n){if(i.indexOf(":")!==-1){for(const c in this.vocab)if(this.vocab[c]===i)return`"${c}"`}return`"${i}"`},h.prototype.isListOperator=function(i){return this.list_operators.indexOf(i)!==-1},h.prototype.isQueryListOperator=function(i){return this.query_list_operators.indexOf(i)!==-1},h.prototype.getFunctionForOperator=function(i,e){if(this.operator_maps[i])return this.operator_maps[i];if(i==="Triple"&&e.graph)return"quad";const n=a(i);return this.shortcuts[n]?this.shortcuts[n]:n},h.prototype.getBoxedPredicate=function(i,e){for(let n=0;n<this.boxed_predicates.length;n++)if(e[this.boxed_predicates[n]])return this.boxed_predicates[n];return i==="QueryListElement"?"woql:query":!1},h.prototype.unboxJSON=function(i,e){const n=this.getBoxedPredicate(i,e);return n?e[n]:!1},h.prototype.decompileAsVars=function(i,e){let n="";return Array.isArray(i)?(i.forEach((c,r)=>{if(n+=`
${t(e*this.indent_spaces)}${r===0?"WOQL":""}`,c["@type"]==="Column"&&c.indicator){const u=c.indicator.name||c.indicator.index,l=`v:${c.variable}`,{type:o}=c.indicator;n+=`.as("${u}", "${l}"`,o?n+=`, "${o}")`:n+=")"}}),n):""},h.prototype.decompilePathPattern=function(i){switch(i["@type"]){case"InversePathPredicate":return i.predicate?`<${i.predicate}`:"<.";case"PathPredicate":return i.predicate?`${i.predicate}`:".";case"PathPlus":var n=i.plus;return Array.isArray(n)&&(n=n[0]),s(n)?`(${this.decompilePathPattern(n)})+`:`${this.decompilePathPattern(n)}+`;case"PathStar":var n=i.star;return Array.isArray(n)&&(n=n[0]),s(n)?`(${this.decompilePathPattern(n)})*`:`${this.decompilePathPattern(n)}*`;case"PathTimes":var n=i.times,c=` {${i.from},${i.to}}`;return Array.isArray(n)&&(n=n[0]),s(n)?`(${this.decompilePathPattern(n)})${c}`:this.decompilePathPattern(n)+c;case"PathSequence":const u=i.sequence;if(Array.isArray(u)&&u.length===2){let o=u[0];const y=u[1];Array.isArray(o)&&(o=o[0]);var r="";return s(o)&&(r+="("),r+=this.decompilePathPattern(o),s(o)&&(r+=")"),r+=",",s(y)&&(r+="("),r+=this.decompilePathPattern(y),o["@type"]==="InversePathPredicate"&&(r+=">"),s(y)&&(r+=")"),r}case"PathOr":const l=i.or;if(Array.isArray(l)&&l.length===2){let o=l[0];const y=l[1];Array.isArray(o)&&(o=o[0]);var r="";return s(o)&&(r+="("),r+=this.decompilePathPattern(o),s(o)&&(r+=")"),r+="|",s(y)&&(r+="("),r+=this.decompilePathPattern(y),s(y)&&(r+=")"),r}}return"error"};function s(i){return["PathPredicate","PathPlus","PathTimes","InversePathPredicate"].indexOf(i["@type"])===-1}function a(i){return i.replace(/[\w]([A-Z])/g,e=>`${e[0]}_${e[1]}`).toLowerCase()}function t(i){let e="";for(let n=0;n<i;n++)e+=" ";return e}return woqlPrinter=h,woqlPrinter}var woqlCore,hasRequiredWoqlCore;function requireWoqlCore(){if(hasRequiredWoqlCore)return woqlCore;hasRequiredWoqlCore=1;const h=requireUtils(),s=requireWoqlPrinter(),{Var:a,Vars:t,Doc:i}=requireWoqlDoc();requireTypedef();class e{constructor(y){We(this,"triple_builder_context",{});We(this,"query",null);We(this,"counter",1);We(this,"errors",[]);We(this,"cursor",{});We(this,"chain_ended",!1);We(this,"contains_update",!1);We(this,"paging_transitive_properties",["select","from","start","when","opt","limit"]);We(this,"update_operators",["AddTriple","DeleteTriple","AddQuad","DeleteQuad","InsertDocument","DeleteDocument","UpdateDocument"]);We(this,"vocab",this.loadDefaultVocabulary());We(this,"tripleBuilder",!1);return this.query=y||{},this.cursor=this.query,this}}e.prototype.parameterError=function(o){return this.errors.push({type:this.cursor["@type"],message:o}),this},e.prototype.hasErrors=function(){return this.errors.length>0},e.prototype.addSubQuery=function(o){if(o)this.cursor.query=this.jobj(o);else{const y={};this.cursor.query=y,this.cursor=y}return this},e.prototype.containsUpdate=function(o){if(o=o||this.query,this.update_operators.indexOf(o["@type"])!==-1||o.consequent&&this.containsUpdate(o.consequent))return!0;if(o.query)return this.containsUpdate(o.query);if(o.and){for(var y=0;y<o.and.length;y++)if(this.containsUpdate(o.and[y]))return!0}if(o.or){for(var y=0;y<o.or.length;y++)if(this.containsUpdate(o.or[y]))return!0}return!1},e.prototype.updated=function(){return this.contains_update=!0,this},e.prototype.jlt=function(o,y){return y?y=y.indexOf(":")===-1?`xsd:${y}`:y:y="xsd:string",{"@type":y,"@value":o}},e.prototype.varj=function(o){return o instanceof a&&(o=o.name),o.substring(0,2)==="v:"&&(o=o.substring(2)),typeof o=="string"?{"@type":"Value",variable:o}:o},e.prototype.rawVar=function(o){return o instanceof a?o.name:(o.substring(0,2)==="v:"&&(o=o.substring(2)),o)},e.prototype.rawVarList=function(o){const y=[];for(let b=0;b<o.length;b++){const A=this.rawVar(o[b]);y.push(A)}return y},e.prototype.jobj=function(o){return o.json?o.json():o===!0?{"@type":"True"}:o},e.prototype.asv=function(o,y,b){const A={};return typeof o=="number"?(A["@type"]="Column",A.indicator={"@type":"Indicator",index:o}):typeof o=="string"&&(A["@type"]="Column",A.indicator={"@type":"Indicator",name:o}),y instanceof a?A.variable=y.name:y.substring(0,2)==="v:"?A.variable=y.substring(2):A.variable=y,b&&(A.type=b),A},e.prototype.wform=function(o){if(o&&o.type&&(this.cursor.format={"@type":"Format",format_type:{"@value":o.type,"@type":"xsd:string"}},typeof o.format_header<"u")){const y=!!o.format_header;this.cursor.format.format_header={"@value":y,"@type":"xsd:boolean"}}return this},e.prototype.arop=function(o){return typeof o=="object"?this.jobj(this.cleanArithmeticValue(o)):this.cleanArithmeticValue(o,"xsd:decimal")},e.prototype.dataList=function(o,y){if(typeof o=="string")return this.expandDataVariable(o,!0);if(Array.isArray(o)){const b=[];for(let A=0;A<o.length;A++){const j=this.cleanDataValue(o[A]);b.push(j)}return b}},e.prototype.valueList=function(o,y){if(typeof o=="string")return this.expandValueVariable(o,!0);if(Array.isArray(o)){const b=[];for(let A=0;A<o.length;A++){let j=this.cleanObject(o[A]);typeof j=="string"&&(j={node:j}),b.push(j)}return b}},e.prototype.vlist=function(o){const y=[];for(let b=0;b<o.length;b++){const A=this.expandValueVariable(o[b]);y.push(A.variable)}return y},e.prototype.dataValueList=function(o){const y=[];for(let b=0;b<o.length;b++){const A=this.cleanDataValue(o[b]);y.push(A)}return y},e.prototype.cleanSubject=function(o){let y=!1;return o instanceof a?this.expandNodeVariable(o):typeof o=="object"?o:typeof o=="string"?(o.indexOf("v:"),y=o,this.expandNodeVariable(y)):(this.parameterError("Subject must be a URI string"),`${o}`)},e.prototype.cleanPredicate=function(o){let y=!1;return o instanceof a?this.expandNodeVariable(o):typeof o=="object"?o:typeof o!="string"?(this.parameterError("Predicate must be a URI string"),`${o}`):(o.indexOf(":")!==-1||this.wellKnownPredicate(o),y=o,this.expandNodeVariable(y))},e.prototype.wellKnownPredicate=function(o,y){if(this.vocab&&this.vocab[o]){const b=this.vocab[o],A=b.substring(0,3);return!(b==="system:abstract"||A==="xdd"||A==="xsd")}return!1},e.prototype.cleanPathPredicate=function(o){let y=!1;return o.indexOf(":")!==-1?y=o:this.wellKnownPredicate(o)?y=this.vocab[o]:y=o,y},e.prototype.cleanObject=function(o,y){const b={"@type":"Value"};if(o instanceof a)return this.expandValueVariable(o);if(o instanceof i)return o.encoded;if(typeof o=="string"){if(o.indexOf("v:")!==-1)return this.expandValueVariable(o);b.node=o}else if(typeof o=="number")y=y||"xsd:decimal",b.data=this.jlt(o,y);else if(typeof o=="boolean")y=y||"xsd:boolean",b.data=this.jlt(o,y);else if(typeof o=="object"&&o)if(typeof o["@value"]<"u")b.data=o;else return o;else typeof o=="boolean"&&(y=y||"xsd:boolean",b["woql:datatype"]=this.jlt(o,y));return b},e.prototype.cleanDataValue=function(o,y){const b={"@type":"DataValue"};if(o instanceof a)return this.expandDataVariable(o);if(o instanceof i)return o.encoded;if(typeof o=="string"){if(o.indexOf("v:")!==-1)return this.expandDataVariable(o);b.data=this.jlt(o,y)}else if(typeof o=="number")y=y||"xsd:decimal",b.data=this.jlt(o,y);else if(typeof o=="boolean")y=y||"xsd:boolean",b.data=this.jlt(o,y);else if(Array.isArray(o)){const A=[];for(let j=0;j<o.length;j++)A.push(this.cleanDataValue(o[j]));b.list=A}else if(typeof o=="object"&&o)if(o["@value"])b.data=o;else return o;return b},e.prototype.cleanArithmeticValue=function(o,y){const b={"@type":"ArithmeticValue"};if(o instanceof a)return this.expandArithmeticVariable(o);if(typeof o=="string"){if(o.indexOf("v:")!==-1)return this.expandArithmeticVariable(o);b.data=this.jlt(o,y)}else if(typeof o=="number")y=y||"xsd:decimal",b.data=this.jlt(o,y);else if(typeof o=="object"&&o)if(o["@value"])b.data=o;else return o;return b},e.prototype.cleanNodeValue=function(o,y){const b={"@type":"NodeValue"};if(o instanceof a)return this.expandNodeVariable(o);if(typeof o=="string"){if(o.indexOf("v:")!==-1)return this.expandNodeVariable(o);b.node=o}else if(typeof o=="object"&&o)return o;return b},e.prototype.cleanGraph=function(o){return o},e.prototype.expandVariable=function(o,y,b){return o instanceof a?{"@type":y,variable:o.name}:o.substring(0,2)==="v:"||b?(o.substring(0,2)==="v:"&&(o=o.substring(2)),{"@type":y,variable:o}):{"@type":y,node:o}},e.prototype.expandValueVariable=function(o,y){return this.expandVariable(o,"Value",y)},e.prototype.expandNodeVariable=function(o,y){return this.expandVariable(o,"NodeValue",y)},e.prototype.expandDataVariable=function(o,y){return this.expandVariable(o,"DataValue",y)},e.prototype.expandArithmeticVariable=function(o,y){return this.expandVariable(o,"ArithmeticValue",y)},e.prototype.defaultContext=function(o){const y={};for(const b in h.standard_urls)y[b]=h.standard_urls[b];return y.scm=`${o}/schema#`,y.doc=`${o}/data/`,y},e.prototype.getContext=function(o){o=o||this.query;for(const y of Object.keys(o)){if(y==="@context")return o[y];if(this.paging_transitive_properties.indexOf(y)!==-1){const b=o[y][1],A=this.getContext(b);if(A)return A}}},e.prototype.context=function(o){this.query["@context"]=o},e.prototype.loadDefaultVocabulary=function(){const o={};return o.Class="owl:Class",o.DatatypeProperty="owl:DatatypeProperty",o.ObjectProperty="owl:ObjectProperty",o.Document="system:Document",o.abstract="system:abstract",o.comment="rdfs:comment",o.range="rdfs:range",o.domain="rdfs:domain",o.subClassOf="rdfs:subClassOf",o.string="xsd:string",o.integer="xsd:integer",o.decimal="xsd:decimal",o.boolean="xdd:boolean",o.email="xdd:email",o.json="xdd:json",o.dateTime="xsd:dateTime",o.date="xsd:date",o.coordinate="xdd:coordinate",o.line="xdd:coordinatePolyline",o.polygon="xdd:coordinatePolygon",o},e.prototype.setVocabulary=function(o){this.vocab=o},e.prototype.getVocabulary=function(o){return this.vocab},e.prototype.execute=function(o,y){return o.query(this,y)},e.prototype.json=function(o){return o?(this.query=l(o),this):l(this.query,!0)},e.prototype.prettyPrint=function(o="js"){return new s(this.vocab,o).printJSON(this.query)},e.prototype.findLastSubject=function(o){if(o&&o.and)for(var y=o.and.length-1;y>=0;y--){const b=this.findLastSubject(o.and[y]);if(b)return b}if(o&&o.or)for(var y=o.or.length-1;y>=0;y--){const A=this.findLastSubject(o.or[y]);if(A)return A}if(o&&o.query){const b=this.findLastSubject(o.query);if(b)return b}return o&&o.subject?o:!1},e.prototype.findLastProperty=function(o){if(o&&o.and)for(var y=o.and.length-1;y>=0;y--){const b=this.findLastProperty(o.and[y]);if(b)return b}if(o&&o.or)for(var y=o.or.length-1;y>=0;y--){const A=this.findLastProperty(o.or[y]);if(A)return A}if(o&&o.query){const b=this.findLastProperty(o.query);if(b)return b}return o&&o.subject&&this._is_property_triple(o.predicate,o.object)?o:!1},e.prototype._is_property_triple=function(o,y){const b=o.node?o.node:o,A=y.node?y.node:y;return A==="owl:ObjectProperty"||A==="owl:DatatypeProperty"||b==="rdfs:domain"||b==="rdfs:range"},e.prototype.compilePathPattern=function(o){const y=n(o);if(y&&y.length)return u(y,this);this.parameterError(`Pattern error - could not be parsed ${o}`)};function n(o){let y=c(o);const b=[];for(;y.length===2;)b.push(y[0]),y=c(y[1]);return b.push(y[0]),b}function c(o){o=o.trim();let y=1;if(o.charAt(0)==="("){for(var b=1;b<o.length;b++)if(o.charAt(b)==="("?y++:o.charAt(b)===")"&&y--,y===0){const A=o.substring(b+1).trim();return A?[o.substring(1,b),A]:c(o.substring(1,b))}return[]}if(o[0]==="+"||o[0]===","||o[0]==="|"||o[0]==="*"){const A=[o[0]];return o.substring(1)&&A.push(o.substring(1)),A}if(o.charAt(0)==="{"){const A=[o.substring(0,o.indexOf("}")+1)];return o.substring(o.indexOf("}")+1)&&A.push(o.substring(o.indexOf("}")+1)),A}for(var b=1;b<o.length;b++)if(o[b]===","||o[b]==="|"||o[b]==="+"||o[b]==="{"||o[b]==="*")return[o.substring(0,b),o.substring(b)];return[o]}function r(o,y){if(o.indexOf("<")!==-1&&o.indexOf(">")!==-1){const A=o.slice(1,o.length-1),j=A==="."?null:y.cleanPathPredicate(A);return{"@type":"PathOr",or:[{"@type":"InversePathPredicate",predicate:j},{"@type":"PathPredicate",predicate:j}]}}if(o.indexOf("<")!==-1){const A=o.slice(1,o.length);return{"@type":"InversePathPredicate",predicate:A==="."?null:y.cleanPathPredicate(A)}}if(o.indexOf(">")!==-1){const A=o.slice(0,o.length-1);return{"@type":"PathPredicate",predicate:A==="."?null:y.cleanPathPredicate(A)}}return{"@type":"PathPredicate",predicate:o==="."?null:y.cleanPathPredicate(o)}}function u(o,y){if(o.length===1){const b=n(o[0]);if(b.length===1){const A=b[0].trim();return r(A,y)}return u(b,y)}if(o.indexOf("|")!==-1){const b=o.slice(0,o.indexOf("|")),A=o.slice(o.indexOf("|")+1);return{"@type":"PathOr",or:[u(b,y),u(A,y)]}}if(o.indexOf(",")!==-1){const b=o.slice(0,o.indexOf(",")),A=o.slice(o.indexOf(",")+1);return{"@type":"PathSequence",sequence:[u(b,y),u(A,y)]}}if(o[1]==="+")return{"@type":"PathPlus",plus:u([o[0]],y)};if(o[1]==="*")return{"@type":"PathStar",star:u([o[0]],y)};if(o[1].charAt(0)==="{"){const b=o[1].substring(1,o[1].length-1).split(",");return{"@type":"PathTimes",from:b[0],to:b[1],times:u([o[0]],y)}}return y.parameterError(`Pattern error - could not be parsed ${o[0]}`),{"@type":"PathPredicate","rdfs:label":`failed to parse query ${o[0]}`}}function l(o,y){if(Array.isArray(o))return o;if(y){if(o["@type"]==="And"){if(!o.and||!o.and.length)return{};if(o.and.length===1)return l(o.and[0],y)}else if(o["@type"]==="Or"){if(!o.or||!o.or.length)return{};if(o.or.length===1)return l(o.or[0],y)}if(typeof o.query<"u"&&o["@type"]!=="Comment"){if(!o.query["@type"])return{}}else if(o["@type"]==="Comment"&&o.comment&&(!o.query||!o.query["@type"]))return{"@type":"Comment",comment:o.comment};if(typeof o.consequent<"u"&&!o.consequent["@type"])return{}}const b={};for(const A in o){const j=o[A];if(Array.isArray(j)){const F=[];for(let oe=0;oe<j.length;oe++)if(typeof j[oe]=="object"){const re=l(j[oe],y);(!re||!h.empty(re))&&F.push(re)}else F.push(j[oe]);b[A]=F}else if(j!==null)if(typeof j=="object"){const F=l(j,y);(!F||!h.empty(F))&&(b[A]=F)}else b[A]=j}return b}return woqlCore=e,woqlCore}var woqlQuery,hasRequiredWoqlQuery;function requireWoqlQuery(){if(hasRequiredWoqlQuery)return woqlQuery;hasRequiredWoqlQuery=1;const h=requireWoqlCore(),{Var:s,Vars:a,Doc:t}=requireWoqlDoc();requireTypedef();class i extends h{update_triple(n,c,r,u){return this}star(n,c,r,u){return this}update_quad(n,c,r,u){return this}insert(n,c,r){return this}graph(n){return this}node(n,c){return this}nuke(n){return this}all(n,c,r,u){return this}boolean(n){return{}}string(n){return{}}literal(n,c){return{}}iri(n){return{}}_set_context(n){return this}addSubQuery(n){return super.addSubQuery(n),this}parameterError(n){return super.parameterError(n),this}updated(){return super.updated(),this}constructor(n){super(n)}}return i.prototype.read_document=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="ReadDocument",this.cursor.identifier=this.cleanNodeValue(e),this.cursor.document=this.expandValueVariable(n),this},i.prototype.insert_document=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="InsertDocument",typeof n<"u"&&(this.cursor.identifier=this.cleanNodeValue(n)),this.cursor.document=this.cleanObject(e),this.updated()},i.prototype.update_document=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="UpdateDocument",typeof n<"u"&&(this.cursor.identifier=this.cleanNodeValue(n)),this.cursor.document=this.cleanObject(e),this.updated()},i.prototype.delete_document=function(e){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="DeleteDocument",this.cursor.identifier=this.cleanNodeValue(e),this.updated()},i.prototype.wrapCursorWithAnd=function(){if(this.cursor&&this.cursor["@type"]==="And"){const e=this.cursor.and.length;this.and({}),this.cursor=this.cursor.and[e]}else{const e=new i().json(this.cursor);for(const n in this.cursor)delete this.cursor[n];this.and(e,{}),this.cursor=this.cursor.and[1]}},i.prototype.using=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Using",!e||typeof e!="string"?this.parameterError("The first parameter to using must be a Collection ID (string)"):(this.cursor.collection=e,this.addSubQuery(n))},i.prototype.comment=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Comment",this.cursor.comment=this.jlt(e),this.addSubQuery(n)},i.prototype.select=function(...e){if(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Select",!e||e.length<=0)return this.parameterError("Select must be given a list of variable names");const n=e[e.length-1];let c=!1;return typeof n=="object"&&!(n instanceof s)&&n.json&&(c=e.pop()),this.cursor.variables=this.rawVarList(e),this.addSubQuery(c)},i.prototype.distinct=function(...e){if(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Distinct",!e||e.length<=0)return this.parameterError("Distinct must be given a list of variable names");const n=e[e.length-1];let c=!1;return typeof n=="object"&&!(n instanceof s)&&n.json&&(c=e.pop()),this.cursor.variables=this.rawVarList(e),this.addSubQuery(c)},i.prototype.and=function(...e){if(this.cursor["@type"]&&this.cursor["@type"]!=="And"){const n=new i().json(this.cursor);for(const c in this.cursor)delete this.cursor[c];e.unshift(n)}this.cursor["@type"]="And",typeof this.cursor.and>"u"&&(this.cursor.and=[]);for(let n=0;n<e.length;n++){const c=this.jobj(e[n]);if(c["@type"]==="And"&&c.and)for(let r=0;r<c.and.length;r++){const u=c.and[r];if(u){const l=this.jobj(u);this.cursor.and.push(l)}}else this.cursor.and.push(c)}return this},i.prototype.or=function(...e){this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Or",typeof this.cursor.or>"u"&&(this.cursor.or=[]);for(let n=0;n<e.length;n++){const c=this.jobj(e[n]);this.cursor.or.push(c)}return this},i.prototype.from=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="From",!e||typeof graph!="string"?this.parameterError("The first parameter to from must be a Graph Filter Expression (string)"):(this.cursor.graph=e,this.addSubQuery(n))},i.prototype.into=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Into",!e||typeof e!="string"?this.parameterError("The first parameter to from must be a Graph Filter Expression (string)"):(this.cursor.graph=this.jlt(e),this.addSubQuery(n))},i.prototype.triple=function(e,n,c){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Triple",this.cursor.subject=this.cleanSubject(e),this.cursor.predicate=this.cleanPredicate(n),this.cursor.object=this.cleanObject(c),this},i.prototype.added_triple=function(e,n,c){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="AddedTriple",this.cursor.subject=this.cleanSubject(e),this.cursor.predicate=this.cleanPredicate(n),this.cursor.object=this.cleanObject(c),this},i.prototype.removed_triple=function(e,n,c){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="DeletedTriple",this.cursor.subject=this.cleanSubject(e),this.cursor.predicate=this.cleanPredicate(n),this.cursor.object=this.cleanObject(c),this},i.prototype.link=function(e,n,c){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Triple",this.cursor.subject=this.cleanSubject(e),this.cursor.predicate=this.cleanPredicate(n),this.cursor.object=this.cleanSubject(c),this},i.prototype.value=function(e,n,c){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Triple",this.cursor.subject=this.cleanSubject(e),this.cursor.predicate=this.cleanPredicate(n),this.cursor.object=this.cleanDataValue(c,"xsd:string"),this},i.prototype.quad=function(e,n,c,r){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.triple(e,n,c),r?(this.cursor["@type"]="Triple",this.cursor.graph=this.cleanGraph(r),this):this.parameterError("Quad takes four parameters, the last should be a graph filter")},i.prototype.added_quad=function(e,n,c,r){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.triple(e,n,c),r?(this.cursor["@type"]="AddedQuad",this.cursor.graph=this.cleanGraph(r),this):this.parameterError("Quad takes four parameters, the last should be a graph filter")},i.prototype.removed_quad=function(e,n,c,r){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.triple(e,n,c),r?(this.cursor["@type"]="RemovedQuad",this.cursor.graph=this.cleanGraph(r),this):this.parameterError("Quad takes four parameters, the last should be a graph filter")},i.prototype.sub=function(e,n){return!e||!n?this.parameterError("Subsumption takes two parameters, both URIs"):(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Subsumption",this.cursor.parent=this.cleanNodeValue(e),this.cursor.child=this.cleanNodeValue(n),this)},i.prototype.subsumption=i.prototype.sub,i.prototype.eq=function(e,n){return typeof e>"u"||typeof n>"u"?this.parameterError("Equals takes two parameters"):(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Equals",this.cursor.left=this.cleanObject(e),this.cursor.right=this.cleanObject(n),this)},i.prototype.equals=i.prototype.eq,i.prototype.substr=function(e,n,c,r,u){return u||(u=r,r=0),u||(u=c,c=u.length+n),!e||!u||typeof u!="string"?this.parameterError("Substr - the first and last parameters must be strings representing the full and substring variables / literals"):(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Substring",this.cursor.string=this.cleanDataValue(e,"xsd:string"),this.cursor.before=this.cleanDataValue(n,"xsd:nonNegativeInteger"),this.cursor.length=this.cleanDataValue(c,"xsd:nonNegativeInteger"),this.cursor.after=this.cleanDataValue(r,"xsd:nonNegativeInteger"),this.cursor.substring=this.cleanDataValue(u,"xsd:string"),this)},i.prototype.substring=i.prototype.substr,i.prototype.get=function(e,n){return this.cursor["@type"]="Get",this.cursor.columns=e.json?e.json():new i().as(...e).json(),n?this.cursor.resource=this.jobj(n):this.cursor.resource={},this.cursor=this.cursor.resource,this},i.prototype.put=function(e,n,c){if(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Put",Array.isArray(e)&&typeof e[0]!="object"){const r=[];for(let u=0;u<e.length;u++){const l=this.asv(u,e[u]);r.push(l),this.cursor.columns=r}}else this.cursor.columns=e.json?e.json():new i().as(...e).json();return this.cursor.query=this.jobj(n),c?this.cursor.resource=this.jobj(c):this.cursor.resource={},this.cursor=this.cursor.resource,this},i.prototype.as=function(...e){if(Array.isArray(this.query)||(this.query=[]),Array.isArray(e[0]))if(e[1])for(var n=0;n<e.length;n++){const u=e[n];if(Array.isArray(u)&&u.length>=2){const l=u&&u.length>2?u[2]:!1,o=this.asv(u[0],u[1],l);this.query.push(o)}}else for(var n=0;n<e[0].length;n++){const r=this.asv(n,e[0][n]);this.query.push(r)}else if(typeof e[0]=="number"||typeof e[0]=="string"){if(e[2]&&typeof e[2]=="string")var c=this.asv(e[0],e[1],e[2]);else if(e[1]&&e[1]instanceof s)var c=this.asv(e[0],e[1]);else if(e[1]&&typeof e[1]=="string")if(e[1].substring(0,4)==="xsd:"||e[1].substring(0,4)==="xdd:")var c=this.asv(this.query.length,e[0],e[1]);else var c=this.asv(e[0],e[1]);else var c=this.asv(this.query.length,e[0]);this.query.push(c)}else typeof e[0]=="object"&&this.query.push(e[0].json?e[0].json():e[0]);return this},i.prototype.remote=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="QueryResource",this.cursor.source={"@type":"Source",url:e},this.cursor.format="csv",typeof opts<"u"&&(this.cursor.options=n),this},i.prototype.post=function(e,n,c="post"){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="QueryResource",this.cursor.source={"@type":"Source",[c]:e},this.cursor.format="csv",this.cursor.options=n,typeof n<"u"&&(this.cursor.options=n),this},i.prototype.delete_triple=function(e,n,c){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.triple(e,n,c),this.cursor["@type"]="DeleteTriple",this.updated()},i.prototype.add_triple=function(e,n,c){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.triple(e,n,c),this.cursor["@type"]="AddTriple",this.updated()},i.prototype.delete_quad=function(e,n,c,r){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.triple(e,n,c),r?(this.cursor["@type"]="DeleteTriple",this.cursor.graph=this.cleanGraph(r),this.updated()):this.parameterError("Delete Quad takes four parameters, the last should be a graph id")},i.prototype.add_quad=function(e,n,c,r){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.triple(e,n,c),r?(this.cursor["@type"]="AddTriple",this.cursor.graph=this.cleanGraph(r),this.updated()):this.parameterError("Add Quad takes four parameters, the last should be a graph id")},i.prototype.trim=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Trim",this.cursor.untrimmed=this.cleanDataValue(e),this.cursor.trimmed=this.cleanDataValue(n),this},i.prototype.eval=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Eval",this.cursor.expression=e.json?e.json():e,this.cursor.result=this.cleanArithmeticValue(n),this},i.prototype.plus=function(...e){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Plus",this.cursor.left=this.arop(e.shift()),e.length>1?this.cursor.right=this.jobj(new i().plus(...e.map(this.arop))):this.cursor.right=this.arop(e[0]),this},i.prototype.minus=function(...e){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Minus",this.cursor.left=this.arop(e.shift()),e.length>1?this.cursor.right=this.jobj(new i().minus(...e.map(this.arop))):this.cursor.right=this.arop(e[0]),this},i.prototype.times=function(...e){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Times",this.cursor.left=this.arop(e.shift()),e.length>1?this.cursor.right=this.jobj(new i().times(...e.map(this.arop))):this.cursor.right=this.arop(e[0]),this},i.prototype.divide=function(...e){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Divide",this.cursor.left=this.arop(e.shift()),e.length>1?this.cursor.right=this.jobj(new i().divide(...e.map(this.arop))):this.cursor.right=this.arop(e[0]),this},i.prototype.div=function(...e){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Div",this.cursor.left=this.arop(e.shift()),e.length>1?this.cursor.right=this.jobj(new i().div(...e.map(this.arop))):this.cursor.right=this.arop(e[0]),this},i.prototype.exp=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Exp",this.cursor.left=this.arop(e),this.cursor.right=this.arop(n),this},i.prototype.floor=function(e){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Floor",this.cursor.argument=this.arop(e),this},i.prototype.isa=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="IsA",this.cursor.element=this.cleanNodeValue(e),this.cursor.type=this.cleanNodeValue(n),this},i.prototype.like=function(e,n,c){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Like",this.cursor.left=this.cleanDataValue(e,"xsd:string"),this.cursor.right=this.cleanDataValue(n,"xsd:string"),c&&(this.cursor.similarity=this.cleanDataValue(c,"xsd:decimal")),this},i.prototype.less=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Less",this.cursor.left=this.cleanDataValue(e),this.cursor.right=this.cleanDataValue(n),this},i.prototype.greater=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Greater",this.cursor.left=this.cleanDataValue(e),this.cursor.right=this.cleanDataValue(n),this},i.prototype.opt=function(e){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Optional",this.addSubQuery(e),this},i.prototype.optional=i.prototype.opt,i.prototype.unique=function(e,n,c){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="HashKey",this.cursor.base=this.cleanDataValue(e,"xsd:string"),this.cursor.key_list=this.cleanDataValue(n),this.cursor.uri=this.cleanNodeValue(c),this},i.prototype.idgen=function(e,n,c){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="LexicalKey",this.cursor.base=this.cleanDataValue(e,"xsd:string"),this.cursor.key_list=this.dataValueList(n),this.cursor.uri=this.cleanNodeValue(c),this},i.prototype.idgenerator=i.prototype.idgen,i.prototype.upper=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Upper",this.cursor.mixed=this.cleanDataValue(e),this.cursor.upper=this.cleanDataValue(n),this},i.prototype.lower=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Lower",this.cursor.mixed=this.cleanDataValue(e),this.cursor.lower=this.cleanDataValue(n),this},i.prototype.pad=function(e,n,c,r){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Pad",this.cursor.string=this.cleanDataValue(e),this.cursor.char=this.cleanDataValue(n),this.cursor.times=this.cleanDataValue(c,"xsd:integer"),this.cursor.result=this.cleanDataValue(r),this},i.prototype.split=function(e,n,c){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Split",this.cursor.string=this.cleanDataValue(e),this.cursor.pattern=this.cleanDataValue(n),this.cursor.list=this.cleanDataValue(c),this},i.prototype.member=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Member",this.cursor.member=this.cleanObject(e),this.cursor.list=this.valueList(n),this},i.prototype.concat=function(e,n){if(typeof e=="string"){const c=e.split(/(v:)/),r=[];c[0]&&r.push(c[0]);for(let u=1;u<c.length;u+=2)if(c[u]&&c[u]==="v:"){const l=c[u+1].split(/([^\w_])/),o=l.shift();r.push(`v:${o}`);const y=l.join("");y&&r.push(y)}e=r}return Array.isArray(e)&&(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Concatenate",this.cursor.list=this.cleanDataValue(e,!0),this.cursor.result=this.cleanDataValue(n)),this},i.prototype.concatenate=i.prototype.concat,i.prototype.join=function(e,n,c){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Join",this.cursor.list=this.cleanDataValue(e),this.cursor.separator=this.cleanDataValue(n),this.cursor.result=this.cleanDataValue(c),this},i.prototype.sum=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Sum",this.cursor.list=this.cleanDataValue(e),this.cursor.result=this.cleanObject(n),this},i.prototype.start=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Start",this.cursor.start=e,this.addSubQuery(n)},i.prototype.limit=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Limit",this.cursor.limit=e,this.addSubQuery(n)},i.prototype.re=function(e,n,c){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Regexp",this.cursor.pattern=this.cleanDataValue(e),this.cursor.string=this.cleanDataValue(n),this.cursor.result=this.cleanDataValue(c),this},i.prototype.regexp=i.prototype.re,i.prototype.length=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Length",this.cursor.list=this.cleanDataValue(e),typeof vb=="number"?this.cursor.length=this.cleanObject(n,"xsd:nonNegativeInteger"):typeof vb=="string"&&(this.cursor.length=this.varj(n)),this},i.prototype.not=function(e){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Not",this.addSubQuery(e)},i.prototype.once=function(e){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Once",this.addSubQuery(e)},i.prototype.immediately=function(e){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Immediately",this.addSubQuery(e)},i.prototype.count=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Count",this.cursor.count=this.cleanObject(e),this.addSubQuery(n)},i.prototype.typecast=function(e,n,c){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Typecast",this.cursor.value=this.cleanObject(e),this.cursor.type=this.cleanNodeValue(n),this.cursor.result=this.cleanObject(c),this},i.prototype.cast=i.prototype.typecast,i.prototype.order_by=function(...e){if(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="OrderBy",this.cursor.ordering=[],!e||e.length===0)return this.parameterError("Order by must be passed at least one variables to order the query");const n=typeof e[e.length-1]=="object"&&e[e.length-1].json?e.pop():!1;for(let c=0;c<e.length;c++){let r;(typeof e[c]=="string"||e[c]instanceof s)&&e[c]!==""?r={"@type":"OrderTemplate",variable:this.rawVar(e[c]),order:"asc"}:e[c].length===2&&e[c][1]==="asc"?r={"@type":"OrderTemplate",variable:this.rawVar(e[c][0]),order:"asc"}:e[c].length===2&&e[c][1]==="desc"&&(r={"@type":"OrderTemplate",variable:this.rawVar(e[c][0]),order:"desc"}),r&&this.cursor.ordering.push(r)}return this.addSubQuery(n)},i.prototype.group_by=function(e,n,c,r){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="GroupBy",this.cursor.group_by=[],(typeof e=="string"||e instanceof s)&&(e=[e]),this.cursor.group_by=this.rawVarList(e),(typeof n=="string"||n instanceof s)&&(n=[n]),this.cursor.template=this.rawVarList(n),this.cursor.grouped=this.varj(c),this.addSubQuery(r)},i.prototype.true=function(){return this.cursor["@type"]="True",this},i.prototype.path=function(e,n,c,r){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Path",this.cursor.subject=this.cleanSubject(e),typeof n=="string"&&(n=this.compilePathPattern(n)),this.cursor.pattern=n,this.cursor.object=this.cleanObject(c),typeof r<"u"&&(this.cursor.path=this.varj(r)),this},i.prototype.dot=function(e,n,c){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Dot",this.cursor.document=this.expandValueVariable(e),this.cursor.field=this.cleanDataValue(n,"xsd:string"),this.cursor.value=this.expandValueVariable(c),this},i.prototype.size=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="Size",this.cursor.resource=this.cleanGraph(e),this.cursor.size=this.varj(n),this},i.prototype.triple_count=function(e,n){return this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="TripleCount",this.cursor.resource=this.cleanGraph(e),this.cursor.count=this.varj(n),this},i.prototype.type_of=function(e,n){return!e||!n?this.parameterError("type_of takes two parameters, both values"):(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="TypeOf",this.cursor.value=this.cleanObject(e),this.cursor.type=this.cleanSubject(n),this)},woqlQuery=i,woqlQuery}var woqlBuilder,hasRequiredWoqlBuilder;function requireWoqlBuilder(){if(hasRequiredWoqlBuilder)return woqlBuilder;hasRequiredWoqlBuilder=1;const h=requireWoqlQuery();requireTypedef();class s extends h{constructor(t){super(t)}}return s.prototype.star=function(a,t,i,e){return t=t||"v:Subject",i=i||"v:Predicate",e=e||"v:Object",a=a||!1,a?this.quad(t,i,e,a):this.triple(t,i,e)},s.prototype.all=function(a,t,i,e){return this.star(e,a,t,i)},s.prototype.string=function(a){return{"@type":"xsd:string","@value":String(a)}},s.prototype.boolean=function(a){return a=a||!1,this.literal(a,"boolean")},s.prototype.literal=function(a,t){return t=t.indexOf(":")===-1?`xsd:${t}`:t,{"@type":t,"@value":a}},s.prototype.iri=function(a){return{"@type":"NodeValue",node:a}},s.prototype.update_triple=function(a,t,i,e){const n=e||`v:AnyObject__${this.counter+=1}`;return this.and(new s().opt(new s().triple(a,t,n).delete_triple(a,t,n).not().triple(a,t,i)),new s().add_triple(a,t,i))},s.prototype.update_quad=function(a,t,i,e){const n=`v:AnyObject__${this.counter+=1}`;return this.and(new s().opt(new s().quad(a,t,n,e).delete_quad(a,t,n,e).not().quad(a,t,i,e)),new s().add_quad(a,t,i,e))},s.prototype.nuke=function(a){return a?this.quad("v:A","v:B","v:C",a).delete_quad("v:A","v:B","v:C",a):this.triple("v:A","v:B","v:C").delete_triple("v:A","v:B","v:C")},s.prototype.node=function(a,t){t=t||!1,t==="add_quad"?t="AddTriple":t==="delete_quad"?t="DeleteTriple":t==="add_triple"?t="AddTriple":t==="delete_triple"?t="DeleteTriple":(t==="quad"||t==="triple")&&(t="Triple"),t&&t.indexOf(":")===-1&&(t=t);const i={subject:a};return t&&(i.action=t),this._set_context(i),this},s.prototype.graph=function(a){return this._set_context({graph:a})},s.prototype._set_context=function(a){this.triple_builder_context||(this.triple_builder_context={});for(const t in a)this.triple_builder_context[t]=a[t];return this},s.prototype.insert=function(a,t,i){return i=i||(this.triple_builder_context?this.triple_builder_context.graph:!1),i?this.add_quad(a,"rdf:type",`@schema:${t}`,i):this.add_triple(a,"rdf:type",`@schema:${t}`)},woqlBuilder=s,woqlBuilder}var woqlLibrary,hasRequiredWoqlLibrary;function requireWoqlLibrary(){if(hasRequiredWoqlLibrary)return woqlLibrary;hasRequiredWoqlLibrary=1;const h=requireWoqlBuilder();/**
 * @license Apache Version 2
 * @module WOQLLibrary
 * @constructor WOQLLibrary
 * @description Library Functions to manage the commits graph
 * @example
 *  const woqlLib = WOQLLibrary()
 *  woqlLib.branches()
 *
 *  //or you can call this functions using WOQL Class
 *  WOQL.lib().branches()
 * */class s{constructor(){We(this,"default_schema_resource","schema/main");We(this,"default_commit_resource","_commits");We(this,"default_meta_resource","_meta");We(this,"masterdb_resource","_system");We(this,"empty","")}}return s.prototype.branches=function(){return new h().using("_commits").triple("v:Branch","rdf:type","@schema:Branch").triple("v:Branch","@schema:name","v:Name").opt().triple("v:Branch","@schema:head","v:Head").triple("v:Head","@schema:identifier","v:commit_identifier").triple("v:Head","@schema:timestamp","v:Timestamp")},s.prototype.commits=function(a="main",t=0,i=0,e=0){const n=new h().using("_commits");t&&n.limit(t),i&&n.start(i),n.select("v:Parent ID","v:Commit ID","v:Time","v:Author","v:Branch ID","v:Message");const c=[new h().triple("v:Branch","name",new h().string(a)).triple("v:Branch","head","v:Active Commit ID").path("v:Active Commit ID","parent*","v:Parent","v:Path").triple("v:Parent","timestamp","v:Time")];return e&&c.push(new h().less("v:Time",e)),c.push(new h().triple("v:Parent","identifier","v:Commit ID").triple("v:Parent","author","v:Author").triple("v:Parent","message","v:Message").opt().triple("v:Parent","parent","v:Parent ID")),n.and(...c)},s.prototype.previousCommits=function(a,t=10){return new h().using("_commits").limit(t).select("v:Parent ID","v:Message","v:Commit ID","v:Time","v:Author").and(new h().and(new h().triple("v:Active Commit ID","@schema:identifier",new h().string(a)),new h().path("v:Active Commit ID","@schema:parent+","v:Parent","v:Path"),new h().triple("v:Parent","@schema:identifier","v:Commit ID"),new h().triple("v:Parent","@schema:timestamp","v:Time"),new h().triple("v:Parent","@schema:author","v:Author"),new h().triple("v:Parent","@schema:message","v:Message"),new h().triple("v:Parent","@schema:parent","v:Parent ID"),new h().opt().triple("v:Parent","parent","v:Parent ID")))},s.prototype.first_commit=function(){return new h().using("_commits").select("v:Any Commit IRI").and(new h().triple("v:Branch","name",new h().string("main")).triple("v:Branch","head","v:Active Commit ID").path("v:Active Commit ID","parent*","v:Any Commit IRI","v:Path"),new h().triple("v:Any Commit IRI","@schema:identifier","v:Commit ID"),new h().triple("v:Any Commit IRI","@schema:author","v:Author"),new h().triple("v:Any Commit IRI","@schema:message","v:Message"),new h().not().triple("v:Any Commit IRI","@schema:parent","v:Parent IRI"))},woqlLibrary=s,woqlLibrary}var woql,hasRequiredWoql;function requireWoql(){if(hasRequiredWoql)return woql;hasRequiredWoql=1;const WOQLQuery=requireWoqlBuilder(),WOQLLibrary=requireWoqlLibrary(),{Vars,Var,Doc}=requireWoqlDoc();requireTypedef(),requireWoqlClient();/**
 * @license Apache Version 2
 * @module WOQL
 * @constructor WOQL
 * @description The WOQL object is a wrapper around the WOQLQuery object
 * Syntactic sugar to allow writing WOQL.triple()... instead of new WOQLQuery().triple()
 * Every function matches one of the public api functions of the woql query object
 */const WOQL={};return WOQL.using=function(h,s){return new WOQLQuery().using(h,s)},WOQL.comment=function(h,s){return new WOQLQuery().comment(h,s)},WOQL.select=function(...h){return new WOQLQuery().select(...h)},WOQL.distinct=function(...h){return new WOQLQuery().distinct(...h)},WOQL.and=function(...h){return new WOQLQuery().and(...h)},WOQL.read_object=function(h,s,a){return new WOQLQuery().read_document(h,s,a)},WOQL.read_document=function(h,s){return new WOQLQuery().read_document(h,s)},WOQL.insert_document=function(h,s){return new WOQLQuery().insert_document(h,s)},WOQL.update_document=function(h,s){return new WOQLQuery().update_document(h,s)},WOQL.delete_document=function(h){return new WOQLQuery().delete_document(h)},WOQL.or=function(...h){return new WOQLQuery().or(...h)},WOQL.from=function(h,s){return new WOQLQuery().from(h,s)},WOQL.into=function(h,s){return new WOQLQuery().into(h,s)},WOQL.triple=function(h,s,a){return new WOQLQuery().triple(h,s,a)},WOQL.added_triple=function(h,s,a){return new WOQLQuery().added_triple(h,s,a)},WOQL.removed_triple=function(h,s,a){return new WOQLQuery().removed_triple(h,s,a)},WOQL.quad=function(h,s,a,t){return new WOQLQuery().quad(h,s,a,t)},WOQL.added_quad=function(h,s,a,t){return new WOQLQuery().added_quad(h,s,a,t)},WOQL.removed_quad=function(h,s,a,t){return new WOQLQuery().removed_quad(h,s,a,t)},WOQL.sub=function(h,s){return new WOQLQuery().sub(h,s)},WOQL.subsumption=function(h,s){return new WOQLQuery().sub(h,s)},WOQL.eq=function(h,s){return new WOQLQuery().eq(h,s)},WOQL.equals=function(h,s){return new WOQLQuery().eq(h,s)},WOQL.substr=function(h,s,a,t,i){return new WOQLQuery().substr(h,s,a,t,i)},WOQL.substring=function(h,s,a,t,i){return new WOQLQuery().substr(h,s,a,t,i)},WOQL.get=function(h,s){return new WOQLQuery().get(h,s)},WOQL.put=function(h,s,a){return new WOQLQuery().put(h,s,a)},WOQL.as=function(h,s,a){return new WOQLQuery().as(h,s,a)},WOQL.remote=function(h,s){return new WOQLQuery().remote(h,s)},WOQL.post=function(h,s,a){return new WOQLQuery().post(h,s,a)},WOQL.delete_triple=function(h,s,a){return new WOQLQuery().delete_triple(h,s,a)},WOQL.delete_quad=function(h,s,a,t){return new WOQLQuery().delete_quad(h,s,a,t)},WOQL.add_triple=function(h,s,a){return new WOQLQuery().add_triple(h,s,a)},WOQL.add_quad=function(h,s,a,t){return new WOQLQuery().add_quad(h,s,a,t)},WOQL.trim=function(h,s){return new WOQLQuery().trim(h,s)},WOQL.evaluate=function(h,s){return new WOQLQuery().eval(h,s)},WOQL.eval=function(h,s){return new WOQLQuery().eval(h,s)},WOQL.plus=function(...h){return new WOQLQuery().plus(...h)},WOQL.minus=function(...h){return new WOQLQuery().minus(...h)},WOQL.times=function(...h){return new WOQLQuery().times(...h)},WOQL.divide=function(...h){return new WOQLQuery().divide(...h)},WOQL.div=function(...h){return new WOQLQuery().div(...h)},WOQL.exp=function(h,s){return new WOQLQuery().exp(h,s)},WOQL.floor=function(h){return new WOQLQuery().floor(h)},WOQL.isa=function(h,s){return new WOQLQuery().isa(h,s)},WOQL.like=function(h,s,a){return new WOQLQuery().like(h,s,a)},WOQL.less=function(h,s){return new WOQLQuery().less(h,s)},WOQL.greater=function(h,s){return new WOQLQuery().greater(h,s)},WOQL.opt=function(h){return new WOQLQuery().opt(h)},WOQL.optional=function(h){return new WOQLQuery().opt(h)},WOQL.unique=function(h,s,a){return new WOQLQuery().unique(h,s,a)},WOQL.idgen=function(h,s,a){return new WOQLQuery().idgen(h,s,a)},WOQL.idgenerator=function(h,s,a){return new WOQLQuery().idgen(h,s,a)},WOQL.upper=function(h,s){return new WOQLQuery().upper(h,s)},WOQL.lower=function(h,s){return new WOQLQuery().lower(h,s)},WOQL.pad=function(h,s,a,t){return new WOQLQuery().pad(h,s,a,t)},WOQL.split=function(h,s,a){return new WOQLQuery().split(h,s,a)},WOQL.member=function(h,s){return new WOQLQuery().member(h,s)},WOQL.concat=function(h,s){return new WOQLQuery().concat(h,s)},WOQL.join=function(h,s,a){return new WOQLQuery().join(h,s,a)},WOQL.sum=function(h,s){return new WOQLQuery().sum(h,s)},WOQL.start=function(h,s){return new WOQLQuery().start(h,s)},WOQL.limit=function(h,s){return new WOQLQuery().limit(h,s)},WOQL.re=function(h,s,a){return new WOQLQuery().re(h,s,a)},WOQL.regexp=function(h,s,a){return new WOQLQuery().re(h,s,a)},WOQL.length=function(h,s){return new WOQLQuery().length(h,s)},WOQL.not=function(h){return new WOQLQuery().not(h)},WOQL.once=function(h){return new WOQLQuery().once(h)},WOQL.immediately=function(h){return new WOQLQuery().immediately(h)},WOQL.count=function(h,s){return new WOQLQuery().count(h,s)},WOQL.typecast=function(h,s,a){return new WOQLQuery().typecast(h,s,a)},WOQL.cast=function(h,s,a){return new WOQLQuery().typecast(h,s,a)},WOQL.order_by=function(...h){return new WOQLQuery().order_by(...h)},WOQL.group_by=function(h,s,a,t){return new WOQLQuery().group_by(h,s,a,t)},WOQL.true=function(){return new WOQLQuery().true()},WOQL.path=function(h,s,a,t){return new WOQLQuery().path(h,s,a,t)},WOQL.size=function(h,s){return new WOQLQuery().size(h,s)},WOQL.triple_count=function(h,s){return new WOQLQuery().triple_count(h,s)},WOQL.type_of=function(h,s){return new WOQLQuery().type_of(h,s)},WOQL.star=function(h,s,a,t){return new WOQLQuery().star(h,s,a,t)},WOQL.all=function(h,s,a,t){return new WOQLQuery().all(h,s,a,t)},WOQL.node=function(h,s){return new WOQLQuery().node(h,s)},WOQL.insert=function(h,s,a){return new WOQLQuery().insert(h,s,a)},WOQL.graph=function(h){return new WOQLQuery().graph(h)},WOQL.nuke=function(h){return new WOQLQuery().nuke(h)},WOQL.query=function(){return new WOQLQuery},WOQL.json=function(h){return new WOQLQuery().json(h)},WOQL.lib=function(){return new WOQLLibrary},WOQL.string=function(h){return new WOQLQuery().string(h)},WOQL.literal=function(h,s){return new WOQLQuery().literal(h,s)},WOQL.date=function(h){return new WOQLQuery().literal(h,"xsd:date")},WOQL.datetime=function(h){return new WOQLQuery().literal(h,"xsd:dateTime")},WOQL.boolean=function(h){return new WOQLQuery().boolean(h)},WOQL.iri=function(h){return new WOQLQuery().iri(h)},WOQL.vars=function(...h){return h.map(s=>new Var(s))},WOQL.doc=function(h){return new Doc(h)},WOQL.client=function(h){return h&&(this._client=h),this._client},WOQL.Vars=function(...h){return new Vars(...h)},WOQL.emerge=function(auto_eval){const unemerged=["emerge","true","eval"];function _emerge_str(h){return`function ${h}(...args){
            return WOQL.${h}(...args)
        }`}const funcs=[_emerge_str("Vars")];for(const h in this)typeof this[h]=="function"&&unemerged.indexOf(h)===-1&&funcs.push(_emerge_str(h));const str=funcs.join(`;
`);return auto_eval&&eval(str),str},WOQL.update_triple=function(h,s,a,t){return new WOQLQuery().update_triple(h,s,a,t)},WOQL.update_quad=function(h,s,a,t){return new WOQLQuery().update_quad(h,s,a,t)},WOQL.value=function(h,s,a){return new WOQLQuery().value(h,s,a)},WOQL.link=function(h,s,a){return new WOQLQuery().link(h,s,a)},WOQL.dot=function(h,s,a){return new WOQLQuery().dot(h,s,a)},woql=WOQL,woql}var woqlClient,hasRequiredWoqlClient;function requireWoqlClient(){if(hasRequiredWoqlClient)return woqlClient;hasRequiredWoqlClient=1;const h=requireBrowser(),s=require$$0;requireTypedef();const a=require_const(),t=requireDispatchRequest(),i=requireErrorMessage(),e=requireConnectionConfig();requireWoql(),requireWoqlCore();/**
 * @license Apache Version 2
 * @class
 * @classdesc The core functionality of the TerminusDB javascript client is
 * defined in the WOQLClient class - in the woqlClient.js file. This class provides
 * methods which allow you to directly get and set all of the configuration and API
 * endpoints of the client. The other parts of the WOQL core - connectionConfig.js
 * and connectionCapabilities.js - are used by the client to store internal state - they
 * should never have to be accessed directly. For situations where you want to communicate
 * with a TerminusDB server API, the WOQLClient class is all you will need.
 */class n{constructor(u,l){We(this,"connectionConfig",null);We(this,"databaseList",[]);We(this,"organizationList",[]);this.connectionConfig=new e(u,l)}}n.prototype.setApiKey=function(r){const u=this.connectionConfig.localAuth()||{};u.key=r,u.type="apikey",this.connectionConfig.setLocalAuth(u)},n.prototype.customHeaders=function(r){if(r)this._customHeaders=r;else return this._customHeaders},n.prototype.CONST=a,n.prototype.copy=function(){const r=new n(this.server());return r.connectionConfig=this.connectionConfig.copy(),r.databaseList=this.databaseList,r},n.prototype.server=function(){return this.connectionConfig.serverURL()},n.prototype.api=function(){return this.connectionConfig.apiURL()},n.prototype.organization=function(r){return typeof r<"u"&&(this.connectionConfig.setOrganization(r),this.databases([])),this.connectionConfig.organization()},n.prototype.hasDatabase=async function(r,u){const l=`${this.connectionConfig.apiURL()}db/${r}/${u}`;return new Promise((o,y)=>{this.dispatch(a.HEAD,l).then(b=>{o(!0)}).catch(b=>{b.status===404?o(!1):y(b)})})},n.prototype.getDatabases=async function(){if(!this.connectionConfig.organization())throw new Error("You need to set the organization name");await this.getUserOrganizations();const r=this.userOrganizations().find(l=>l.name===this.connectionConfig.organization()),u=r&&r.databases?r.databases:[];return this.databases(u),u},n.prototype.databases=function(r){return r&&(this.databaseList=r),this.databaseList||[]},n.prototype.user=function(){return this.connectionConfig.user()},n.prototype.userOrganization=function(){return this.user()},n.prototype.databaseInfo=function(r){return this.databases().find(l=>l.name===r)||{}},n.prototype.db=function(r){return typeof r<"u"&&this.connectionConfig.setDB(r),this.connectionConfig.dbid},n.prototype.setSystemDb=function(){this.db(this.connectionConfig.system_db)},n.prototype.repo=function(r){return typeof r<"u"&&this.connectionConfig.setRepo(r),this.connectionConfig.repo()},n.prototype.checkout=function(r){return typeof r<"u"&&this.connectionConfig.setBranch(r),this.connectionConfig.branch()},n.prototype.ref=function(r){return typeof r<"u"&&this.connectionConfig.setRef(r),this.connectionConfig.ref()},n.prototype.localAuth=function(r){return typeof r<"u"&&this.connectionConfig.setLocalAuth(r),this.connectionConfig.localAuth()},n.prototype.local_auth=n.prototype.localAuth,n.prototype.remoteAuth=function(r){return typeof r<"u"&&this.connectionConfig.setRemoteAuth(r),this.connectionConfig.remoteAuth()},n.prototype.remote_auth=n.prototype.remoteAuth,n.prototype.author=function(){return this.connectionConfig.user()},n.prototype.set=function(r){this.connectionConfig.update(r)},n.prototype.resource=function(r,u){let l=`${this.organization()}/${this.db()}/`;if(r==="db")return l;if(r==="meta")return`${l}_meta`;if(l+=`${this.repo()}`,r==="repo")return l;if(r==="commits")return`${l}/_commits`;const o=u||(r==="ref"?this.ref():this.checkout());if(r==="branch")return`${l}/branch/${o}`;if(r==="ref")return`${l}/commit/${o}`},n.prototype.connect=function(r){return r&&this.connectionConfig.update(r),this.dispatch(a.GET,this.connectionConfig.apiURLInfo()).then(u=>u)},n.prototype.createDatabase=function(r,u,l){if(l&&this.organization(l),r)return this.db(r),this.dispatch(a.POST,this.connectionConfig.dbURL(),u);const o=`Create database parameter error - you must specify a valid database id  - ${r} is invalid`;return Promise.reject(new Error(i.getInvalidParameterMessage(a.CREATE_DATABASE,o)))},n.prototype.updateDatabase=function(r){const u=r.id||this.db();if(this.organization(r.organization||this.organization()),u)return this.db(u),this.dispatch(a.PUT,this.connectionConfig.dbURL(),r);const l=`Update database error - you must specify a valid database id - ${u} is invalid`;return Promise.reject(new Error(i.getInvalidParameterMessage(a.UPDATE_DATABASE,l)))},n.prototype.deleteDatabase=function(r,u,l){const o=u||this.organization();this.organization(o);const y=l?{force:!0}:null;if(r&&this.db(r))return this.dispatch(a.DELETE,this.connectionConfig.dbURL(),y);const b=`Delete database parameter error - you must specify a valid database id  - ${r} is invalid`;return Promise.reject(new Error(i.getInvalidParameterMessage(a.DELETE,b)))},n.prototype.getTriples=function(r){if(r)return this.dispatch(a.GET,this.connectionConfig.triplesURL(r));const u="Get triples parameter error - you must specify a valid graph type (inference, instance, schema), and graph id";return Promise.reject(new Error(i.getInvalidParameterMessage(a.GET,u)))},n.prototype.updateTriples=function(r,u,l){if(l&&u&&r){const y=this.generateCommitInfo(l);return y.turtle=u,this.dispatch(a.UPDATE_TRIPLES,this.connectionConfig.triplesURL(r),y)}const o="Update triples parameter error - you must specify a valid graph id, graph type, turtle contents and commit message";return Promise.reject(new Error(i.getInvalidParameterMessage(a.UPDATE_TRIPLES,o)))},n.prototype.insertTriples=function(r,u,l){if(l&&u&&r){const y=this.generateCommitInfo(l);return y.turtle=u,this.dispatch(a.INSERT_TRIPLES,this.connectionConfig.triplesURL(r),y)}const o="Update triples parameter error - you must specify a valid graph id, graph type, turtle contents and commit message";return Promise.reject(new Error(i.getInvalidParameterMessage(a.INSERT_TRIPLES,o)))},n.prototype.message=function(r,u){let l=this.api();return l+=u?this.api()+u:"message",this.dispatch(a.GET,l,r).then(o=>o)},n.prototype.action=function(r,u){const l=`${this.api()}action/${r}`;return this.dispatch(a.ACTION,l,u).then(o=>o)},n.prototype.info=function(){const r=`${this.api()}info`;return this.dispatch(a.GET,r).then(u=>u)};function c(r,u){if(r instanceof Array)for(let l=0;l<r.length;l+=1)c(r[l],u);else{const l=Object.keys(r);for(let o=0;o<l.length;o+=1)l[o]==="resource"&&r[l[o]]["@type"]&&r[l[o]]["@type"]==="QueryResource"&&u.push(r[l[o]]),(r[l[o]]instanceof Object||r[l[o]]instanceof Array)&&c(r[l[o]],u)}}return n.prototype.query=function(r,u,l,o="",y=!1){if(l=l||!1,u=u||"Commit generated with javascript client without message",r&&r.json&&(!r.containsUpdate()||u)){const A=r.containsUpdate()?this.generateCommitInfo(u):{};A.query=r.json();let j;const F=[];if(c(A.query,F),F.length>0){const oe=new h;F.forEach(re=>{const k=re.source.post.split("/").pop();oe.append("file",s.createReadStream(re.source.post)),re.source.post=k}),oe.append("payload",Buffer.from(JSON.stringify(A)),{filename:"body.json",contentType:"application/json"}),this.customHeaders(oe.getHeaders()),j=oe}else j=A;return l&&(A.all_witnesses=!0),typeof o=="string"&&o!==""&&this.customHeaders({"TerminusDB-Data-Version":o}),this.dispatch(a.WOQL_QUERY,this.connectionConfig.queryURL(),j,y)}let b="WOQL query parameter error";return r&&r.json&&r.containsUpdate()&&!u?b+=" - you must include a textual commit message to perform this update":b+=" - you must specify a valid WOQL Query",Promise.reject(new Error(i.getInvalidParameterMessage(a.WOQL_QUERY,b)))},n.prototype.branch=function(r,u){if(r){let o=this.ref()?{origin:`${this.organization()}/${this.db()}/${this.repo()}/commit/${this.ref()}`}:{origin:`${this.organization()}/${this.db()}/${this.repo()}/branch/${this.checkout()}`};return u&&u===!0&&(o={}),this.dispatch(a.BRANCH,this.connectionConfig.branchURL(r),o)}const l="Branch parameter error - you must specify a valid new branch id";return Promise.reject(new Error(i.getInvalidParameterMessage(a.BRANCH,l)))},n.prototype.squashBranch=function(r,u){if(u&&r){const o=this.generateCommitInfo(u);return this.dispatch(a.SQUASH_BRANCH,this.connectionConfig.squashBranchURL(r),o)}const l="Branch parameter error - you must specify a valid new branch id and a commit message";return Promise.reject(new Error(i.getInvalidParameterMessage(a.SQUASH_BRANCH,l)))},n.prototype.resetBranch=function(r,u){if(u&&r)return this.dispatch(a.RESET_BRANCH,this.connectionConfig.resetBranchUrl(r),{commit_descriptor:u});const l="Branch parameter error - you must specify a valid new branch id and a commit message";return Promise.reject(new Error(i.getInvalidParameterMessage(a.RESET_BRANCH,l)))},n.prototype.optimizeBranch=function(r){if(r)return this.dispatch(a.OPTIMIZE_SYSTEM,this.connectionConfig.optimizeBranchUrl(r),{});const u="Branch parameter error - you must specify a valid branch id";return Promise.reject(new Error(i.getInvalidParameterMessage(a.BRANCH,u)))},n.prototype.deleteBranch=function(r){if(r)return this.dispatch(a.DELETE,this.connectionConfig.branchURL(r));const u="Branch parameter error - you must specify a valid new branch id";return Promise.reject(new Error(i.getInvalidParameterMessage(a.BRANCH,u)))},n.prototype.pull=function(r){const u=this.prepareRevisionControlArgs(r);if(u&&u.remote&&u.remote_branch)return this.dispatch(a.PULL,this.connectionConfig.pullURL(),u);const l="Pull parameter error - you must specify a valid remote source and branch to pull from";return Promise.reject(new Error(i.getInvalidParameterMessage(a.PULL,l)))},n.prototype.fetch=function(r){return this.dispatch(a.FETCH,this.connectionConfig.fetchURL(r))},n.prototype.push=function(r){const u=this.prepareRevisionControlArgs(r);if(u&&u.remote&&u.remote_branch)return this.dispatch(a.PUSH,this.connectionConfig.pushURL(),u);const l="Push parameter error - you must specify a valid remote target";return Promise.reject(new Error(i.getInvalidParameterMessage(a.PUSH,l)))},n.prototype.rebase=function(r){const u=this.prepareRevisionControlArgs(r);if(u&&u.rebase_from)return this.dispatch(a.REBASE,this.connectionConfig.rebaseURL(),u);const l="Rebase parameter error - you must specify a valid rebase source to rebase from";return Promise.reject(new Error(i.getInvalidParameterMessage(a.REBASE,l)))},n.prototype.reset=function(r){return this.dispatch(a.RESET,this.connectionConfig.resetURL(),{commit_descriptor:r})},n.prototype.clonedb=function(r,u,l){l=l||this.user_organization(),this.organization(l);const o=this.prepareRevisionControlArgs(r);if(u&&o&&o.remote_url)return this.dispatch(a.CLONE,this.connectionConfig.cloneURL(u),o);const y="Clone parameter error - you must specify a valid id for the cloned database";return Promise.reject(new Error(i.getInvalidParameterMessage(a.BRANCH,y)))},n.prototype.dispatch=function(r,u,l,o,y=!1){return u?t(u,r,l,this.localAuth(),this.remoteAuth(),this.customHeaders(),o,y):Promise.reject(new Error(i.getInvalidParameterMessage(r,this.connectionConfig.connection_error)))},n.prototype.generateCommitInfo=function(r,u){return u||(u=this.author()),{commit_info:{author:u,message:r}}},n.prototype.generateCommitDescriptor=function(r){return{commit_descriptor:this.connectionConfig.commitDescriptorUrl(r)}},n.prototype.prepareRevisionControlArgs=function(r){return!r||typeof r!="object"?!1:(r.author||(r.author=this.author()),r)},n.prototype.addDocument=function(r,u,l,o="add a new document",y="",b=!1,A=!1){l&&this.db(l),typeof y=="string"&&y!==""&&this.customHeaders({"TerminusDB-Data-Version":y});const j=u||{};return j.author=this.author(),j.message=o,this.dispatch(a.POST,this.connectionConfig.documentURL(j),r,b,A)},n.prototype.queryDocument=function(r,u,l,o,y="",b=!1){return l&&this.db(l),o&&this.checkout(o),typeof y=="string"&&y!==""&&this.customHeaders({"TerminusDB-Data-Version":y}),this.dispatch(a.QUERY_DOCUMENT,this.connectionConfig.documentURL(u),r,b)},n.prototype.getDocument=function(r,u,l,o="",y=!1,b=void 0){u&&this.db(u),l&&this.checkout(l),typeof o=="string"&&o!==""&&this.customHeaders({"TerminusDB-Data-Version":o});let A;return b?A=b:r&&typeof r=="object"&&r.query&&(A={query:r.query},delete r.query),A?this.dispatch(a.QUERY_DOCUMENT,this.connectionConfig.documentURL(r),A,y):this.dispatch(a.GET,this.connectionConfig.documentURL(r),{},y)},n.prototype.updateDocument=function(r,u,l,o="update document",y="",b=!1,A=!1,j=!1){const F=u||{};return F.author=this.author(),F.message=o,j&&(F.create=j),l&&this.db(l),typeof y=="string"&&y!==""&&this.customHeaders({"TerminusDB-Data-Version":y}),this.dispatch(a.PUT,this.connectionConfig.documentURL(F),r,b,A)},n.prototype.deleteDocument=function(r,u,l="delete document",o="",y=!1){const b=r||{};let A=null;return Array.isArray(r.id)&&(A=r.id,delete b.id),b.author=this.author(),b.message=l,u&&this.db(u),typeof o=="string"&&o!==""&&this.customHeaders({"TerminusDB-Data-Version":o}),this.dispatch(a.DELETE,this.connectionConfig.documentURL(b),A,y)},n.prototype.getSchemaFrame=function(r,u){let l;return r&&(l={type:r}),u&&this.db(u),this.dispatch(a.GET,this.connectionConfig.jsonSchemaURL(l))},n.prototype.getSchema=function(r,u){const l={graph_type:"schema",as_list:!0};return this.getDocument(l,r,u)},n.prototype.getClasses=function(r){const u={graph_type:"schema",as_list:!0,type:"sys:Class"};return this.getDocument(u,r)},n.prototype.getEnums=function(r){const u={graph_type:"schema",as_list:!0,type:"sys:Enum"};return this.getDocument(u,r)},n.prototype.getClassDocuments=function(r){const u={graph_type:"schema",as_list:!0,type:"sys:Class"};return this.getDocument(u,r).then(l=>{let o=[];return l&&(o=l.filter(y=>!y["@subdocument"]&&!y["@abstract"])),o})},n.prototype.getBranches=function(r){const u={type:"Branch",as_list:!0},l=this.checkout();return this.getDocument(u,r,"_commits").then(o=>{const y={};return o&&o.forEach(b=>{y[b.name]=b}),this.checkout(l),y})},n.prototype.getCommitsLog=function(r=0,u=1){return this.dispatch(a.GET,`${this.connectionConfig.log()}?start=${r}&count=${u}`)},n.prototype.getPrefixes=function(r){return r&&this.db(r),this.dispatch(a.GET,this.connectionConfig.prefixesURL())},n.prototype.getUserOrganizations=function(){return this.dispatch(a.GET,this.connectionConfig.userOrganizationsURL()).then(r=>{const u=Array.isArray(r)?r:[];return this.userOrganizations(u),u})},n.prototype.userOrganizations=function(r){return r&&(this.organizationList=r),this.organizationList||[]},n.prototype.patch=function(r,u){if(typeof r!="object"||typeof u!="object"){const o='"before" or "after" parameter error - you must specify a valid before and after json document';return Promise.reject(new Error(i.getInvalidParameterMessage(a.PATCH,o)))}const l={before:r,patch:u};return this.dispatch(a.POST,`${this.connectionConfig.apiURL()}patch`,l).then(o=>o)},n.prototype.patchResource=function(r,u){if(!Array.isArray(r)){const o='"patch" parameter error - you must specify a valid patch document';return Promise.reject(new Error(i.getInvalidParameterMessage(a.PATCH,o)))}const l={patch:r,author:this.author(),message:u};return this.dispatch(a.POST,this.connectionConfig.patchURL(),l).then(o=>o)},n.prototype.getJSONDiff=function(r,u,l){if(typeof r!="object"||typeof u!="object"){const b='"before" or "after" parameter error - you must specify a valid before or after json document';return Promise.reject(new Error(i.getInvalidParameterMessage(a.GET_DIFF,b)))}const y={before:r,after:u,...typeof l>"u"?{}:l};return this.dispatch(a.POST,`${this.connectionConfig.apiURL()}diff`,y).then(b=>b)},n.prototype.getVersionObjectDiff=function(r,u,l,o){if(typeof u!="object"||typeof r!="string"||typeof l!="string"){const A="Parameters error - you must specify a valid jsonObject document, a valid branch or commit and a valid id";return Promise.reject(new Error(i.getInvalidParameterMessage(a.GET_DIFF,A)))}const b={after:u,before_data_version:r,id:l,...o||{}};return this.dispatch(a.POST,this.connectionConfig.diffURL(),b).then(A=>A)},n.prototype.getVersionDiff=function(r,u,l,o){if(typeof r!="string"||typeof u!="string"){const A="Error, you have to provide a beforeVersion and afterVersion input";return Promise.reject(new Error(i.getInvalidParameterMessage(a.GET_DIFF,A)))}const b={before_data_version:r,after_data_version:u,...o||{}};return l&&(b.document_id=l),this.dispatch(a.POST,this.connectionConfig.diffURL(),b).then(A=>A)},n.prototype.apply=function(r,u,l,o,y){const b=y||{},A=this.generateCommitInfo(l),j={before_commit:r,after_commit:u,...A,...b};return o&&(j.match_final_state=o),this.dispatch(a.POST,this.connectionConfig.applyURL(),j).then(F=>F)},n.prototype.getDocumentHistory=function(r,u){const l=u||{};return l.id=r,this.dispatch(a.GET,this.connectionConfig.docHistoryURL(l)).then(o=>o)},n.prototype.sendCustomRequest=function(r,u,l){return this.dispatch(r,u,l).then(o=>o)},woqlClient=n,woqlClient}var terminusRule,hasRequiredTerminusRule;function requireTerminusRule(){if(hasRequiredTerminusRule)return terminusRule;hasRequiredTerminusRule=1;const UTILS=requireUtils();/**
 * @file Terminus Rules
 * @license Apache Version 2
 * Abstract object to support applying matching rules to result sets and documents
 * sub-classes are FrameRule and WOQLRule - this just has common functions
 */function TerminusRule(){}TerminusRule.prototype.literal=function(h){return typeof h>"u"?this.pattern.literal:(this.pattern.literal=h,this)},TerminusRule.prototype.type=function(...h){return typeof h>"u"||h.length===0?this.pattern.type:(this.pattern.type=h,this)},TerminusRule.prototype.scope=function(h){return typeof h>"u"?this.pattern.scope:(this.pattern.scope=h,this)},TerminusRule.prototype.value=function(...h){return typeof h>"u"?this.pattern.value:(this.pattern.value=h,this)},TerminusRule.prototype.json=function(h){if(!h){const s={};return this.pattern&&(s.pattern=this.pattern.json()),this.rule&&(s.rule=this.rule),s}return h.pattern&&this.pattern.setPattern(h.pattern),h.rule&&(this.rule=h.rule),this};function TerminusPattern(h){}return TerminusPattern.prototype.setPattern=function(h){typeof h.literal<"u"&&(this.literal=h.literal),h.type&&(this.type=h.type),h.scope&&(this.scope=h.scope),h.value&&(this.value=h.value)},TerminusPattern.prototype.json=function(){const h={};return typeof this.literal<"u"&&(h.literal=this.literal),this.type&&(h.type=this.type),this.scope&&(h.scope=this.scope),this.value&&(h.value=this.value),h},TerminusPattern.prototype.testBasics=function(h,s){if(this.scope&&h&&this.scope!==h)return!1;if(this.type){const a=s["@type"];if(!a||!this.testValue(a,this.type))return!1}return!(typeof this.literal<"u"&&this.literal!==!(typeof s["@type"]>"u")||typeof this.value<"u"&&!this.testValue(s,this.value))},TerminusPattern.prototype.testValue=function(h,s){if(!h)return null;const a=h["@value"]?h["@value"]:h;if(typeof s=="function")return s(a);s&&!Array.isArray(s)&&(s=[s]);for(let t=0;t<s.length;t++){const i=s[t];if(typeof a=="string"){if(this.stringMatch(i,a))return!0}else if(typeof a=="number"&&this.numberMatch(i,a))return!0}return!1},TerminusPattern.prototype.unpack=function(h,s){let a="";if(s)for(let t=0;t<h.length;t++)typeof h[t]=="string"?a+=`"${h[t]}"`:a+=h[t],t<h.length-1&&(a+=", ");else a=`"${h.join('","')}"`;return a},TerminusPattern.prototype.IDsMatch=function(h,s){return UTILS.compareIDs(h,s)},TerminusPattern.prototype.classIDsMatch=function(h,s){return this.IDsMatch(h,s)},TerminusPattern.prototype.propertyIDsMatch=function(h,s){return this.IDsMatch(h,s)},TerminusPattern.prototype.rangeIDsMatch=function(h,s){return this.IDsMatch(h,s)},TerminusPattern.prototype.valuesMatch=function(h,s){return h===s},TerminusPattern.prototype.numberMatch=function(vala,valb){if(typeof vala=="string")try{return eval(valb+vala)}catch(h){return!1}return vala===valb},TerminusPattern.prototype.stringMatch=function(h,s){return h.substring(0,1)==="/"?new RegExp(h.substring(1)).test(s):h===s},terminusRule={TerminusRule,TerminusPattern},terminusRule}var woqlRule,hasRequiredWoqlRule;function requireWoqlRule(){if(hasRequiredWoqlRule)return woqlRule;hasRequiredWoqlRule=1;const h=requireTerminusRule(),s=requireUtils();/**
 * @file WOQL Rules
 * @license Apache Version 2
 * WOQL Rules support pattern matching on results of WOQL Queries
 */function a(){h.TerminusRule.call(this),this.pattern=new t}Object.setPrototypeOf(a.prototype,h.TerminusRule.prototype),a.prototype.setVariables=function(i){return i&&i.length&&(this.pattern.variables=s.removeNamespacesFromVariables(i),this.current_variable=this.pattern.variables[this.pattern.variables.length-1]),this},a.prototype.vars=function(...i){return this.setVariables(i)},a.prototype.v=function(i){return i?(this.current_variable=s.removeNamespaceFromVariable(i),this):this.current_variable},a.prototype.edge=function(i,e){if(this.scope("edge"),i){const n=s.removeNamespaceFromVariable(i);this.setVariables([n]),this.pattern.source=n}if(e){const n=s.removeNamespaceFromVariable(e);i||this.setVariables([n]),this.pattern.target=n}return this},a.prototype.rownum=function(i){return typeof i>"u"?this.pattern.rownum:(this.pattern.rownum=i,this)},a.prototype.in=function(...i){return this.current_variable&&(this.pattern.constraints||(this.pattern.constraints={}),this.pattern.constraints[this.current_variable]||(this.pattern.constraints[this.current_variable]=[]),this.pattern.constraints[this.current_variable].push(i)),this},a.prototype.filter=function(i){return this.current_variable&&(this.pattern.constraints||(this.pattern.constraints={}),this.pattern.constraints[this.current_variable]||(this.pattern.constraints[this.current_variable]=[]),this.pattern.constraints[this.current_variable].push(i)),this},a.prototype.matchRow=function(i,e,n,c){const r=[];for(let u=0;u<i.length;u++)c&&this.rule&&typeof this.rule[c]>"u"||i[u].pattern.matchRow(e,n)&&r.push(i[u]);return r},a.prototype.matchCell=function(i,e,n,c,r){const u=[];for(let l=0;l<i.length;l++)r&&this.rule&&typeof this.rule[r]>"u"||i[l].pattern.matchCell(e,n,c)&&u.push(i[l]);return u},a.prototype.matchColumn=function(i,e,n){const c=[];for(let r=0;r<i.length;r++){if(n&&this.rule&&typeof this.rule[n]===void 0)continue;const u=i[r];n&&u.rule[n]===void 0||u.pattern.matchColumn(e)&&c.push(u)}return c},a.prototype.matchNode=function(i,e,n,c,r){const u=[];for(let l=0;l<i.length;l++)r&&this.rule&&typeof this.rule[r]>"u"||i[l].pattern.matchNode(e,n,c)&&u.push(i[l]);return u},a.prototype.matchPair=function(i,e,n,c,r){const u=[];for(let l=0;l<i.length;l++)r&&this.rule&&typeof this.rule[r]>"u"||i[l].pattern.matchPair(e,n,c)&&u.push(i[l]);return u},a.prototype.matchEdge=a.prototype.matchPair;function t(i){h.TerminusPattern.call(this,i)}return Object.setPrototypeOf(t.prototype,h.TerminusPattern.prototype),t.prototype.prettyPrint=function(){let i=`${this.scope}('`;this.variables&&(i+=this.variables.join("', '")),i+="')",typeof this.literal<"u"&&(i+=`.literal(${this.literal})`),typeof this.type<"u"&&(i+=`.type(${this.unpack(this.type)})`),typeof this.value<"u"&&(i+=`.value(${this.unpack(this.value,!0)})`);for(const e in this.constraints){i+=`.v('${e}')`;for(let n=0;n<this.constraints[e].length;n++)typeof this.constraints[e][n]=="function"?i+=`.filter(${this.constraints[e][n]})`:i+=`.in(${json.unpack(this.constraints[e][n])})`}return i},t.prototype.matchRow=function(i,e){return!(typeof this.rownum<"u"&&typeof e<"u"&&!this.numberMatch(this.rownum,e)||this.scope&&this.scope!=="row"||!this.testVariableConstraints(i))},t.prototype.matchCell=function(i,e,n){return!(typeof this.rownum<"u"&&typeof n<"u"&&!this.numberMatch(this.rownum,n)||!this.testBasics("column",i[e])||this.variables&&this.variables.length&&this.variables.indexOf(e)===-1||!this.testVariableConstraints(i))},t.prototype.matchNode=function(i,e){return!(!this.testBasics("node",i[e])||this.variables&&this.variables.length&&this.variables.indexOf(e)===-1||!this.testVariableConstraints(i))},t.prototype.matchColumn=function(i){return!(this.scope&&this.scope!=="column"||this.variables&&this.variables.length&&this.variables.indexOf(i)===-1)},t.prototype.matchPair=function(i,e,n){return!(this.scope&&this.scope!=="edge"||this.source&&this.source!==e||this.target&&this.target!==n||!this.testVariableConstraints(i))},t.prototype.testVariableConstraints=function(i){for(const e in this.constraints)if(!this.testVariableConstraint(e,i[e]))return!1;return!0},t.prototype.testVariableConstraint=function(i,e){if(!this.constraints[i])return!0;for(let n=0;n<this.constraints[i].length;n++)if(!this.testValue(e,this.constraints[i][n]))return!1;return!0},t.prototype.setPattern=function(i){for(const e in i)this[e]=i[e]},t.prototype.json=function(){const i={};return this.scope&&(i.scope=this.scope),this.value&&(i.value=this.value),this.rownum&&(i.rownum=this.rownum),this.variables&&(i.variables=this.variables),this.literal&&(i.literal=this.literal),this.type&&(i.type=this.type),this.constraints&&(i.constraints=this.constraints),this.source&&(i.source=this.source),this.target&&(i.target=this.target),i},woqlRule={WOQLRule:a,WOQLPattern:t},woqlRule}var viewConfig,hasRequiredViewConfig;function requireViewConfig(){if(hasRequiredViewConfig)return viewConfig;hasRequiredViewConfig=1;const{WOQLRule:h}=requireWoqlRule();function s(){this.rules=[]}s.prototype.render=function(t){return t&&(this.view_render=t),this.view_render},s.prototype.renderer=function(t){return t&&(this.view_renderer=t),this.view_renderer},s.prototype.getRulesJSON=function(){const t=[];for(let i=0;i<this.rules.length;i++)t.push(this.rules[i].json());return t},s.prototype.getBasicJSON=function(){const t={};return this.view_render&&(t.render=this.view_render),this.view_renderer&&(t.renderer=this.view_renderer),this.vbindings&&(t.bindings=this.vbindings),t},s.prototype.loadBasicJSON=function(t){t.render&&(this.view_render=t.view_render),t.renderer&&(this.view_renderer=t.view_renderer),t.bindings&&(this.vbindings=t.bindings)},s.prototype.getBasicprettyPrint=function(){let t="";return typeof this.render()<"u"&&(t+=`view.render(${this.render()})
`),typeof this.renderer()<"u"&&(t+=`view.renderer('${this.renderer()}')
`),typeof this.bindings()<"u"&&(t+=`view.bindings('${this.bindings()}')
`),t},s.prototype.bindings=function(t){return typeof t<"u"&&(this.vbindings=t),this.vbindings};function a(){h.call(this),this.rule={}}return Object.setPrototypeOf(a.prototype,h.prototype),a.prototype.prettyPrint=function(t){let i="";return this.pattern&&(i=this.pattern.prettyPrint(t)),typeof this.color()<"u"&&(i+=`.color([${this.color().join(",")}])`),typeof this.hidden()<"u"&&(i+=`.hidden(${this.hidden()})`),typeof this.size()<"u"&&(i+=`.size('${this.size()}')`),typeof this.icon()<"u"&&(i+=`.icon(${JSON.stringify(this.icon())})`),typeof this.text()<"u"&&(i+=`.text(${JSON.stringify(this.text())})`),typeof this.border()<"u"&&(i+=`.border(${JSON.stringify(this.border())})`),typeof this.args()<"u"&&(i+=`.args(${JSON.stringify(this.args())})`),typeof this.renderer()<"u"&&(i+=`.renderer('${this.renderer()}')`),typeof this.render()<"u"&&(i+=`.render(${this.render()})`),typeof this.click()<"u"&&(i+=`.click(${this.click()})`),typeof this.hover()<"u"&&(i+=`.hover(${this.hover()})`),i},a.prototype.json=function(t){if(!t){const i={};return this.pattern&&(i.pattern=this.pattern.json()),i.rule=this.rule,i}return this.rule=t.rule||{},t.pattern&&this.pattern.setPattern(t.pattern),this},a.prototype.size=function(t){return typeof t>"u"?this.rule.size:(this.rule.size=t,this)},a.prototype.color=function(t){return typeof t>"u"?this.rule.color:(this.rule.color=t,this)},a.prototype.icon=function(t){return t?(this.rule.icon=t,this):this.rule.icon},a.prototype.text=function(t){return t?(this.rule.text=t,this):this.rule.text},a.prototype.border=function(t){return t?(this.rule.border=t,this):this.rule.border},a.prototype.renderer=function(t){return typeof t>"u"?this.rule.renderer:(this.rule.renderer=t,this)},a.prototype.render=function(t){return typeof t>"u"?this.rule.render:(this.rule.render=t,this)},a.prototype.click=function(t){return t?(this.rule.click=t,this):this.rule.click},a.prototype.hover=function(t){return t?(this.rule.hover=t,this):this.rule.hover},a.prototype.hidden=function(t){return typeof t>"u"?this.rule.hidden:(this.rule.hidden=t,this)},a.prototype.args=function(t){return typeof t>"u"?this.rule.args:(this.rule.args=t,this)},viewConfig={WOQLViewRule:a,ViewConfig:s},viewConfig}var woqlPaging={},hasRequiredWoqlPaging;function requireWoqlPaging(){if(hasRequiredWoqlPaging)return woqlPaging;hasRequiredWoqlPaging=1;const h=requireWoqlCore();return requireUtils(),h.prototype.getLimit=function(){return this.getPagingProperty("limit")},h.prototype.setLimit=function(s){return this.setPagingProperty("limit",s)},h.prototype.isPaged=function(s){s=s||this.query;for(const a of Object.keys(s)){if(a==="limit")return!0;if(this.paging_transitive_properties.indexOf(a)!==-1)return this.isPaged(s[a][s[a].length-1])}return!1},h.prototype.getPage=function(){if(this.isPaged()){const s=this.getLimit();if(this.hasStart()){const a=this.getStart();return parseInt(a/s)+1}return 1}return!1},h.prototype.setPage=function(s){const a=this.getLimit()*(s-1);return this.hasStart()?this.setStart(a):this.addStart(a),this},h.prototype.nextPage=function(){return this.setPage(this.getPage()+1)},h.prototype.firstPage=function(){return this.setPage(1)},h.prototype.previousPage=function(){const s=this.getPage()-1;return s>0&&this.setPage(s),this},h.prototype.setPageSize=function(s){return this.setPagingProperty("limit",s),this.hasStart()?this.setStart(0):this.addStart(0),this},h.prototype.hasSelect=function(){return!!this.getPagingProperty("select")},h.prototype.getSelectVariables=function(s){s=s||this.query;for(const a of Object.keys(s)){if(a==="select")return s[a].slice(0,s[a].length-1);if(this.paging_transitive_properties.indexOf(a)!==-1){const t=this.getSelectVariables(s[a][s[a].length-1]);if(typeof t<"u")return t}}},h.prototype.hasStart=function(){return typeof this.getPagingProperty("start")<"u"},h.prototype.getStart=function(){return this.getPagingProperty("start")},h.prototype.setStart=function(s){return this.setPagingProperty("start",s)},h.prototype.addStart=function(s){if(this.hasStart())this.setStart(s);else{const a={start:[s,this.query]};this.query=a}return this},h.prototype.getPagingProperty=function(s,a){a=a||this.query;for(const t of Object.keys(a)){if(t===s)return a[t][0];if(this.paging_transitive_properties.indexOf(t)!==-1){const i=this.getPagingProperty(s,a[t][a[t].length-1]);if(typeof i<"u")return i}}},h.prototype.setPagingProperty=function(s,a,t){t=t||this.query;for(const i of Object.keys(t))i===s?t[i][0]=a:this.paging_transitive_properties.indexOf(i)!==-1&&this.setPagingProperty(s,a,t[i][t[i].length-1]);return this},woqlPaging}var woqlResult,hasRequiredWoqlResult;function requireWoqlResult(){if(hasRequiredWoqlResult)return woqlResult;hasRequiredWoqlResult=1;const h=requireUtils(),s=requireWoql();requireWoqlPaging();/**
 * @module WOQLResult
 * @license Apache Version 2
 * Object representing the result of a WOQL Query
 * @param {object} results result JSON object as returned by WOQL query
 * @param {WOQLQuery} query the query object that generated the result
 * @param {object} [config] optional result configuration options object
 * [config.no_compress] by default all URLs are compressed where possible (v:X rather than http://.../variable/x) set to true to return non-compressed values
 * [config.context] specify the JSON-LD context to use for compressing results - by default
 * the query context will be used
 */function a(t,i,e){this.bindings=t?t.bindings:[],this.insert_count=t?t.inserts:0,this.delete_count=t?t.deletes:0,this.transaction_retry_count=t?t.transaction_retry_count:0,this.variable_names=t?t["api:variable_names"]:!1,this.query=i||s.query(),this.cursor=0}return a.prototype.formatter=function(t){t=t||this.query.getContext();const i=[];return this.bindings&&this.bindings.length>0&&this.bindings.forEach(e=>{const n={};Object.keys(e).forEach(c=>{const r=e[c];typeof r=="string"?r!=="system:unknown"?n[c]=h.shorten(r,t):n[c]="":n[c]=r["@value"]}),i.push(n)}),i},a.prototype.compress=function(t){if(t=t||this.query.getContext(),t)for(let i=0;i<this.bindings.length;i++)for(const e of Object.keys(this.bindings[i])){const n=h.shorten(e,t);let c=this.bindings[i][e];if(typeof this.bindings[i][e]=="string")c=h.shorten(this.bindings[i][e],t);else if(Array.isArray(this.bindings[i][e])){c=[];for(let r=0;r<this.bindings[i][e].length;r++){let u=this.bindings[i][e][r];if(typeof u=="string")u=h.shorten(u,t);else if(Array.isArray(u)){const l=[];for(let o=0;o<u.length;o++){let y=u[o];typeof y=="string"&&(y=h.shorten(y,t)),l.push(y)}u=l}c.push(u)}}delete this.bindings[i][e],this.bindings[i][n]=c}return this},a.prototype.hasBindings=function(){return!!(this.bindings&&this.count())},a.prototype.hasUpdates=function(){return this.inserts()>0||this.deletes()>0},a.prototype.getBindings=function(){return this.bindings},a.prototype.rows=function(){return this.bindings},a.prototype.getVariableList=function(){return this.variable_names?this.variable_names:this.bindings&&this.bindings[0]?Object.keys(this.bindings[0]):[]},a.prototype.count=function(){return this.bindings.length},a.prototype.inserts=function(){return this.insert_count},a.prototype.deletes=function(){return this.delete_count},a.prototype.first=function(){return this.cursor=0,this.bindings[0]},a.prototype.last=function(){return this.cursor=this.bindings.length-1,this.bindings[this.bindings.length-1]},a.prototype.next=function(){if(this.cursor>=this.bindings.length)return!1;const t=this.bindings[this.cursor];return this.cursor++,t},a.prototype.prev=function(){if(this.cursor>0)return this.cursor--,this.bindings[this.cursor]},a.prototype.sort=function(t,i){this.bindings.sort((e,n)=>this.compareValues(e[t],n[t],i))},a.prototype.compareValues=function(t,i,e="asc"){if(!t||!i)return 0;if(typeof t["@value"]<"u"&&typeof i["@value"]<"u"&&(t=t["@value"],i=i["@value"]),t>i)return e&&e==="asc"?1:-1;if(i>t)return e&&e==="asc"?-1:1},woqlResult=a,woqlResult}var woqlTable,hasRequiredWoqlTable;function requireWoqlTable(){if(hasRequiredWoqlTable)return woqlTable;hasRequiredWoqlTable=1;const h=requireTableConfig(),s=requireUtils(),{WOQLRule:a}=requireWoqlRule(),t=requireWoqlResult();requireWoqlClient();/**
 * @module WOQLTable
 * @license Apache Version 2
 * @param {WOQLClient} [client] we need an client if we do a server side pagination,sorting etc...
 * @param {WOQLTableConfig} [config]
 * @returns {WOQLTable}
 */function i(n,c){return this.client=n,this.config=c||new h,this}i.prototype.options=function(n){return this.config=n,this},i.prototype.setResult=function(n){return this.result=n,this},i.prototype.count=function(){return this.result.count()},i.prototype.first=function(){return this.result.first()},i.prototype.prev=function(){return this.result.prev()},i.prototype.next=function(){return this.result.next()},i.prototype.canAdvancePage=function(){return this.result.count()===this.result.query.getLimit()},i.prototype.canChangePage=function(){return this.canAdvancePage()||this.canRetreatPage()},i.prototype.canRetreatPage=function(){return this.result.query.getPage()>1},i.prototype.getPageSize=function(){return this.result.query.getLimit()},i.prototype.setPage=function(n){return this.result.query.setPage(n)},i.prototype.getPage=function(){return this.result.query.getPage()},i.prototype.setPageSize=function(n){return this.update(this.result.query.setPageSize(n))},i.prototype.nextPage=function(){return this.update(this.result.query.nextPage())},i.prototype.firstPage=function(){return this.update(this.result.query.firstPage())},i.prototype.previousPage=function(){return this.update(this.result.query.previousPage())},i.prototype.getColumnsToRender=function(){if(this.hasColumnOrder())var n=this.getColumnOrder();else var n=this.result.getVariableList();const c=this;return n?n.filter(r=>!c.hidden(r)):[]},i.prototype.getColumnHeaderContents=function(n){n=s.removeNamespaceFromVariable(n);const c=new a().matchColumn(this.config.rules,n,"header");if(c.length){const r=c[c.length-1].rule?c[c.length-1].rule.header:null;return typeof r=="string"?r:typeof r=="function"?r(n):r}return n[0]==="_"?" ":s.labelFromVariable(n)},i.prototype.hidden=function(n){colid=s.removeNamespaceFromVariable(n);const c=new a().matchColumn(this.config.rules,colid,"hidden");return c.length?c[c.length-1].rule.hidden:!1},i.prototype.update=function(n){return n.execute(this.client).then(c=>{const r=new t(c,n);return this.setResult(r),this.notify&&this.notify(r),r})},i.prototype.hasDefinedEvent=function(n,c,r,u,l){if(r==="row")var o=new a().matchRow(this.config.rules,n,l,u);else var o=new a().matchCell(this.config.rules,n,c,l,u);return!!(o&&o.length)},i.prototype.getDefinedEvent=function(n,c,r,u,l){if(r==="row")var o=new a().matchRow(this.config.rules,n,l,u);else var o=new a().matchCell(this.config.rules,n,c,l,u);if(Array.isArray(o)&&o.length>0){if(o.length===1)return o[0].rule[u];const y=o.find(b=>b.rule[u]!==void 0||b.rule[u]===!1);return y&&y.rule?y.rule[u]:void 0}},i.prototype.getRowClick=function(n){return this.getDefinedEvent(n,!1,"row","click")},i.prototype.uncompressed=function(n,c){return this.getDefinedEvent(n,c,"row","uncompressed")},i.prototype.getCellClick=function(n,c){return this.getDefinedEvent(n,c,"column","click")},i.prototype.getRowHover=function(n){return this.getDefinedEvent(n,!1,"row","hover")},i.prototype.getCellHover=function(n,c){return this.getDefinedEvent(n,c,"column","hover")},i.prototype.getColumnOrder=function(){return this.config.column_order()},i.prototype.bindings=function(){return this.config.bindings()},i.prototype.getColumnFilter=function(n){const c=new a().matchColumn(this.config.rules,n,"filter");return Array.isArray(c)&&c.length>0&&c[0].rule?c[0].rule.filter:null},i.prototype.getColumnDimensions=function(n){const c={},r=new a().matchColumn(this.config.rules,n,"width");r&&r.length&&r[r.length-1].rule.width&&(c.width=r[r.length-1].rule.width);const u=new a().matchColumn(this.config.rules,n,"maxWidth");u&&u.length&&(c.maxWidth=u[u.length-1].rule.maxWidth);const l=new a().matchColumn(this.config.rules,n,"minWidth");return l&&l.length&&(c.minWidth=l[l.length-1].rule.minWidth),c},i.prototype.hasColumnOrder=i.prototype.getColumnOrder,i.prototype.hasCellClick=i.prototype.getCellClick,i.prototype.hasRowClick=i.prototype.getRowClick,i.prototype.hasCellHover=i.prototype.getCellHover,i.prototype.hasRowHover=i.prototype.getRowHover,i.prototype.getRenderer=function(n,c,r){return this.getDefinedEvent(c,n,"column","renderer",r)},i.prototype.isSortableColumn=function(n){return!this.getDefinedEvent(!1,n,"column","unsortable")},i.prototype.isFilterableColumn=function(n){return this.getDefinedEvent(!1,n,"column","filterable")!==!1},i.prototype.renderValue=function(n,c,r,u){if(c&&c["@type"]){n.type=c["@type"];var l=new e(c["@value"],c["@type"])}else if(c&&c["@language"]){n.type="xsd:string";var l=new e(c["@value"],n.type)}else if(c&&typeof c=="string"){n.type="id";var l=new e(c,"id")}return l?n.renderValue(l):""};function e(n,c){this.datavalue=n==="system:unknown"?"":n,this.datatype=c}return e.prototype.value=function(n){return n?(this.datavalue=n,this):this.datavalue},i.prototype.getRendererForDatatype=function(n){return n&&n["@type"]?this.datatypes.getRenderer(n["@type"],n["@value"]):n&&n["@language"]?this.datatypes.getRenderer("xsd:string",n["@value"]):n&&typeof n=="string"?this.datatypes.getRenderer("id",n):!1},i.prototype.getSpecificRender=function(n,c){return this.getDefinedEvent(c,n,"column","render")},woqlTable=i,woqlTable}var tableConfig,hasRequiredTableConfig;function requireTableConfig(){if(hasRequiredTableConfig)return tableConfig;hasRequiredTableConfig=1;const h=requireViewConfig(),s=requireWoqlTable(),a=requireUtils();function t(){h.ViewConfig.call(this),this.type="table"}Object.setPrototypeOf(t.prototype,h.ViewConfig.prototype),t.prototype.create=function(e){return new s(e,this)},t.prototype.json=function(){const e=[];for(let r=0;r<this.rules.length;r++)e.push(this.rules[r].json());const n={};return typeof this.column_order()<"u"&&(n.column_order=this.column_order()),typeof this.pagesize()<"u"&&(n.pagesize=this.pagesize()),typeof this.renderer()<"u"&&(n.renderer=this.renderer()),typeof this.filter()<"u"&&(n.filter=this.filter()),typeof this.filterable()<"u"&&(n.filterable=this.filterable()),typeof this.pager()<"u"&&(n.pager=this.pager()),typeof this.bindings()<"u"&&(n.bindings=this.bindings()),typeof this.page()<"u"&&(n.page=this.page()),typeof this.changesize()<"u"&&(n.changesize=this.changesize()),{table:n,rules:e}},t.prototype.loadJSON=function(e,n){const c=[];if(Array.isArray(n))for(let r=0;r<n.length;r++){const u=new i;u.json(n[r]),c.push(u)}return this.rules=c,e?(typeof e.column_order<"u"&&this.column_order(...e.column_order),typeof e.pagesize<"u"&&this.pagesize(e.pagesize),typeof e.renderer<"u"&&this.renderer(e.renderer),typeof e.filter<"u"&&this.filter(e.filter),typeof e.filterable<"u"&&this.filterable(e.filterable),typeof e.bindings<"u"&&this.bindings(e.bindings),typeof e.pager<"u"&&this.pager(e.pager),typeof e.page<"u"&&this.page(e.page),typeof e.changesize<"u"&&this.changesize(e.changesize),this):this},t.prototype.prettyPrint=function(){let e=`view = View.table();
`;typeof this.column_order()<"u"&&(e+=`view.column_order('${this.column_order()}')
`),typeof this.pagesize()<"u"&&(e+=`view.pagesize(${this.pagesize()})
`),typeof this.renderer()<"u"&&(e+=`view.renderer('${this.renderer()}')
`),typeof this.pager()<"u"&&(e+=`view.pager(${this.pager()})
`),typeof this.page()<"u"&&(e+=`view.page(${this.page()})
`),typeof this.changesize()<"u"&&(e+=`view.changesize(${this.changesize()})
`);for(let n=0;n<this.rules.length;n++){const c=this.rules[n].prettyPrint();c&&(e+=`view.${c}
`)}return e},t.prototype.filterable=function(e){return!e&&e!==!1?this.tfilterable:(this.tfilterable=e,this)},t.prototype.filter=function(e){return e?(this.tfilter=e,this):this.tfilter},t.prototype.renderer=function(e){return e?(this.trenderer=e,this):this.trenderer},t.prototype.header=function(e){return typeof e>"u"?this.theader:(this.theader=e,this)},t.prototype.column_order=function(...e){return typeof e>"u"||e.length===0?this.order:(this.order=a.removeNamespacesFromVariables(e),this)},t.prototype.pager=function(e){return typeof e>"u"?this.show_pager:(this.show_pager=e,this)},t.prototype.changesize=function(e){return typeof e>"u"?this.change_pagesize:(this.change_pagesize=e,this)},t.prototype.pagesize=function(e){return typeof e>"u"?this.show_pagesize:(this.show_pagesize=e,this)},t.prototype.page=function(e){return typeof e>"u"?this.show_pagenumber:(this.show_pagenumber=e,this)},t.prototype.column=function(...e){const n=new i().scope("column");return n.setVariables(e),this.rules.push(n),n},t.prototype.row=function(){const e=new i().scope("row");return this.rules.push(e),e};function i(){h.WOQLViewRule.call(this)}return Object.setPrototypeOf(i.prototype,h.WOQLViewRule.prototype),i.prototype.header=function(e){return typeof e>"u"?this.rule.header:(this.rule.header=e,this)},i.prototype.filter=function(e){return typeof e>"u"?this.rule.filter:(this.rule.filter=e,this)},i.prototype.filterable=function(e){return typeof e>"u"?this.rule.filterable:(this.rule.filterable=e,this)},i.prototype.width=function(e){return typeof e>"u"?this.rule.width:(this.rule.width=e,this)},i.prototype.maxWidth=function(e){return typeof e>"u"?this.rule.maxWidth:(this.rule.maxWidth=e,this)},i.prototype.minWidth=function(e){return typeof e>"u"?this.rule.minWidth:(this.rule.minWidth=e,this)},i.prototype.unsortable=function(e){return typeof e>"u"?this.rule.unsortable:(this.rule.unsortable=e,this)},i.prototype.uncompressed=function(e){return typeof e>"u"?this.rule.uncompressed:(this.rule.uncompressed=e,this)},i.prototype.prettyPrint=function(){let e=h.WOQLViewRule.prototype.prettyPrint.apply(this);return typeof this.header()<"u"&&(e+=`.header(${this.header()})`),this.sortable()&&(e+=".sortable(true)"),typeof this.width()<"u"&&(e+=`.width(${this.width()})`),typeof this.maxWidth()<"u"&&(e+=`.maxWidth(${this.maxWidth()})`),typeof this.minWidth()<"u"&&(e+=`.minWidth(${this.minWidth()})`),e},tableConfig=t,tableConfig}var woqlChooser,hasRequiredWoqlChooser;function requireWoqlChooser(){if(hasRequiredWoqlChooser)return woqlChooser;hasRequiredWoqlChooser=1;const h=requireChooserConfig(),s=requireUtils(),{WOQLRule:a}=requireWoqlRule();function t(i,e){return this.client=i,this.config=e||new h,this.selected=!1,this.cursor=0,this}return t.prototype.options=function(i){return this.config=i,this},t.prototype.set=function(i){if(this.selected!==i){this.selected=i;const e=this.config.change;e&&e(i)}},t.prototype.setResult=function(i){this.result=i,this.choices=[];let e=0;const n=i.getVariableList();for(!this.config.values()&&n.length&&this.config.values(n[0]),this.config.sort()&&this.result.sort(this.config.sort(),this.config.direction());row=this.result.next();)row&&this.includeRow(row,this.result.cursor)&&this.choices.push(this.rowToChoice(row,e++));return this},t.prototype.includeRow=function(i,e){const n=new a().matchRow(this.config.rules,i,e,"hidden");for(let c=0;c<n.length;c++)if(n[c].rule.hidden)return!1;return!0},t.prototype.rowToChoice=function(i,e){const n={id:this.getRowID(i)};return n.label=this.getLabelFromBinding(i,e),n.title=this.getTitleFromBinding(i,e),n.selected=this.getSelectedFromBinding(i,e),n},t.prototype.getRowID=function(i){const e=i[this.config.values()];return e["@value"]?e["@value"]:e},t.prototype.getLabelFromBinding=function(i,e){const n=this.getSpecialRenderer(i,e,"label");if(n)return this.renderSpecial(n,i,e);if(this.config.labels()&&i[this.config.labels()]){let c=i[this.config.labels()];if(c["@value"]&&(c=c["@value"]),c!=="system:unknown")return c}return s.labelFromURL(this.getRowID(i))},t.prototype.getTitleFromBinding=function(i,e){const n=this.getSpecialRenderer(i,e,"title");if(n)return this.renderSpecial(n,i,e);if(this.config.titles()&&i[this.config.titles()]){let c=i[this.config.titles()];if(c["@value"]&&(c=c["@value"]),c!=="system:unknown")return c}return!1},t.prototype.getSelectedFromBinding=function(i,e){const n=new a().matchRow(this.config.rules,i,e,"selected");return n&&n.length?n[n.length-1].rule.selected:!1},t.prototype.render=function(){if(this.renderer)return this.renderer.render(this)},t.prototype.setRenderer=function(i){return this.renderer=i,this},t.prototype.getSpecialRenderer=function(i,e,n){const c=new a().matchRow(this.config.rules,i,e,n);for(let r=0;r<c.length;r++)if(c[r].rule[n])return c[r].rule[n];return!1},t.prototype.renderSpecial=function(i,e){if(i&&typeof i=="function")return i(e);if(i&&typeof i=="string")return i},t.prototype.count=function(){return this.result.count()},t.prototype.first=function(){return this.cursor=0,this.choices[this.cursor]},t.prototype.next=function(){const i=this.choices[this.cursor];return this.cursor++,i},t.prototype.prev=function(){if(this.cursor>0)return this.cursor--,this.choices[this.cursor]},woqlChooser=t,woqlChooser}var chooserConfig,hasRequiredChooserConfig;function requireChooserConfig(){if(hasRequiredChooserConfig)return chooserConfig;hasRequiredChooserConfig=1;const h=requireViewConfig(),s=requireWoqlChooser(),a=requireUtils();function t(){h.ViewConfig.call(this),this.type="chooser"}Object.setPrototypeOf(t.prototype,h.ViewConfig.prototype),t.prototype.create=function(e){return new s(e,this)},t.prototype.prettyPrint=function(){let e=`view = View.chooser();
`;e+=this.getBasicPrettyPrint(),typeof this.change()<"u"&&(e+=`view.change(${this.change()})
`),typeof this.show_empty()<"u"&&(e+=`view.show_empty('${this.show_empty()}')
`),typeof this.values()<"u"&&(e+=`view.values('${a.removeNamespaceFromVariable(this.values())}')
`),typeof this.labels()<"u"&&(e+=`view.labels('${a.removeNamespaceFromVariable(this.labels())}')
`),typeof this.titles()<"u"&&(e+=`view.titles('${a.removeNamespaceFromVariable(this.titles())}')
`),typeof this.sort()<"u"&&(e+=`view.sort(${this.sort()})
`),typeof this.direction()<"u"&&(e+=`view.direction('${this.direction()}')
`);for(let n=0;n<this.rules.length;n++)e+=`view.${this.rules[n].prettyPrint("chooser")}
`;return e},t.prototype.json=function(){const e=this.getBasicJSON();return typeof this.change()<"u"&&(e.change=this.change()),typeof this.show_empty()<"u"&&(e.show_empty=this.show_empty()),typeof this.values()<"u"&&(e.values=this.values()),typeof this.labels()<"u"&&(e.labels=this.labels()),typeof this.titles()<"u"&&(e.titles=this.titles()),typeof this.sort()<"u"&&(e.sort=this.sort()),typeof this.direction()<"u"&&(e.direction=this.direction()),{chooser:e,rules:this.getRulesJSON()}},t.prototype.loadJSON=function(e,n){const c=[];for(let r=0;r<n.length;r++){const u=new i;u.json(n[r]),c.push(u)}this.rules=c,this.loadBasicJSON(e),typeof e.change<"u"&&this.change(e.change),typeof e.show_empty<"u"&&this.show_empty(e.show_empty),typeof e.values<"u"&&this.values(e.values),typeof e.labels<"u"&&this.labels(e.labels),typeof e.titles<"u"&&this.titles(e.titles),typeof e.sort<"u"&&this.sort(e.sort),typeof e.direction<"u"&&this.direction(e.direction)},t.prototype.change=function(e){return typeof e<"u"?(this.onChange=e,this):this.onChange},t.prototype.show_empty=function(e){return typeof e<"u"?(this.placeholder=e,this):this.placeholder},t.prototype.rule=function(e){const n=new i().scope("row");return this.rules.push(n),e&&n.vars(e),n},t.prototype.values=function(e){return typeof e<"u"?(e.substring(0,2)==="v:"&&(e=e.substring(2)),this.value_variable=e,this):this.value_variable},t.prototype.labels=function(e){return e?(e.substring(0,2)==="v:"&&(e=e.substring(2)),this.label_variable=e,this):this.label_variable},t.prototype.titles=function(e){return e?(e.substring(0,2)==="v:"&&(e=e.substring(2)),this.title_variable=e,this):this.title_variable},t.prototype.sort=function(e){return e?(e.substring(0,2)==="v:"&&(e=e.substring(2)),this.sort_variable=e,this):this.sort_variable},t.prototype.direction=function(e){return e?(this.sort_direction=e,this):this.sort_direction};function i(e){h.WOQLViewRule.call(this,e)}return Object.setPrototypeOf(i.prototype,h.WOQLViewRule.prototype),i.prototype.label=function(e){return e?(this.rule.label=e,this):this.rule.label},i.prototype.title=function(e){return e?(this.rule.title=e,this):this.rule.title},i.prototype.values=function(e){return e?(this.rule.values=e,this):this.rule.values},i.prototype.selected=function(e){return typeof e<"u"?(this.rule.selected=e,this):this.rule.selected},i.prototype.prettyPrint=function(){let e=WOQLViewRule.prototype.prettyPrint.apply(this);return typeof this.selected()<"u"&&(e+=`.selected(${this.selected()})`),typeof this.label()<"u"&&(e+=`.label("${this.label()}")`),typeof this.title()<"u"&&(e+=`.title("${this.title()}")`),typeof this.values()<"u"&&(e+=`.values("${this.values()}")`),e},chooserConfig=t,chooserConfig}var woqlGraph,hasRequiredWoqlGraph;function requireWoqlGraph(){if(hasRequiredWoqlGraph)return woqlGraph;hasRequiredWoqlGraph=1;const h=requireGraphConfig(),s=requireUtils(),{WOQLRule:a}=requireWoqlRule();function t(i,e){this.client=i,this.config=e||new h,this.nodes=[],this.edges=[]}return t.prototype.options=function(i){return this.config=i,this},t.prototype.setResult=function(i){this.result=i,this.calculateVariableTypes(i)},t.prototype.calculateVariableTypes=function(){const i=this.result;if(i&&i.length)for(let e=0;e<i.length;e++)this.extractFromBinding(i[e],e);this.edges=this.combineEdges(this.edges),this.nodes=this.combineNodes(this.nodes)},t.prototype.extractFromBinding=function(i,e){if(this.includeRow(i,e)){const n=[];for(const c in i)typeof i[c]=="string"?i[c]&&i[c]!=="system:unknown"&&this.includeNode(c,i)&&n.push(c):i[c]["@value"]&&this.includeLiteralNode(c,i)&&n.push(c);if(n.length===0)return;this.createEdgesFromIDs(n,i);for(let c=0;c<n.length;c++){let r=i[n[c]];r=r["@value"]?r["@value"]:r,this.addAdornedNode(r,n[c],i)}}},t.prototype.addAdornedEdge=function(i,e,n,c,r){i=i["@value"]?i["@value"]:i,e=e["@value"]?e["@value"]:e;const u={type:"link",target:e,source:i,text:e},l=new a().matchEdge(this.config.rules,r,n,c);let o=!1;for(let y=0;y<l.length;y++){const{rule:b}=l[y];typeof b.hidden<"u"&&(o=b.hidden),b.size&&(u.size=s.getConfigValue(b.size,r)),b.text&&(u.text=s.getConfigValue(b.text,r)),b.color&&(u.color=s.getConfigValue(b.color,r)),b.icon&&(u.icon=s.getConfigValue(b.icon,r)),b.distance&&(u.distance=s.getConfigValue(b.distance,r)),b.arrow&&(u.arrow=s.getConfigValue(b.arrow,r)),b.symmetric&&(u.symmetric=s.getConfigValue(b.symmetric,r)),b.weight&&(u.weight=s.getConfigValue(b.weight,r))}o||this.edges.push(u)},t.prototype.addAdornedNode=function(i,e,n){const c={type:"node",id:i,nodetype:e},r=new a().matchNode(this.config.rules,n,e,i);for(let u=0;u<r.length;u++){const{rule:l}=r[u];l.size&&(c.radius=s.getConfigValue(l.size,n)),l.color&&(c.color=s.getConfigValue(l.color,n)),l.charge&&(c.charge=s.getConfigValue(l.charge,n)),l.collisionRadius&&(c.collisionRadius=s.getConfigValue(l.collisionRadius,n)),l.icon&&(c.icon=s.getConfigValue(l.icon,n)),l.text&&(c.text=s.getConfigValue(l.text,n)),l.border&&(c.border=s.getConfigValue(l.border,n))}c.text||(typeof n[e]=="string"?c.text=n[e]:n[e]["@value"]&&(c.text=n[e]["@value"])),this.nodes.push(c)},t.prototype.getLiteralOwner=function(i,e,n){const c=this.config.source();if(c&&n[c])return c;const r=this.config.edges();if(r){for(let u=0;u<r.length;u++)if(r[u][1]===e)return r[u][0];return!1}return i[0]},t.prototype.createEdgesFromIDs=function(i,e){if(i.length<2)return;const n=this.config.source(),c=this.config.edges();if(!n&&c&&c.length){for(var r=0;r<c.length;r++)i.indexOf(c[r][0])!==-1&&i.indexOf(c[r][1])!==-1&&this.addAdornedEdge(e[c[r][0]],e[c[r][1]],c[r][0],c[r][1],e);return}const u=n&&i.indexOf(n)!==-1?n:i[0];for(var r=0;r<i.length;r++)i[r]!==u&&this.addAdornedEdge(e[u],e[i[r]],u,i[r],e)},t.prototype.getEdges=function(){return this.edges},t.prototype.combineNodes=function(i){const e={};for(let n=0;n<i.length;n++){const c=i[n];if(this.nodes_referenced_by_edges.indexOf(c.id)!==-1)if(typeof e[c.id]>"u")e[c.id]=c;else for(const r in c)typeof e[c.id][r]>"u"&&(e[c.id][r]=c[r])}return Object.values(e)},t.prototype.combineEdges=function(i){this.nodes_referenced_by_edges=[];const e={};for(let r=0;r<i.length;r++){const u=i[r];if(typeof e[u.source]>"u"&&(e[u.source]={}),typeof e[u.source][u.target]>"u")e[u.source][u.target]=u;else for(var n in u)typeof e[u.source][u.target][n]>"u"&&(e[u.source][u.target][n]=u[n]);this.nodes_referenced_by_edges.indexOf(u.source)===-1&&this.nodes_referenced_by_edges.push(u.source),this.nodes_referenced_by_edges.indexOf(u.target)===-1&&this.nodes_referenced_by_edges.push(u.target)}const c=[];for(var n in e)for(const u in e[n])c.push(e[n][u]);return c},t.prototype.getNodes=function(){return this.nodes},t.prototype.includeNode=function(i,e){const n=new a().matchNode(this.config.rules,e,i,!1,"hidden");for(let c=0;c<n.length;c++)if(n[c].rule.hidden)return!1;return!0},t.prototype.includeLiteralNode=function(i,e){if(this.config.literals()===!1)return!1;const n=new a().matchNode(this.config.rules,e,i,!1,"hidden");for(let c=0;c<n.length;c++)if(n[c].rule.hidden)return!1;return!0},t.prototype.includeRow=function(i,e){const n=new a().matchRow(this.config.rules,i,e,"hidden");for(let c=0;c<n.length;c++)if(n[c].rule.hidden)return!1;return!0},woqlGraph=t,woqlGraph}var graphConfig,hasRequiredGraphConfig;function requireGraphConfig(){if(hasRequiredGraphConfig)return graphConfig;hasRequiredGraphConfig=1;const h=requireViewConfig(),s=requireWoqlGraph(),a=requireUtils();function t(){h.ViewConfig.call(this),this.type="graph"}Object.setPrototypeOf(t.prototype,h.ViewConfig.prototype),t.prototype.create=function(e){return new s(e,this)},t.prototype.literals=function(e){return typeof e<"u"?(this.show_literals=e,this):this.show_literals},t.prototype.source=function(e){return e?(this.source_variable=a.removeNamespaceFromVariable(e),this):this.source_variable},t.prototype.fontfamily=function(e){return typeof e<"u"?(this.fontfam=e,this):this.fontfam},t.prototype.show_force=function(e){return typeof e<"u"?(this.force=e,this):this.force},t.prototype.fix_nodes=function(e){return typeof e<"u"?(this.fixed=e,this):this.fixed},t.prototype.explode_out=function(e){return typeof e<"u"?(this.explode=e,this):this.explode},t.prototype.selected_grows=function(e){return typeof e<"u"?(this.bigsel=e,this):this.bigsel},t.prototype.width=function(e){return typeof e<"u"?(this.gwidth=e,this):this.gwidth},t.prototype.height=function(e){return typeof e<"u"?(this.gheight=e,this):this.gheight},t.prototype.edges=function(...e){if(e&&e.length){const n=[];for(let c=0;c<e.length;c++)n.push(a.removeNamespacesFromVariables(e[c]));return this.show_edges=n,this}return this.show_edges},t.prototype.edge=function(e,n){const c=new i().edge(e,n);return this.rules.push(c),c},t.prototype.node=function(...e){const n=new i;return e&&e.length?n.scope("node").setVariables(e):n.scope("row"),this.rules.push(n),n},t.prototype.loadJSON=function(e,n){const c=[];for(let r=0;r<n.length;r++){const u=new i;u.json(n[r]),c.push(u)}this.rules=c,typeof e.literals<"u"&&this.literals(e.literals),typeof e.source<"u"&&this.source(e.source),typeof e.fontfamily<"u"&&this.fontfamily(e.fontfamily),typeof e.show_force<"u"&&this.show_force(e.show_force),typeof e.fix_nodes<"u"&&this.fix_nodes(e.fix_nodes),typeof e.explode_out<"u"&&this.explode_out(e.explode_out),typeof e.selected_grows<"u"&&this.selected_grows(e.selected_grows),typeof e.width<"u"&&this.width(e.width),typeof e.height<"u"&&this.height(e.height),typeof e.edges<"u"&&this.edges(...e.edges)},t.prototype.prettyPrint=function(){let e=`view = View.graph();
`;if(typeof this.literals()<"u"&&(e+=`view.literals('${this.literals()}')
`),typeof this.source()<"u"&&(e+=`view.source('${a.removeNamespaceFromVariable(this.source())}')
`),typeof this.fontfamily()<"u"&&(e+=`view.fontfamily('${this.fontfamily()}')
`),typeof this.show_force()<"u"&&(e+=`view.show_force('${this.show_force()}')
`),typeof this.fix_nodes()<"u"&&(e+=`view.fix_nodes('${this.fix_nodes()}')
`),typeof this.explode_out()<"u"&&(e+=`view.explode_out('${this.explode_out()}')
`),typeof this.selected_grows()<"u"&&(e+=`view.selected_grows('${this.selected_grows()}')
`),typeof this.width()<"u"&&(e+=`view.width('${this.width()}')
`),typeof this.height()<"u"&&(e+=`view.height('${this.height()}')
`),typeof this.edges()<"u"){const c=this.edges(),r=[];for(var n=0;n<c.length;n++)r.push(`['${c[n][0]}, ${c[n][1]}']`);e+=`view.edges('${r.join(", ")}')
`}for(var n=0;n<this.rules.length;n++){const r=this.rules[n].prettyPrint();r&&(e+=`view.${r}
`)}return e},t.prototype.json=function(){const e=[];for(let r=0;r<this.rules.length;r++)e.push(this.rules[r].json());const n={};return typeof this.literals()<"u"&&(n.literals=this.literals()),typeof this.source()<"u"&&(n.source=this.source()),typeof this.fontfamily()<"u"&&(n.fontfamily=this.fontfamily()),typeof this.show_force()<"u"&&(n.show_force=this.show_force()),typeof this.fix_nodes()<"u"&&(n.fix_nodes=this.fix_nodes()),typeof this.explode_out()<"u"&&(n.explode_out=this.explode_out()),typeof this.selected_grows()<"u"&&(n.selected_grows=this.selected_grows()),typeof this.width()<"u"&&(n.width=this.width()),typeof this.height()<"u"&&(n.height=this.height()),typeof this.edges()<"u"&&(n.edges=this.edges()),{graph:n,rules:e}};function i(e){h.WOQLViewRule.call(this,e)}return Object.setPrototypeOf(i.prototype,h.WOQLViewRule.prototype),i.prototype.charge=function(e){return typeof e>"u"?this.rule.charge:(this.rule.charge=e,this)},i.prototype.collisionRadius=function(e){return typeof e>"u"?this.rule.collisionRadius:(this.rule.collisionRadius=e,this)},i.prototype.arrow=function(e){return e?(this.rule.arrow=e,this):this.rule.arrow},i.prototype.distance=function(e){return typeof e<"u"?(this.rule.distance=e,this):this.rule.distance},i.prototype.symmetric=function(e){return typeof e<"u"?(this.rule.symmetric=e,this):this.rule.symmetric},i.prototype.weight=function(e){return typeof e<"u"?(this.rule.weight=e,this):this.rule.weight},i.prototype.prettyPrint=function(){let e=h.WOQLViewRule.prototype.prettyPrint.apply(this);return typeof this.charge()<"u"&&(e+=`.charge('${this.charge()}')`),typeof this.distance()<"u"&&(e+=`.distance('${this.distance()}')`),typeof this.weight()<"u"&&(e+=`.weight('${this.weight()}')`),typeof this.symmetric()<"u"&&(e+=`.symmetric(${this.symmetric()})`),typeof this.collisionRadius()<"u"&&(e+=`.collisionRadius(${this.collisionRadius()})`),typeof this.arrow()<"u"&&(e+=`.arrow(${JSON.stringify(this.arrow())})`),e},graphConfig=t,graphConfig}var woqlChart={},hasRequiredWoqlChart;function requireWoqlChart(){return hasRequiredWoqlChart||(hasRequiredWoqlChart=1,requireChartConfig()),woqlChart}var chartConfig,hasRequiredChartConfig;function requireChartConfig(){if(hasRequiredChartConfig)return chartConfig;hasRequiredChartConfig=1;const h=requireViewConfig();requireWoqlChart();function s(){h.ViewConfig.call(this),this.type="chart"}Object.setPrototypeOf(s.prototype,h.ViewConfig.prototype),s.prototype.prettyPrint=function(){let t=`view = View.chart();
`;for(let i=0;i<this.rules.length;i++)t+=`view.${this.rules[i].prettyPrint()}
`;return typeof this.margin()<"u"&&(t+=`view.margin(${this.margin()})
`),typeof this.title()<"u"&&(t+=`view.title('${this.title()}')
`),typeof this.description()<"u"&&(t+=`view.description('${this.description()}')
`),typeof this.layout()<"u"&&(t+=`view.layout('${this.layout()}')
`),typeof this.align()<"u"&&(t+=`view.align('${this.align()}')
`),t+=this.getBasicPrettyPrint(),t},s.prototype.json=function(){const t={};return typeof this.margin()<"u"&&(t.margin=this.margin()),typeof this.title()<"u"&&(t.title=this.title()),typeof this.description()<"u"&&(t.description=this.description()),typeof this.layout()<"u"&&(t.layout=this.layout()),typeof this.align()<"u"&&(t.align=this.align()),{chart:t,rules:this.getRulesJSON()}},s.prototype.loadJSON=function(t,i){this.loadBasicJSON(t);const e=[];for(let n=0;n<i.length;n++){const c=new a;c.json(i[n]),e.push(c)}this.rules=e,typeof t.margin<"u"&&this.margin(t.margin),typeof t.title<"u"&&this.title(t.title),typeof t.description<"u"&&this.description(t.description),typeof t.layout<"u"&&this.layout(t.layout),typeof t.align<"u"&&this.align(t.align)},s.prototype.title=function(t){return typeof t>"u"?this._title:(this._title=t,this)},s.prototype.description=function(t){return t?(this._description=t,this):this._description},s.prototype.layout=function(t){return t?(this._layout=t,this):this._layout},s.prototype.align=function(t){return t?(this._align=t,this):this._align},s.prototype.margin=function(t){return t?(this._margin=t,this):this._margin},s.prototype.create=function(t){return new s},s.prototype.xAxis=function(...t){const i=new a().scope("XAxis");return i.setVariables(t),this.rules.push(i),i},s.prototype.legend=function(...t){const i=new a().scope("Legend");return i.setVariables(t),this.rules.push(i),i},s.prototype.yAxis=function(...t){const i=new a().scope("YAxis");return i.setVariables(t),this.rules.push(i),i},s.prototype.bar=function(...t){const i=new a().scope("Bar");return i.setVariables(t),this.rules.push(i),i},s.prototype.line=function(...t){const i=new a().scope("Line");return i.setVariables(t),this.rules.push(i),i},s.prototype.point=function(...t){const i=new a().scope("Point");return i.setVariables(t),this.rules.push(i),i},s.prototype.area=function(...t){const i=new a().scope("Area");return i.setVariables(t),this.rules.push(i),i};function a(){h.WOQLViewRule.call(this)}return Object.setPrototypeOf(a.prototype,h.WOQLViewRule.prototype),a.prototype.style=function(t,i){return i?(this.rule[t]=i,this):this.rule[t]},a.prototype.label=function(t){return t?(this.rule.label=t,this):this.rule.label},a.prototype.legendType=function(t){return t?(this.rule.legendType=t,this):this.rule.legendType},a.prototype.fillOpacity=function(t){return t||t===0?(this.rule.fillOpacity=t,this):this.rule.fillOpacity},a.prototype.fill=function(t){return t?(this.rule.fill=t,this):this.rule.fill},a.prototype.stroke=function(t){return t?(this.rule.stroke=t,this):this.rule.stroke},a.prototype.strokeWidth=function(t){return typeof t<"u"?(this.rule.strokeWidth=t,this):this.rule.strokeWidth},a.prototype.dot=function(t){return typeof t<"u"?(this.rule.dot=t,this):this.rule.dot},a.prototype.labelRotate=function(t){return t!==void 0?(this.rule.labelRotate=t,this):this.rule.labelRotate},a.prototype.padding=function(t){return t?(this.rule.padding=t,this):this.rule.padding},a.prototype.labelDateInput=function(t){return t?(this.rule.labelDateInput=t,this):this.rule.labelDateInput},a.prototype.labelDateOutput=function(t){return t?(this.rule.labelDateOutput=t,this):this.rule.labelDateOutput},a.prototype.stackId=function(t){return t?(this.rule.stackId=t,this):this.rule.stackId},a.prototype.type=function(t){return t?(this.rule.type=t,this):this.rule.type},a.prototype.axisDomain=function(t){return t?(this.rule.domain=t,this):this.rule.domain},a.prototype.colorEntry=function(t){return t?(this.rule.colorEntry=t,this):this.rule.colorEntry},a.prototype.customColors=function(t){return t?(this.rule.customColors=t,this):this.rule.customColors},a.prototype.payload=function(t){return t?(this.rule.payload=t,this):this.rule.payload},a.prototype.barSize=function(t){return t?(this.rule.barSize=t,this):this.rule.barSize},chartConfig=s,chartConfig}var woqlStream,hasRequiredWoqlStream;function requireWoqlStream(){if(hasRequiredWoqlStream)return woqlStream;hasRequiredWoqlStream=1;const h=requireStreamConfig();function s(a,t){return this.client=a,this.config=t||new h,this}return s.prototype.options=function(a){return this.config=a,this},s.prototype.setResult=function(a){this.result=a},woqlStream=s,woqlStream}var streamConfig,hasRequiredStreamConfig;function requireStreamConfig(){if(hasRequiredStreamConfig)return streamConfig;hasRequiredStreamConfig=1;const h=requireViewConfig(),s=requireWoqlStream();function a(){h.ViewConfig.call(this),this.type="stream"}Object.setPrototypeOf(a.prototype,h.ViewConfig.prototype),a.prototype.create=function(i){return new s(i,this)},a.prototype.row=function(){const i=new t().scope("row");return this.rules.push(i),i},a.prototype.template=function(i){return i?(this.mtemplate=i,this):this.mtemplate},a.prototype.prettyPrint=function(){let i=`view = View.stream();
`;typeof this.template()<"u"&&(i+=`view.template(${JSON.stringify(this.template())})
`);for(let e=0;e<this.rules.length;e++)i+=`view.${this.rules[e].prettyPrint()}
`;return i},a.prototype.loadJSON=function(i,e){const n=[];for(let c=0;c<e.length;c++){const r=new t;r.json(e[c]),n.push(r)}this.rules=n,i.template&&(this.mtemplate=i.template)},a.prototype.json=function(){const i=[];for(let c=0;c<this.rules.length;c++)i.push(this.rules[c].json());const e={};return this.mtemplate&&(e.template=this.mtemplate),{stream:e,rules:i}};function t(){h.WOQLViewRule.call(this)}return Object.setPrototypeOf(t.prototype,h.WOQLViewRule.prototype),t.prototype.template=function(i){return i?(this.rule.template=i,this):this.rule.template},streamConfig=a,streamConfig}var frameRule,hasRequiredFrameRule;function requireFrameRule(){if(hasRequiredFrameRule)return frameRule;hasRequiredFrameRule=1;const h=requireTerminusRule();/**
 * @file Frame Rule
 * @license Apache Version 2
 */function s(){h.TerminusRule.call(this),this.pattern=new a}Object.setPrototypeOf(s.prototype,h.TerminusRule.prototype),s.prototype.testRules=function(t,i,e){const n=[];if(t&&t.length)for(let c=0;c<t.length;c++)(!t[c].pattern||this.patternMatchesFrame(t[c].pattern,i))&&(n.push(t[c]),e&&typeof e=="function"&&e(i,t[c]));return n},s.prototype.patternMatchesFrame=function(t,i){return t.checkFrame?t.checkFrame(i):new a().setPattern(t).checkFrame(i)},s.prototype.property=function(...t){return!t||t.length===0?this.pattern.property:(this.pattern.property=t,this)},s.prototype.frame_type=function(...t){return!t||t.length===0?this.pattern.frame_type:(this.pattern.frame_type=t,this)},s.prototype.label=function(...t){return!t||t.length===0?this.pattern.label:(this.pattern.label=t,this)},s.prototype.subject=function(...t){return!t||t.length===0?this.pattern.subject:(this.pattern.subject=t,this)},s.prototype.subjectClass=function(...t){return!t||t.length===0?this.pattern.subjectClass:(this.pattern.subjectClass=t,this)},s.prototype.range=function(...t){return!t||t.length===0?this.pattern.range:(this.pattern.range=t,this)},s.prototype.value=function(...t){return!t||t.length===0?this.pattern.value:(this.pattern.value=t,this)},s.prototype.depth=function(t){return typeof t>"u"?this.pattern.depth:(this.pattern.depth=t,this)},s.prototype.index=function(...t){return!t||t.length===0?this.pattern.index:(this.pattern.index=t,this)},s.prototype.status=function(...t){return!t||t.length===0?this.pattern.status:(this.pattern.status=t,this)},s.prototype.parent=function(t){return t?(this.pattern.parent=t,this):this.pattern.parent},s.prototype.children=function(...t){if(typeof t>"u"||t.length===0)return this.pattern.children;typeof this.pattern.children>"u"&&(this.pattern.children=[]);for(let i=0;i<t.length;i++)this.pattern.children.push(t[i]);return this};function a(){h.TerminusPattern.call(this)}return Object.setPrototypeOf(a.prototype,h.TerminusPattern.prototype),a.prototype.setPattern=function(t){if(t.scope&&(this.scope=t.scope),typeof t.literal<"u"&&(this.literal=t.literal),typeof t.type<"u"&&(this.type=t.type),typeof t.label<"u"&&(this.label=t.label),typeof t.frame_type<"u"&&(this.frame_type=t.frame_type),typeof t.subject<"u"&&(this.subject=t.subject),typeof t.subjectClass<"u"&&(this.subjectClass=t.subjectClass),typeof t.range<"u"&&(this.range=t.range),typeof t.property<"u"&&(this.property=t.property),typeof t.value<"u"&&(this.value=t.value),typeof t.parent<"u"){let{parent:i}=t;typeof i.json!="function"&&(i=new a().setPattern(i)),this.parent=i}if(t.children){this.children=[];for(let i=0;i<t.children.length;i++){let e=t.children[i];typeof e.json!="function"&&(e=new a().setPattern(e)),this.children.push(e)}}typeof t.depth<"u"&&(this.depth=t.depth),typeof t.index<"u"&&(this.index=t.index),typeof t.status<"u"&&(this.status=t.status)},a.prototype.json=function(){const t={};if(typeof this.literal<"u"&&(t.literal=this.literal),this.type&&(t.type=this.type),this.scope&&(t.scope=this.scope),typeof this.value<"u"&&(t.value=this.value),typeof this.label<"u"&&(t.label=this.label),typeof this.frame_type<"u"&&(t.frame_type=this.frame_type),typeof this.subject<"u"&&(t.subject=this.subject),typeof this.subjectClass<"u"&&(t.subjectClass=this.subjectClass),typeof this.range<"u"&&(t.range=this.range),typeof this.property<"u"&&(t.property=this.property),typeof this.parent<"u"&&(t.parent=this.parent.json?this.parent.json():this.parent),typeof this.children<"u"){t.children=[];for(let i=0;i<this.children.length;i++)t.children.push(this.children[i].json?this.children[i].json():this.children[i])}return typeof this.depth<"u"&&(t.depth=this.depth),typeof this.index<"u"&&(t.index=this.index),typeof this.status<"u"&&(t.status=this.status),t},a.prototype.checkFrame=function(t){const i=this.getRendererType(t);return!(!i||this.scope&&this.scope!==i&&this.scope!=="*"||this.illegalRuleType(i)||this.frame_type&&!this.checkFrameType(i,t)||this.label&&!this.checkLabel(i,t)||this.subject&&!this.checkSubject(i,t)||this.subjectClass&&!this.checkSubjectClass(i,t)||this.property&&!this.checkProperty(i,t)||typeof this.depth<"u"&&!this.checkDepth(i,t)||this.range&&!this.checkRange(i,t)||typeof this.value<"u"&&!this.checkValue(i,t)||this.type&&!this.checkType(i,t)||typeof this.literal<"u"&&!this.checkLiteral(i,t)||this.parent&&!this.checkParent(i,t)||this.children&&this.children.length&&!this.checkChildren(i,t)||this.index&&!this.checkIndex(i,t)||this.status&&!this.checkStatus(i,t))},a.prototype.prettyPrint=function(){if(this.scope==="*")var t="all()";else var t=`${this.scope}()`;if(typeof this.literal<"u"&&(t+=`.literal(${this.literal})`),typeof this.type<"u"&&(t+=`.type(${this.unpack(this.type)})`),typeof this.range<"u"&&(t+=`.range(${this.unpack(this.range)})`),typeof this.frame_type<"u"&&(t+=`.frame_type(${this.unpack(this.frameType)})`),typeof this.label<"u"&&(t+=`.label(${this.unpack(this.label)})`),typeof this.subject<"u"&&(t+=`.subject(${this.unpack(this.subject)})`),typeof this.subjectClass<"u"&&(t+=`.subjectClass(${this.unpack(this.subjectClass)})`),typeof this.property<"u"&&(t+=`.property(${this.unpack(this.property)})`),typeof this.value<"u"&&(t+=`.value(${this.unpack(this.value,!0)})`),typeof this.children<"u"&&this.children.length>0){t+=`.children(
`;const i=this.children;for(let e=0;e<i.length;e++)t+=`View.pattern().${i[e].prettyPrint()}`,e<i.length-1&&(t+=","),t+=`
`;t+=")"}return typeof this.parent<"u"&&(t+=`.parent(View.pattern().${this.parent.prettyPrint()})`),typeof this.depth<"u"&&(t+=`.depth(${this.unpack(this.depth,!0)})`),typeof this.index<"u"&&(t+=`.index(${this.unpack(this.index,!0)})`),typeof this.status<"u"&&(t+=`.status(${this.unpack(this.status)})`),t},a.prototype.illegalRuleType=function(t){return!!(t==="data"&&this.children&&this.children.length||t==="object"&&this.range)},a.prototype.checkSubject=function(t,i){(typeof this.subject!="object"||!this.subject.length)&&(this.subject=[this.subject]);const e=i.subject();for(let n=0;n<this.subject.length;n++)if(this.IDsMatch(t[n],e))return!0;return!1},a.prototype.checkChildren=function(t,i){for(let e=0;e<this.children.length;e++){let n=!1;if(t==="object"){for(const c in i.properties)if(this.children[e].checkFrame(i.properties[c])){n=!0;continue}}else if(t==="property"){for(let c=0;c<=renderer.values.length;c++)if(this.children[c].checkFrame(i.values[c])){n=!0;continue}}if(!n)return!1}return!0},a.prototype.checkStatus=function(t,i){(typeof this.status!="object"||this.status.length===0)&&(this.status=[this.status]);for(let e=0;e<this.status.length;e++)if(this.status[e]==="updated"&&!i.isUpdated()||this.status[e]==="new"&&!i.isNew()||this.status[e]==="unchanged"&&i.isUpdated())return!1;return!0},a.prototype.checkDepth=function(t,i){return this.numberMatch(this.depth,i.depth())},a.prototype.checkParent=function(t,i){return this.parent.checkFrame(i.parent)},a.prototype.checkIndex=function(t,i){return t==="data"?this.index===i.index:!1},a.prototype.checkProperty=function(t,i){(typeof this.property!="object"||!this.property.length)&&(this.property=[this.property]);for(let e=0;e<this.property.length;e++)if(this.propertyIDsMatch(i.property(),this.property[e]))return!0;return!1},a.prototype.checkType=function(t,i){if(t==="object")var e=i.subjectClass();else var e=typeof i.range=="function"?i.range():i.range;return Array.isArray(this.type)||(this.type=[this.type]),this.type.indexOf(e)!==-1},a.prototype.checkLiteral=function(t,i){return t==="object"||t==="property"?!1:t==="data"?i.isDatatypeProperty():!0},a.prototype.checkValue=function(t,i){(typeof this.value!="object"||!this.value.length)&&(this.value=[this.value]);for(let e=0;e<this.value.length;e++)if(t==="data"){if(this.valuesMatch(i.get(),this.value[e]))return!0}else if(t==="property"){for(let n=0;n<=i.values.length;n++)if(this.getRendererType(i.values[e])==="data"&&this.valuesMatch(i.values[e].get(),this.value[e]))return!0}else if(t==="object"){for(const n in i.properties)if(this.checkValue(this.getRendererType(i.properties[n]),i.properties[n]))return!0}return!1},a.prototype.checkRange=function(t,i){(typeof this.range!="object"||!this.range.length)&&(this.range=[this.range]);for(let e=0;e<this.range.length;e++)if(this.rangeIDsMatch(i.range(),this.range[e]))return!0;return!1},a.prototype.checkSubjectClass=function(t,i){(typeof this.subjectClass!="object"||!this.subjectClass.length)&&(this.subjectClass=[this.subjectClass]);const e=i.subjectClass();for(let n=0;n<this.subjectClass.length;n++)if(this.classIDsMatch(this.subjectClass[n],e))return!0;return!1},a.prototype.checkFrameType=function(t,i){if(t==="object")return this.frame_type.indexOf("object")!==-1;if(t==="data"&&i.frame)return this.frame_type.indexOf(i.frame.ftype())!==-1;if(t==="property")return!1},a.prototype.checkLabel=function(t,i){if(typeof i.getLabel!="function")return console.log(new Error("Rule passed to check label with broken renderer object - no getLabel")),!1;for(let e=0;e<this.label.length;e++)if(this.stringMatch(this.label[e],i.getLabel()))return!0;return!1},a.prototype.getRendererType=function(t){return t.isProperty()?"property":t.isObject()?"object":t.isData()?"data":t.renderer_type?t.renderer_type:(console.log(t,new Error(`frame configuration passed non-renderer type ${t.constructor.name}`)),!1)},frameRule={FrameRule:s,FramePattern:a},frameRule}var objectFrame,hasRequiredObjectFrame;function requireObjectFrame(){if(hasRequiredObjectFrame)return objectFrame;hasRequiredObjectFrame=1;const h=requireUtils(),{FrameRule:s}=requireFrameRule(),a=requireWoql();/**
 * @file Javascript Terminus Document Classes
 * @license Apache Version 2
 * Helper classes for accessing documents returned by the Terminus DB API programmatically
 *
 * @example
 * let doc = new TerminusDocument(client);
 *
 * //These set the objects document property and return promises:
 *
 * doc.loadDocument(URL).then(() => console.log(this.document));
 * doc.loadComplete(URL, CLS).then(() => console.log(this.document))
 * doc.loadSchema(cls).then(() => console.log(this.document))
 *
 * //These just set the object's document property
 * doc.loadJSON(json_frames, cls) //console.log(this.document)
 * doc.loadDataFrames(json_frames, cls)
 * doc.loadClassFrames(json_frames, cls)
 * @example
 *
 * @description Represents a frame for programmatic access to object frame,
 * anywhere within a document
 * Recursive data structure where this.children contains an indexed array of object frames
 * and this.dataframes contains a property indexed array of data frames
 * Every object frame carries a reference to its classframe
 * This gives us instructions as to how to create new frames according to the schema
 * After that it's turtles all the way down.
 * @param cls - ID of the class (URL)
 * @param classframe - an array of frames representing a class
 * @param archetypes list of class frames
 * @param parent parent object
 * @returns
 */function t(r,u,l,o){this.empty(),this.cls=h.unshorten(r),l&&typeof l=="object"&&this.loadClassFrames(l),u&&typeof u=="object"&&Object.keys(u).length?(this.originalDocument=u,this.loadJSONLDDocument(u)):this.originalDocument=!1,this.parent=o,this.newDoc=!1}t.prototype.loadClassFrames=function(r){for(let u=0;u<r.length;u+=1){r[u]["@context"]&&(this.jsonld_context=r[u]["@context"]);const l=new n(r[u],this);if(l.isValid()){if(this.classframes||(this.classframes={}),this.classframes[r[u].property]=l,l.isObject()&&this.properties[r[u].property])for(let o=0;o<this.properties[r[u].property].values.length;o+=1)this.properties[r[u].property].values[o].loadClassFrames(r[u].frame)}else console.log("Invalid classframe",l)}return this},t.prototype.hasSchema=function(){return!h.empty(this.classframes)},t.prototype.loadJSONLDDocument=function(r){if(typeof r!="object")return;const u=h.json_unshorten(r);this.originalDocument||(this.originalDocument=u),!this.subjid&&u["@id"]&&(this.subjid=h.unshorten(u["@id"])),u["@context"]&&(this.jsonld_context=u["@context"]);for(const l in u){if(l[0]==="@"||typeof u[l]=="object"&&Object.keys(u[l]).length===0)continue;let o=this.getPropertyClassFrame(l,u);o&&o.isClassChoice()?o||console.log(`no choice frame ${u[l]["@type"]}`):o&&o.isLogic()&&(o=o.getChosenFrame(u[l])),o&&(typeof this.properties[l]>"u"&&(this.properties[l]=new i(l,o,this)),this.properties[l].addJSONLDDocument(u[l]))}return this},t.prototype.getAsFrame=function(r,u){if(r=h.unshorten(r),this.parentframe)return this.parentframe;const l={type:"objectProperty",property:r};l.range=this.cls,l.domain=u.cls,l.domainValue=u.subjid,l.frame=[];for(const o of Object.keys(this.properties))l.frame=l.frame.concat(l.frame,this.properties[o].getAsFrames());return l},t.prototype.getAsFrames=function(r,u){let l=[];for(const o of Object.keys(this.properties))l=l.concat(l,this.properties[o].getAsFrames());return l},t.prototype.empty=function(){this.properties={},this.restrictions={},this.subjid=!1,this.cls=!1},t.prototype.reset=function(r){if(r){r=h.unshorten(r);const u=[];for(let l=0;l<this.originalFrames.length;l+=1)this.originalFrames[l].property===r&&u.push(this.originalFrames[l]);this.properties[r]&&(this.properties[r]=[]),this.loadDataFrames(u)}else this.restrictions={},this.properties={},this.loadDataFrames(this.originalFrames)},t.prototype.clear=function(){for(const r of Object.keys(this.properties))this.properties[r].clear();return this},t.prototype.mfilter=function(r,u){new s().testRules(r,this,u);for(const l of Object.keys(this.properties))this.properties[l].mfilter?this.properties[l].mfilter(r,u):console.log(l,this.properties[l]);return this},t.prototype.getPropertyClassFrame=function(r,u){if(typeof r=="object")return new n(r);if(r=h.unshorten(r),this.classframes&&typeof this.classframes=="object"&&typeof this.classframes[r]=="object")return this.classframes[r];if(u){const l=new n;return l.loadFromJSONLD(u,r),l}return this.properties[r]?new n(this.properties[r].values[0]):!1},t.prototype.getProperties=function(r){if(r==="filled"||!this.classframes)return Object.keys(this.properties);if(r==="missing"){const u=Object.keys(this.properties).map(y=>h.unshorten(y)),l=Object.keys(this.classframes).map(y=>h.unshorten(y)),o=[];for(let y=0;y<l.length;y++)u.indexOf(l[y])===-1&&o.indexOf(l[y])===-1&&o.push(l[y]);return o}return Object.keys(this.classframes)},t.prototype.getMissingPropertyList=function(){const r=this.getProperties("missing"),u=[];for(let o=0;o<r.length;o++){const y=this.getPropertyClassFrame(r[o]);if(y)var l={label:y.getLabel(),value:r[o]};else var l={label:r[o],value:r[o]};u.push(l)}return u},t.prototype.getPossibleContainedClasses=function(){const r=[];function u(l){l.type&&l.type==="class_choice"&&u(l.operands),Array.isArray(l)||(l=[l]);for(let o=0;o<l.length;o++)l[o].domain&&r.indexOf(l[o].domain)===-1&&r.push(l[o].domain),l[o].frame&&u(l[o].frame)}return u(Object.values(this.classframes)),r},t.prototype.getDocumentLinks=function(){const r=[],u=this.getProperties("filled");for(let l=0;l<u.length;l++){const o=this.properties[u[l]];for(let y=0;y<o.values.length;y++){const b=o.values[y];if(b.isObject()&&b.getDocumentLinks){const A=b.getDocumentLinks();for(let j=0;j<A.length;j++)r.indexOf(A[j])===-1&&r.push(A[j])}else if(b.isDocument()){const A=b.get();r.indexOf(A)===-1&&r.push(A)}}}return r},t.prototype.getFilledPropertyList=function(){const r=this.getProperties("filled"),u=[];for(let o=0;o<r.length;o++){const y=this.getPropertyClassFrame(r[o]);if(y)var l={label:y.getLabel(),value:r[o]};else var l={label:r[o],value:r[o]};u.push(l)}return u},t.prototype.fillFromSchema=function(r){r&&(this.subjid=r),r=r||h.genBNID(`${h.urlFragment(this.cls)}_`);const u={};if(this.classframes)for(const l of Object.keys(this.classframes)){const o=this.getPropertyClassFrame(l);u[l]=new i(l,o,this),u[l].fillFromSchema(r)}this.properties=u,this.originalFrames=[];for(const l of Object.keys(this.properties))this.originalFrames.push(this.properties[l].getAsFrames());return this},t.prototype.clone=function(r){const u={},l=new t(this.cls,!1,!1,this.parent);l.classframes=this.classframes,l.subjid=r;for(const o of Object.keys(this.properties))u[o]=this.properties[o].clone();return l.properties=u,l},t.prototype.getChild=function(r,u){let l=this.getProperty(u);for(let o=0;o<l.values.length;l++)if(l.values[o].isObject()&&l.values[o].subject===r)return l.values[o];if(!u){for(const o of Object.keys(this.properties))for(let y=0;y<this.properties[o].values.length;y+=1)if(this.properties[o].values[y].subject()===r)return this.properties[o].values[y]}return!1},t.prototype.addProperty=function(r,u){typeof r!="object"&&(r=h.unshorten(r));const l=this.getPropertyClassFrame(r);let o=!1;if(l){const b=new i(r,l,this);if(l.isObject()){l.isClassChoice()||(o=l.createEmpty(h.genBNID(`${h.urlFragment(l.range)}_`))),u&&(o=l.createEmptyChoice(u,h.genBNID(`${h.urlFragment(u)}_`)));const A=l.getClassChoices();A&&A.length&&(o=l.createEmptyChoice(A[0],h.genBNID(`${h.urlFragment(A[0])}_`)))}else o=l.createEmpty();if(o&&b.addValueFrame(o),typeof this.properties[r]>"u"){if(typeof r=="object")var y=r.property;else var y=r;this.properties[y]=b}return b.status="new",b}return!1},t.prototype.addPropertyValue=function(r,u){return r=h.unshorten(r),this.properties[r]?this.properties[r].addValue(u):null},t.prototype.removeProperty=function(r){r=h.unshorten(r),typeof this.properties[r]<"u"&&delete this.properties[r]},t.prototype.removePropertyValue=function(r,u,l){r=h.unshorten(r);const o=this.properties[r];o.removeValue(u,l),o.values.length===0&&this.removeProperty(r)},t.prototype.error=function(r){this.errors||(this.errors=[]),this.errors.push({type:"Internal Object Frame Error",msg:r})},t.prototype.extract=function(){const r={};for(const l in this.properties){const o=this.properties[l].extract();h.empty(o)||(typeof r[l]>"u"&&(r[l]=[]),r[l]=r[l].concat(o)),r[l]&&r[l].length===1&&(r[l]=r[l][0])}return h.empty(r)&&this.parent?!1:this.extractJSONLD(r)},t.prototype.extractJSONLD=function(r){return r["@type"]=this.cls,this.subject()!=="_:"&&(r["@id"]=this.subject()),this.jsonld_context&&(r["@context"]=this.jsonld_context),r},t.prototype.subject=function(){return this.subjid||""},t.prototype.get=t.prototype.subject,t.prototype.set=function(r){this.subjid=r},t.prototype.isObject=function(){return!0},t.prototype.isProperty=function(){return!1},t.prototype.isData=function(){return!1},t.prototype.isClassChoice=function(){return this.frame&&this.frame.type==="class_choice"},t.prototype.subjectClass=function(){return this.cls},t.prototype.depth=function(){return this.parent?this.parent.depth()+1:0},t.prototype.getProperty=function(r){return this.properties[r]},t.prototype.first=function(r){if(this.properties&&this.properties[r])return this.properties[r].first()},t.prototype.property=function(r){return this.parent?this.parent.property():!1},t.prototype.parentObject=function(){return this.parent&&this.parent.parent?this.parent.parent:!1},t.prototype.root=function(){return!this.parent},t.prototype.renderProperties=function(){const r=this.sortProperties(),u=[];for(let l=0;l<r.length;l++)if(this.properties[r[l]].render){const o=this.properties[r[l]].render(this.properties[r[l]]);o&&u.push(o)}return u},t.prototype.sortProperties=function(){const r=Object.keys(this.properties);return this.compare?r.sort((u,l)=>this.compare(u,l,this)):r.sort((u,l)=>this.standardCompare(u,l,this))},t.prototype.standardCompare=function(r,u,l){return h.shorten(r)==="rdfs:label"?-1:h.shorten(u)==="rdfs:label"?1:h.shorten(r)==="rdfs:comment"?-1:h.shorten(u)==="rdfs:comment"?1:l.properties[r].isData()&&l.properties[u].isObject()?-1:l.properties[u].isData()&&l.properties[r].isObject()?1:0},t.prototype.cardControlAllows=function(r){if(!this.parent)return!0;if(this.parent.cframe.hasRestriction()){const u=this.parent.cframe.restriction,l=this.parent.values.length;if((r==="add"||r==="clone")&&u.max&&l>=u.max||r==="delete"&&u.min&&l<=u.min)return!1}return!0},t.prototype.isUpdated=function(){let r=0;for(const u in this.properties){if(this.originalFrames[r]!==u||this.properties[u].isUpdated())return!0;r++}return r!==this.originalFrames.length},t.prototype.isNew=function(){return this.subject().substring(0,2)==="_:"},t.prototype.getSummary=function(){const r={status:"ok"};this.isUpdated()&&(r.status="updated"),this.isNew()&&(r.status="new"),r.propcount=0;for(const u in this.properties)r.propcount++;return r.long=`${r.propcount} properties`,r},t.prototype.saveQuery=function(){const r=a.update_object(this.extract());return this.pathToDoc(r),r},t.prototype.pathToDoc=function(r){r.add_triple(this.subjid,"type",this.cls),this.parent&&(r.add_triple(this.parent.subject(),"type",this.parent.subjectClass()),r.add_triple(this.parent.subject(),this.parent.predicate,this.subjid),this.parent.parent&&this.parent.parent.pathToDoc(r))},t.prototype.deleteQuery=function(){const r=a.delete_object(this.subjid);return this.parent&&r.delete_triple(this.parent.subject(),this.parent.predicate,this.subjid),r};function i(r,u,l){this.predicate=r,this.cframe=u,this.parent=l,this.values=[]}i.prototype.addJSONLDDocument=function(r){if(this.cframe.isData())if(Array.isArray(r))for(var u=0;u<r.length;u++){var l=new e(r[u],this,this.values.length);this.values.push(l)}else{var l=new e(r,this,this.values.length);this.values.push(l)}else if(Array.isArray(r))for(var u=0;u<r.length;u++){const y=new t(h.unshorten(r[u]["@type"]),r[u],this.cframe.frame,this);this.values.push(y)}else{const o=new t(r["@type"],r,this.cframe.frame,this);this.values.push(o)}},i.prototype.addFrame=function(r){if(this.cframe.isData()){const u=new e(r,this,this.values.length);this.values.push(u)}else{const u=new t(this.range(),this.cframe.frame,r.frame,this);this.values.push(u)}},i.prototype.addValueFrame=function(r){r&&(r.parent=this,r.index=this.values.length,this.values.push(r))},i.prototype.addValue=function(r){const u=this.createEmpty();return r&&u.set(r),this.addValueFrame(u),u},i.prototype.fillFromSchema=function(r){if(this.isData()||this.isObject()&&!this.isClassChoice()){const l=[];if(this.cframe.hasRestriction()&&this.cframe.restriction.min)for(let o=0;o<this.cframe.restriction.min;o+=1){var u=this.createEmpty(r);u.parent=this,l.push(u)}else{var u=this.createEmpty(r);u.parent=this,l.push(u)}this.values=l}else if(this.isClassChoice()){const l=this.cframe.getClassChoices();if(l&&l.length){const o=this.cframe.createEmptyChoice(l[0],h.genBNID(`${h.urlFragment(l[0])}_`));o.parent=this,this.values=[o]}}},i.prototype.isData=function(){return this.cframe.isData()},i.prototype.isObject=function(){return this.cframe.isObject()},i.prototype.isProperty=function(){return!0},i.prototype.property=function(){return this.predicate},i.prototype.extract=function(){const r=[],u=l=>{if(l["@value"]){for(var o=0;o<r.length;o++)if(r[o]["@value"]&&r[o]["@value"]===l["@value"]&&r[o]["@type"]&&r[o]["@type"]===l["@type"])return!0;return!1}if(l["@id"]){for(var o=0;o<r.length;o++)if(r[o]["@id"]&&r[o]["@id"]===l["@id"])return!0;return!1}};for(let l=0;l<this.values.length;l++){const o=this.values[l].extract();o!==""&&o!==!1&&typeof o<"u"&&!u(o)&&r.push(o)}return r},i.prototype.subject=function(){return this.parent?this.parent.subject():!1},i.prototype.subjectClass=function(){return this.parent?this.parent.subjectClass():!1},i.prototype.depth=function(){return this.parent?this.parent.depth():!1},i.prototype.updated=function(){return this.parent?this.parent.childUpdated():!1},i.prototype.range=function(){return this.cframe?this.cframe.range:""},i.prototype.getLabel=function(){return this.cframe?this.cframe.getLabel():this.predicate.getLabel()},i.prototype.getComment=function(){return this.cframe?this.cframe.getComment():!1},i.prototype.hasCardinalityRestriction=function(){return this.cframe?this.cframe.hasRestriction():!1},i.prototype.getRestriction=function(){return this.cframe?this.cframe.restriction:!1},i.prototype.isClassChoice=function(){return this.cframe?this.cframe.isClassChoice():!1},i.prototype.deletePropertyValue=function(r,u){this.parent.removePropertyValue(this.property(),r,u)},i.prototype.removeValue=function(r,u){const l=[];for(let o=0;o<this.values.length;o++)this.values[o].index!==r.index&&l.push(this.values[o]);this.values=l},i.prototype.get=function(){const r=[];for(let u=0;u<this.values.length;u++)if(this.values[u]){const l=this.values[u].get();l&&r.push(l)}return r},i.prototype.set=function(r){for(let u=0;u<this.values.length;u++)this.values[u]&&this.values[u].set(r)},i.prototype.clear=function(){for(let r=0;r<this.values.length;r++)this.values[r].clear()},i.prototype.clone=function(){const r=[],u=new i(this.predicate,this.cframe,this.parent);for(let l=0;l<this.values.length;l++)r.push(this.values[l].clone());return u.values=r,u},i.prototype.getAsFrames=function(){let r=[];for(let u=0;u<this.values.length;u++)this.values[u]&&(this.isData()?r.push(this.values[u].getAsFrame()):r=r.concat(this.values[u].getAsFrames()));return r},i.prototype.createEmpty=function(){if(this.cframe.isData()){const r=this.cframe.copy(this.subject());return r.set(""),r.status="new",r}if(this.cframe.isObject()){if(!this.cframe.isClassChoice()){const u=this.cframe.createEmpty(h.genBNID(`${h.urlFragment(this.cframe.range)}_`));return u.status="new",u}const r=new n(this.cframe);return r.status="new",r}},i.prototype.mfilter=function(r,u){new s().testRules(r,this,u);for(let l=0;l<this.values.length;l++)this.values[l].mfilter(r,u);return this},i.prototype.first=function(){if(this.values&&this.values[0])return this.values[0].get()},i.prototype.renderValues=function(){const r=this.sortValues(),u=[];for(let l=0;l<r.length;l++)if(r[l]&&r[l].render){const o=r[l].render(r[l]);o&&u.push(o)}return u},i.prototype.sortValues=function(){return this.compare?this.values.sort((r,u)=>this.compare(r,u,this)):this.values},i.prototype.cardControlAllows=function(r){if(this.cframe.hasRestriction()){const u=this.cframe.restriction,l=this.values.length;if((r==="add"||r==="clone")&&u.max&&l>=u.max||r==="delete"&&u.min)return!1}return!0},i.prototype.isUpdated=function(){return!0},i.prototype.saveQuery=function(){const r=a.query();for(let u=0;u<this.values.length;u++)r.and(this.values[u].saveQuery());return this.parent.pathToDoc(r),r},i.prototype.deleteQuery=function(){const r=a.query();for(let u=0;u<this.values.length;u++)r.and(this.values[u].deleteQuery());return r};function e(r,u,l){return this.err=!1,this.index=l,u&&this.loadParent(u),r&&(this.rangeValue=r,r["@type"]&&(this.range=r["@type"]),r["@language"]&&(this.language=r["@language"]),this.type||(this.type=r["@value"]?"datatypeProperty":"objectProperty")),this}e.prototype.loadParent=function(r,u){this.parent=r,this.type=r.type,this.domainValue=r.subject(),this.subjid=r.subject()||!1,this.domain=r.cframe?r.cframe.domain:r.subjectClass(),this.predicate=r.cframe?r.cframe.predicate:r.property(),this.frame=r.cframe?r.cframe.frame:!1,this.label=r.getLabel(),this.comment=r.getComment(),this.range=r&&r.cframe?r.cframe.range:!1;const l=r.cframe?r.cframe.restriction:!1;this.restriction=!1,l&&typeof l=="object"&&(this.restriction=new c(l))},e.prototype.copy=function(r){const u=new e;return u.parent=this.parent,u.range=this.range,u.rangeValue=this.rangeValue,u.index=this.index,u.type=this.type,u.domain=this.domain,u.domainValue=r||this.domainValue,u.predicate=this.predicate,u.frame=this.frame,u.label=this.label,u.comment=this.comment,this.restriction&&(u.restriction=this.restriction),this.language&&(u.language=this.language),u},e.prototype.mfilter=function(r,u){return new s().testRules(r,this,u),this},e.prototype.reset=function(){this.set(this.originalValue)},e.prototype.clone=function(){this.parent.addPropertyValue(this.get())},e.prototype.depth=function(){return this.parent?this.parent.depth():!1},e.prototype.property=function(){return this.parent?this.parent.property():!1},e.prototype.subject=function(){return this.parent?this.parent.subject():!1},e.prototype.subjectClass=function(){return this.parent?this.parent.subjectClass():!1},e.prototype.type=function(){return this.range?this.range:!1},e.prototype.isValidType=function(r){return["datatypeProperty","objectProperty","restriction "].indexOf(r)!==-1},e.prototype.getAsFrame=function(){const r={type:this.type,property:this.property()};return this.range&&(r.range=this.range),this.rangeValue&&(r.rangeValue=this.rangeValue),this.domain&&(r.domain=this.domain),this.domainValue&&(r.domainValue=this.domainValue),this.frame&&(r.frame=this.frame),this.label&&(r.label=this.label),this.comment&&(r.comment=this.comment),r},e.prototype.hasRestriction=function(){return this.restriction?this.restriction.hasCardRestriction():!1},e.prototype.getLabel=function(){let r="";return h.shorten(this.predicate)==="rdfs:label"?"Name":h.shorten(this.predicate)==="rdfs:comment"?"Description":(this.label&&typeof this.label=="object"&&(r=this.label["@value"]),this.label&&typeof this.label=="string"&&(r=this.label),!r&&this.predicate&&(r=h.labelFromURL(this.predicate)),r||(r=h.labelFromURL(this.cls)),r)},e.prototype.getType=function(){return this.range?this.range:this.rangeValue&&this.rangeValue["@type"]?this.rangeValue["@type"]:!1},t.prototype.getLabel=e.prototype.getLabel,e.prototype.getComment=function(){let r="";return this.comment&&typeof this.comment=="object"&&(r=this.comment["@value"]),this.comment&&typeof this.comment=="string"&&(r=this.comment),r},t.prototype.getComment=e.prototype.getComment,e.prototype.error=function(r){return r&&(this.err=r),this.errors||(this.errors=[]),this.errors.push({type:"Internal Data Frame Error",msg:r}),this.err},e.prototype.isValid=function(){return this.type&&this.isValidType(this.type)?this.predicate?this.domain?this.range?this.isObjectProperty()&&!(this.frame&&typeof this.frame=="object")?(this.error("Missing Object Frame"),!1):!0:(this.error("Missing Frame Range"),!1):(this.error("Missing Frame Domain"),!1):(this.error("Missing Frame Property"),!1):(this.error(`Missing or Illegal Frame Type ${this.type}`),!1)},e.prototype.isObjectProperty=function(){return this.type==="objectProperty"},e.prototype.isData=function(){return!0},e.prototype.isDatatypeProperty=function(){return this.type==="datatypeProperty"},e.prototype.isLogic=function(){return this.type==="and"||this.type==="or"||this.type==="xor"},e.prototype.isRestriction=function(){return this.type==="restriction"},e.prototype.ftype=function(){if(this.isDocument())return"document";if(this.isDatatypeProperty())return"data";if(this.isChoice())return"oneOf";if(this.isObject())return"object";if(this.isLogic())return"logic";if(this.isClassChoice())return"class_choice"},e.prototype.isClassChoice=function(){return this.frame&&this.frame.type==="class_choice"},e.prototype.isString=function(){return this.range===h.getStdURL("xsd","string")},e.prototype.getChoiceOptions=function(){const r=[];for(let u=0;u<this.frame.elements.length;u+=1){const l={};this.frame.elements[u].label?l.label=this.frame.elements[u].label["@value"]:l.label=h.labelFromURL(this.frame.elements[u].class),l.value=this.frame.elements[u].class,r.push(l)}return r},e.prototype.lang=function(){return this.language||"en"},e.prototype.isChoice=function(){return this.frame&&this.frame.type==="oneOf"},e.prototype.isDocument=function(){return this.frame&&this.frame.type==="document"},e.prototype.isObject=function(){return this.isObjectProperty()&&this.frame&&!(this.isChoice()||this.isDocument())},e.prototype.isProperty=function(){return!1},e.prototype.getTypeShorthand=function(){return this.isDocument()?"document":this.isChoice()?"choice":h.getShorthand(this.getType())||this.getType()},e.prototype.get=function(){return this.contents?this.contents:this.isDatatypeProperty()&&this.rangeValue&&typeof this.rangeValue["@value"]<"u"?this.rangeValue["@value"]:(this.isChoice()||this.isDocument())&&this.rangeValue&&this.rangeValue["@id"]?this.rangeValue["@id"]:""},e.prototype.set=function(r,u){u&&(r=u(r,this)),this.contents=r,(this.isChoice()||this.isDocument())&&(this.frame.domainValue=r),this.isDatatypeProperty()&&(this.rangeValue||(this.rangeValue={"@type":this.range}),this.rangeValue["@value"]=r)},e.prototype.clear=function(){(this.isDocument()||this.isChoice()||this.isDatatypeProperty())&&this.set("")},e.prototype.cardControlAllows=function(r){if(this.parent.cframe.hasRestriction()){const u=this.parent.cframe.restriction,l=this.parent.values.length;if((r==="add"||r==="clone")&&u.max&&l>=u.max||r==="delete"&&u.min&&l<=u.min)return!1}return!0},e.prototype.extract=function(){const r=this.get();if(r!==""&&r!==!1){const u={};return this.isDocument()||(u["@type"]=this.getType()),this.isChoice()||this.isDocument()?u["@id"]=r:u["@value"]=r,this.language&&(u["@language"]=this.language),u}return r},e.prototype.saveQuery=function(r,u,l){let o;if(r==="")return!1;this.isDocument()||this.isChoice()?o=a.iri(r):(o={"@value":r},o["@type"]=u||this.range,(l||this.language)&&(o["@language"]=l||this.language));let y;return this.get()!==""?y=a.update_triple(this.parent.subject(),this.predicate,o,this.extract()):y=a.add_triple(this.parent.subject(),this.predicate,o),this.parent.parent&&this.parent.parent.pathToDoc(y),y},e.prototype.deleteQuery=function(){return a.delete_triple(this.subject(),this.predicate,this.extract())};function n(r,u,l){if(this.err=!1,this.parent=u,this.subjid=u?u.subjid:!1,r){if(r.label){const o=l||"";r.label["@value"]?this.label=r.label["@value"]:r.label?this.label=r.label:this.label=o}this.load(r)}}n.prototype=e.prototype,n.prototype.load=function(r){if(typeof r!="object"){this.error("No frame passed to load");return}this.domainValue=r.domainValue,this.subjid=r.domainValue?r.domainValue:!1,this.type=r.type,this.domain=r.domain,this.predicate=r.property,this.frame=r.frame,this.comment=r.comment?r.comment["@value"]:"",this.range=r.range,this.rangeValue=r.rangeValue},n.prototype.loadFromJSONLD=function(r,u){r[u]&&(this.predicate=h.unshorten(u),this.type=r[u]["@value"]?"datatypeProperty":"objectProperty",this.range=h.unshorten(r[u]["@type"]),this.rangeValue=r[u]["@id"]?r[u]["@id"]:r[u]),this.domain=h.unshorten(r["@type"]),this.domainValue=h.unshorten(r["@id"]),this.label=h.labelFromURL(this.predicate),this.comment=""},n.prototype.isClassChoice=function(){return this.frame&&this.frame.type==="class_choice"},n.prototype.loadFromObjectFrame=function(r,u){this.type="objectProperty",this.predicate=r.property,this.range=r.range,this.rangeValue=u.subjid,this.domain=r.cls,this.domainValue=r.subjid,this.label=r.getLabel(),this.comment=r.getComment(),this.restriction=r.restriction},n.prototype.createEmptyChoice=function(r,u){const l=this.getChosenClassFrames(r),o=new t(r);u&&(o.subjid=u),o.loadClassFrames(l);const y=o.fillFromSchema();return y.status="new",y},n.prototype.getChosenClassFrames=function(r){let u=[];for(let l=0;l<this.frame.operands.length;l+=1)for(let o=0;o<this.frame.operands[l].length;o+=1)r===this.frame.operands[l][o].domain&&(u=u.concat(this.frame.operands[l][o]));return u},n.prototype.createEmpty=function(r){let u;if(this.isObject()){this.isClassChoice()?u=new t(this.predicate):u=new t(this.range),r&&(u.subjid=r),u.loadClassFrames(this.frame);const l=u.fillFromSchema();return l.status="new",l}if(this.isData()){const l=this.copy(r);return l.set(""),l.status="new",l}},n.prototype.cloneDataFrame=function(r,u){return u},n.prototype.clone=function(r,u){if(this.isObject())console.log("cannot clone class frame");else if(this.isData())return this.cloneDataFrame(r,u)},n.prototype.getClassChoices=function(){return[]},n.prototype.getChosenClassFrame=function(r,u){for(let l=0;l<this.frame.operands.length;l+=1){const o=this.frame.operands[l];if(o.class&&r===o.class)return new n(o,u,this.label)}return!1},n.prototype.getChosenFrame=function(r){return r},n.prototype.isData=function(){return this.isDocument()||this.isChoice()||this.isDatatypeProperty()};function c(r){this.min=0,this.max=0,r&&this.loadRestriction(r)}return c.prototype.hasCardRestriction=function(){return!(this.min===0&&this.max===0)},c.prototype.loadRestriction=function(r){if(typeof r.cardinality<"u")this.max=r.cardinality,this.min=r.cardinality;else if(typeof r.maxCardinality<"u")this.max=r.maxCardinality;else if(typeof r.minCardinality<"u")this.min=r.minCardinality;else if(typeof r.type<"u"&&r.type==="and"&&typeof r.operands=="object")for(let u=0;u<r.operands.length;u+=1){const l=new c(r.operands[u]);this.max===0&&l.max>0?this.max=l.max:this.max>0&&l.max>0&&l.max<this.max&&(this.max=l.max),this.min===0&&l.min>0?this.min=l.min:this.min>0&&l.min>0&&l.min>this.min&&(this.min=l.min)}},objectFrame=t,objectFrame}var documentFrame,hasRequiredDocumentFrame;function requireDocumentFrame(){if(hasRequiredDocumentFrame)return documentFrame;hasRequiredDocumentFrame=1;const h=requireObjectFrame(),s=requireFrameConfig(),a=requireUtils();/**
 * @file Document Frame
 * @license Apache Version 2
 */function t(e,n){this.client=e,this.config=n||new s,this.load_schema=!1}t.prototype.options=function(e){return this.config=e,this},t.prototype.db=function(e){return this.client.db(e),this},t.prototype.loadDocument=function(e,n){return n=n||"system:frame",this.client.getDocument(e,{"system:encoding":n}).then(c=>{n==="system:frame"?this.loadDataFrames(c):this.loadJSON(c)})},t.prototype.loadSchema=function(e,n){const c=a.unshorten(e);return this.client.getClassFrame(n,c).then(r=>this.loadSchemaFrames(r,c))},t.prototype.loadComplete=function(e,n){return n?Promise.all([this.loadDocument(e),this.loadDocumentSchema(n)]):this.loadDocument(e).then(()=>{this.loadSchema(this.document.cls)})},t.prototype.loadJSON=function(e,n){if(this.docid)return this.loadDocument(this.docid);if(this.clsid)return this.loadDocumentSchema(this.clsid);console.error("Either docid or clid must be set before load is called")},t.prototype.loadData=function(e,n,c){n||(this.document?n=this.document.cls:e&&e["@type"]&&(n=e["@type"])),n?this.document?this.document.loadJSONLDDocument(e):this.document=new h(n,e,c):console.log("Missing Class Failed to add dataframes due to missing class")},t.prototype.load=function(e,n){this.document=new h(n["@type"],n,e)},t.prototype.loadSchemaFrames=function(e,n){n||e&&e.length&&e[0]&&e[0].domain&&(n=e[0].domain),n?(this.document||(this.document=new h(n)),e&&(this.document.loadClassFrames(e),this.document.subjid||(this.document.newDoc=!0,this.document.fillFromSchema(a.genBNID(`${a.urlFragment(n)}_`))))):console.log("Missing Class","Failed to add class frames due to missing both class and classframes")},t.prototype.filterFrame=function(e){const n=function(c,r){typeof r.render()<"u"&&(c.render=r.render()),r.compare()&&(c.compare=r.compare()),r.errors()?c.errors=c.errors?c.errors.concat(r.errors()):r.errors():r.errors()===!1&&delete c.errors};this.applyRules(!1,!1,n)},t.prototype.setErrors=function(e,n){this.clearErrors(n);for(let r=0;r<e.length;r++)i(n,e[r]);const c=function(r,u){u.errors()&&(r.errors=r.errors?r.errors.concat(u.errors()):u.errors())};this.applyRules(!1,n,c)},t.prototype.clearErrors=function(e){e.all();const n=function(c,r){c.errors&&delete c.errors};this.applyRules(!1,e,n),e.rules=[]};function i(e,n){const c=n["vio:property"]?n["vio:property"]["@value"]:!1,r=n["vio:subject"]?n["vio:subject"]["@value"]:!1;n["vio:message"]&&n["vio:message"]["@value"];let u=n["api:value"]?n["api:value"]:!1;u&&u[0]==='"'&&u[u.length-1]==='"'&&(u=u.substring(1,u.length-1));const l=n["api:type"]?n["api:type"]:!1;if(l&&u&&e.data().value(u).type(l).errors([n]),c&&r){const o=a.shorten(r);o.substring(0,5)==="woql:"&&o.substring(5),e.data().property(c).value(o,r).errors([n])}}return t.prototype.applyRules=function(e,n,c){if(e=e||this.document,!e)return;n=n||this.config;const r=function(u,l){n.setFrameDisplayOptions(u,l),c&&c(u,l)};e.mfilter(n.rules,r)},documentFrame=t,documentFrame}var frameConfig,hasRequiredFrameConfig;function requireFrameConfig(){if(hasRequiredFrameConfig)return frameConfig;hasRequiredFrameConfig=1;const h=requireViewConfig(),{FrameRule:s}=requireFrameRule(),a=requireDocumentFrame();/**
 * @file Frame Config
 * @license Apache Version 2
 */function t(){h.ViewConfig.call(this),this.type="document"}Object.setPrototypeOf(t.prototype,h.ViewConfig.prototype),t.prototype.create=function(e){return new a(e,this)},t.prototype.prettyPrint=function(){let e=`view = View.document();
`;e+=this.getBasicPrettyPrint(),typeof this.load_schema()<"u"&&(e+=`view.load_schema(${this.load_schema()})
`);for(let n=0;n<this.rules.length;n++)e+=`view.${this.rules[n].prettyPrint()}
`;return e},t.prototype.json=function(){const e=this.getBasicJSON();return typeof this.load_schema()<"u"&&(e.load_schema=this.load_schema()),{frame:e,rules:this.getRulesJSON()}},t.prototype.loadJSON=function(e,n){const c=[];for(let r=0;r<n.length;r++){const u=new i;u.json(n[r]),c.push(u)}return this.rules=c,this.loadBasicJSON(e),typeof e.load_schema<"u"&&this.load_schema(e.load_schema),this},t.prototype.json_rules=function(){const e=[];for(let n=0;n<this.rules.length;n++)e.push(this.rules[n].json());return e},t.prototype.load_schema=function(e){return typeof e>"u"?this.get_schema:(this.get_schema=e,this)},t.prototype.show_all=function(e){return this.all().renderer(e),this},t.prototype.show_parts=function(e,n,c){return this.object().renderer(e),this.property().renderer(n),this.data().renderer(c),this},t.prototype.object=function(){const e=new i().scope("object");return this.rules.push(e),e},t.prototype.property=function(){const e=new i().scope("property");return this.rules.push(e),e},t.prototype.scope=function(e){const n=new i().scope(e);return this.rules.push(n),n},t.prototype.data=function(){const e=new i().scope("data");return this.rules.push(e),e},t.prototype.all=function(){const e=new i().scope("*");return this.rules.push(e),e},t.prototype.setFrameDisplayOptions=function(e,n){typeof e.display_options>"u"&&(e.display_options={}),typeof n.mode()<"u"&&(e.display_options.mode=n.mode()),typeof n.view()<"u"&&(e.display_options.view=n.view()),typeof n.showDisabledButtons()<"u"&&(e.display_options.show_disabled_buttons=n.showDisabledButtons()),typeof n.hidden()<"u"&&(e.display_options.hidden=n.hidden()),typeof n.collapse()<"u"&&(e.display_options.collapse=n.collapse()),typeof n.style()<"u"&&(e.display_options.style=n.style()),typeof n.headerStyle()<"u"&&(e.display_options.header_style=n.headerStyle()),typeof n.features()<"u"&&(e.display_options.features=this.setFrameFeatures(e.display_options.features,n.features())),typeof n.headerFeatures()<"u"&&(e.display_options.header_features=this.setFrameFeatures(e.display_options.header_features,n.headerFeatures())),typeof n.header()<"u"&&(e.display_options.header=n.header()),typeof n.showEmpty()<"u"&&(e.display_options.show_empty=n.showEmpty()),typeof n.dataviewer()<"u"&&(e.display_options.dataviewer=n.dataviewer()),typeof n.args()<"u"&&(e.display_options.args=this.setFrameArgs(e.display_options.args,n.args()))},t.prototype.setFrameFeatures=function(e,n){if(!e||!e.length)return n;if(!n||!n.length)return e;const c=[];for(let r=0;r<e.length;r++){const u=typeof e[r]=="string"?e[r]:Object.keys(e[r])[0];c.push(u)}for(let r=0;r<n.length;r++){const u=typeof n[r]=="string"?n[r]:Object.keys(n[r])[0],l=c.indexOf(u);if(l===-1)e.push(n[r]);else if(typeof n[r]=="object"){const o=e[l];if(typeof o=="string")e[l]=n[r];else if(typeof o=="object"){const y=n[r][u];for(const b in y)e[l][u][b]=y[b]}}}return e},t.prototype.setFrameArgs=function(e,n){if(!e)return n;if(!n)return e;for(const c in n)e[c]=n[c];return e};/**
 * @file Document Rule
 * @license Apache Version 2
 */function i(){s.call(this),this.rule={}}return Object.setPrototypeOf(i.prototype,s.prototype),i.prototype.renderer=function(e){return typeof e>"u"?this.rule.renderer:(this.rule.renderer=e,this)},i.prototype.compare=function(e){return typeof e>"u"?this.rule.compare:(this.rule.compare=e,this)},i.prototype.mode=function(e){return typeof e>"u"?this.rule.mode:(this.rule.mode=e,this)},i.prototype.collapse=function(e){return typeof e>"u"?this.rule.collapse:(this.rule.collapse=e,this)},i.prototype.view=function(e){return e?(this.rule.view=e,this):this.rule.view},i.prototype.showDisabledButtons=function(e){return typeof e>"u"?this.rule.show_disabled_buttons:(this.rule.show_disabled_buttons=e,this)},i.prototype.header=function(e){return e?(this.rule.header=e,this):this.rule.header},i.prototype.errors=function(e){return e?(this.rule.errors=e,this):this.rule.errors},i.prototype.headerStyle=function(e){return e?(this.rule.headerStyle=e,this):this.rule.headerStyle},i.prototype.showEmpty=function(e){return e?(this.rule.show_empty=e,this):this.rule.show_empty},i.prototype.dataviewer=function(e){return e?(this.rule.dataviewer=e,this):this.rule.dataviewer},i.prototype.features=function(...e){return typeof e>"u"||e.length===0?this.rule.features:(this.rule.features=e,this)},i.prototype.headerFeatures=function(...e){return typeof e>"u"||e.length===0?this.rule.header_features:(this.rule.header_features=e,this)},i.prototype.render=function(e){if(!e)return this.rule.render;const n=this.headerFeatures(),c=this.features();if(n&&n.length){var r=this.applyFeatureProperty(n,"render",e);this.headerFeatures(...r)}else if(c&&c.length){var r=this.applyFeatureProperty(c,"render",e);this.features(...r)}else this.rule.render=e;return this},i.prototype.style=function(e){if(typeof e>"u")return this.rule.style;const n=this.headerFeatures(),c=this.features();if(n&&n.length){var r=this.applyFeatureProperty(n,"style",e);this.headerFeatures(...r)}else if(c&&c.length){var r=this.applyFeatureProperty(c,"style",e);this.features(...r)}else this.rule.style=e;return this},i.prototype.hidden=function(e){if(typeof e>"u")return this.rule.hidden;const n=this.headerFeatures(),c=this.features();if(n&&n.length){var r=this.applyFeatureProperty(n,"hidden",e);this.headerFeatures(...r)}else if(c&&c.length){var r=this.applyFeatureProperty(c,"hidden",e);this.features(...r)}else this.rule.hidden=e;return this},i.prototype.args=function(e){if(!e)return this.rule.args;const n=this.headerFeatures(),c=this.features();if(n&&n.length){var r=this.applyFeatureProperty(n,"args",e);this.headerFeatures(...r)}else if(c&&c.length){var r=this.applyFeatureProperty(c,"args",e);this.features(...r)}else this.rule.args=e;return this},i.prototype.applyFeatureProperty=function(e,n,c){const r=[];for(let l=0;l<e.length;l++)if(typeof e[l]=="string"){var u={};u[e[l]]={},u[e[l]][n]=c,r.push(u)}else if(typeof e[l]=="object"){const o=Object.keys(e[l])[0];if(o){var u=e[l];u[o][n]=c,r.push(u)}}return r},i.prototype.unpackFeatures=function(e){const n={};let c="";for(let r=0;r<e.length;r++){if(typeof e[r]=="string")c+=`"${e[r]}"`;else if(typeof e[r]=="object"){const u=Object.keys(e[r])[0];c+=`"${u}"`;for(const l in e[r][u])n[l]=e[r][u][l]}r<e.length-1&&(c+=", ")}for(let r=0;r<Object.keys(n).length;r++){const u=Object.keys(n)[r],l=n[u];c+=`).${u}(`,typeof l=="function"?c+=l:typeof l=="string"?c+=`"${l}"`:typeof l=="object"&&(c+=JSON.stringify(l))}return c},i.prototype.prettyPrint=function(){return this.pattern&&(str=this.pattern.prettyPrint()),typeof this.renderer()<"u"&&(str+=`.renderer('${this.renderer()}')`),typeof this.render()<"u"&&(str+=`.render(${this.render})`),typeof this.compare()<"u"&&(str+=`.compare(${this.compare()})`),typeof this.mode()<"u"&&(str+=`.mode('${this.mode()}')`),typeof this.collapse()<"u"&&(str+=`.collapse(${this.collapse()})`),typeof this.hidden()<"u"&&(str+=`.hidden(${this.hidden()})`),typeof this.view()<"u"&&(str+=`.view('${this.view()}')`),typeof this.showDisabledButtons()<"u"&&(str+=`.showDisabledButtons(${this.showDisabledButtons()})`),typeof this.header()<"u"&&(str+=`.header(${this.header()})`),typeof this.style()<"u"&&(str+=`.style("${this.style()}")`),typeof this.headerStyle()<"u"&&(str+=`.headerStyle("${this.headerStyle()}")`),typeof this.args()<"u"&&(str+=`.args(${JSON.stringify(this.args())})`),typeof this.errors()<"u"&&(str+=`.errors(${JSON.stringify(this.errors())})`),typeof this.showEmpty()<"u"&&(str+=`.showEmpty(${this.show_empty()})`),typeof this.dataviewer()<"u"&&(str+=`.dataviewer("${this.dataviewer()}")`),typeof this.features()<"u"&&(str+=`.features(${this.unpackFeatures(this.features())})`),typeof this.headerFeatures()<"u"&&(str+=`.headerFeatures(${this.unpackFeatures(this.headerFeatures())})`),str},frameConfig=t,frameConfig}var woqlView,hasRequiredWoqlView;function requireWoqlView(){if(hasRequiredWoqlView)return woqlView;hasRequiredWoqlView=1;const h=requireTableConfig(),s=requireChooserConfig(),a=requireGraphConfig(),t=requireChartConfig(),i=requireStreamConfig(),e=requireFrameConfig(),{WOQLRule:n}=requireWoqlRule(),{FrameRule:c}=requireFrameRule(),r={};return r.table=function(){return new h},r.chart=function(){return new t},r.graph=function(){return new a},r.chooser=function(){return new s},r.stream=function(){return new i},r.document=function(){return new e},r.loadConfig=function(u){let l;return u.table?(l=new h,l.loadJSON(u.table,u.rules)):u.chooser?(l=new s,l.loadJSON(u.chooser,u.rules)):u.graph?(l=new a,l.loadJSON(u.graph,u.rules)):u.chart?(l=new t,l.loadJSON(u.chart,u.rules)):u.stream?(l=new i,l.loadJSON(u.stream,u.rules)):u.frame&&(l=new e,l.loadJSON(u.frame,u.rules)),l},r.rule=function(u){return u&&u==="frame"?new c:new n},r.pattern=function(u){return u&&u==="woql"?new n().pattern:new c().pattern},r.matchRow=function(u,l,o,y){return new n().matchRow(u,l,o,y)},r.matchColumn=function(u,l,o){return new n().matchColumn(u,l,o)},r.matchCell=function(u,l,o,y,b){return new n().matchCell(u,l,o,y,b)},r.matchNode=function(u,l,o,y,b){return new n().matchNode(u,l,o,y,b)},r.matchEdge=function(u,l,o,y,b){return new n().matchPair(u,l,o,y,b)},r.matchFrame=function(u,l,o){return new c().testRules(u,l,o)},woqlView=r,woqlView}var accessControl,hasRequiredAccessControl;function requireAccessControl(){if(hasRequiredAccessControl)return accessControl;hasRequiredAccessControl=1;const h=requireDispatchRequest(),s=requireErrorMessage(),a=require_const(),t=requireUtils();requireTypedef();/**
 * @license Apache Version 2
 * @module AccessControl
 * @constructor AccessControl
 * @description The AccessControl is a driver to work with
 * TerminusDB and TerminusX access control api
 * for the credential you can use the JWT token, the API token or
 * the basic authentication with username and password
 * @example
 * //connect with the API token
 * //(to request a token create an account in  https://terminusdb.com/)
 * const accessContol = new AccessControl("https://servername.com",
 * {organization:"my_team_name",
 * token:"dGVybWludXNkYjovLy9kYXRhL2tleXNfYXB........"})
 * accessControl.getOrgUsers().then(result=>{
 *      console.log(result)
 * })
 *
 * //connect with the jwt token this type of connection is only for the dashboard
 * //or for application integrate with our login workflow
 * const accessContol = new AccessControl("https://servername.com",
 * {organization:"my_team_name",
 * jwt:"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IkpXUjBIOXYyeTFORUd........"})
 * accessControl.getOrgUsers().then(result=>{
 *      console.log(result)
 * })
 *
 * //if the jwt is expired you can change it with
 * accessControl.setJwtToken("eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IkpXUjBIOXYy
 * eTFORUd.......")
 *
 * //connect with the base authentication this type of connection is only for the local installation
 * const accessContol = new AccessControl("http://localhost:6363",
 * {organization:"my_team_name", user:"admin"
 * key:"mykey"})
 * accessControl.getOrgUsers().then(result=>{
 *     console.log(result)
 * })
 *
 */function i(e,n){this.baseURL=this.getAPIUrl(e),n&&(n.jwt?this.setJwtToken(n.jwt):n.token?this.setApiToken(n.token):n.key&&(this.setApiKey(n.key),this.user=n.user),this.defaultOrganization=this.getDefaultOrganization(n))}return i.prototype.getDefaultOrganization=function(e){if(e&&e.organization&&typeof e.organization=="string")return e.organization},i.prototype.setJwtToken=function(e){if(!e)throw new Error("TerminusX Access token required");this.apiKey=e,this.apiType="jwt"},i.prototype.setApiToken=function(e){if(!e)throw new Error("TerminusX Access token required");this.apiKey=e,this.apiType="apikey"},i.prototype.setApiKey=function(e){if(!e)throw new Error("TerminusDB bacis authentication key required");this.apiKey=e,this.apiType="basic"},i.prototype.getAPIUrl=function(e){if(!e||typeof e!="string")throw new Error("TerminusX api url required!");return e.lastIndexOf("/")!==e.length-1&&(e+="/"),`${e}api`},i.prototype.dispatch=function(e,n,c){return e?h(e,n,c,{type:this.apiType,key:this.apiKey,user:this.user},null,this.customHeaders()):Promise.reject(new Error(s.getInvalidParameterMessage(n,"Invalid request URL")))},i.prototype.customHeaders=function(e){if(e)this._customHeaders=e;else return this._customHeaders},i.prototype.getOrganization=function(e){return this.dispatch(`${this.baseURL}/organizations/${e}`,a.GET)},i.prototype.getAllOrganizations=function(){return this.dispatch(`${this.baseURL}/organizations`,a.GET)},i.prototype.createOrganization=function(e){return this.dispatch(`${this.baseURL}/organizations/${t.encodeURISegment(e)}`,a.POST,{})},i.prototype.deleteOrganization=function(e){return this.dispatch(`${this.baseURL}/organizations/${t.encodeURISegment(e)}`,a.DELETE)},i.prototype.createRole=function(e,n){const c={name:e,action:n};return this.dispatch(`${this.baseURL}/roles`,a.POST,c)},i.prototype.deleteRole=function(e){return this.dispatch(`${this.baseURL}/roles/${t.encodeURISegment(e)}`,a.DELETE)},i.prototype.getAllUsers=function(){return this.dispatch(`${this.baseURL}/users`,a.GET)},i.prototype.createUser=function(e,n){const c={name:e,password:n};return this.dispatch(`${this.baseURL}/users`,a.POST,c)},i.prototype.deleteUser=function(e){return this.dispatch(`${this.baseURL}/users/${t.encodeURISegment(e)}`,a.DELETE)},i.prototype.manageCapability=function(e,n,c,r,u){const l={operation:r,user:e,roles:c,scope:n,scope_type:u};return this.dispatch(`${this.baseURL}/capabilities`,a.POST,l)},i.prototype.getAccessRoles=function(){return this.dispatch(`${this.baseURL}/roles`,a.GET)},i.prototype.getOrgUsers=function(e){if(!e&&!this.defaultOrganization)return Promise.reject(new Error(s.getInvalidParameterMessage("GET","Please provide a organization name")));const n=e||this.defaultOrganization;return this.dispatch(`${this.baseURL}/organizations/${t.encodeURISegment(n)}/users`,a.GET)},i.prototype.getTeamUserRoles=function(e,n){if(!n&&!this.defaultOrganization)return Promise.reject(new Error(s.getInvalidParameterMessage("GET","Please provide a organization name")));const c=n||this.defaultOrganization;return this.dispatch(`${this.baseURL}/organizations/${t.encodeURISegment(c)}/users/${t.encodeURISegment(e)}`,a.GET)},i.prototype.ifOrganizationExists=function(e){return e?this.dispatch(`${this.baseURL}/private/organizations/${t.encodeURISegment(e)}`,a.HEAD):Promise.reject(new Error(s.getInvalidParameterMessage("HEAD","Please provide a organization name")))},i.prototype.createOrganizationRemote=function(e){const n={organization:e};return this.dispatch(`${this.baseURL}/private/organizations`,a.POST,n)},i.prototype.getPendingOrgInvites=function(e){if(!e&&!this.defaultOrganization)return Promise.reject(new Error(s.getInvalidParameterMessage("GET","Please provide a organization name")));const n=e||this.defaultOrganization;return this.dispatch(`${this.baseURL}/organizations/${t.encodeURISegment(n)}/invites`,a.GET)},i.prototype.sendOrgInvite=function(e,n,c="",r){let u;if(!r&&!this.defaultOrganization?u="Please provide a organization name":e?n||(u="Please provide a role"):u="Please provide a user email",u)return Promise.reject(new Error(s.getInvalidParameterMessage("POST",u)));const l=r||this.defaultOrganization;return this.dispatch(`${this.baseURL}/organizations/${t.encodeURISegment(l)}/invites`,a.POST,{email_to:e,role:n,note:c})},i.prototype.getOrgInvite=function(e,n){let c;if(!n&&!this.defaultOrganization?c="Please provide a organization name":e||(c="Please provide a invite id"),c)return Promise.reject(new Error(s.getInvalidParameterMessage("POST",c)));const r=n||this.defaultOrganization,u=t.removeDocType(e);return this.dispatch(`${this.baseURL}/organizations/${t.encodeURISegment(r)}/invites/${u}`,a.GET)},i.prototype.deleteOrgInvite=function(e,n){let c;if(!n&&!this.defaultOrganization?c="Please provide a organization name":e||(c="Please provide a invite id"),c)return Promise.reject(new Error(s.getInvalidParameterMessage("POST",c)));const r=n||this.defaultOrganization,u=t.removeDocType(e);return this.dispatch(`${this.baseURL}/organizations/${t.encodeURISegment(r)}/invites/${u}`,a.DELETE)},i.prototype.updateOrgInviteStatus=function(e,n,c){let r;if(!c&&!this.defaultOrganization?r="Please provide a organization name":e?typeof n>"u"&&(r="Please provide a accepted status"):r="Please provide a invite id",r)return Promise.reject(new Error(s.getInvalidParameterMessage("PUT",r)));const u=c||this.defaultOrganization,l=t.removeDocType(e);return this.dispatch(`${this.baseURL}/organizations/${t.encodeURISegment(u)}/invites/${l}`,a.PUT,{accepted:n})},i.prototype.getTeamUserRole=function(e){if(!e&&!this.defaultOrganization)return Promise.reject(new Error(s.getInvalidParameterMessage("GET","Please provide a organization name")));const n=e||this.defaultOrganization;return this.dispatch(`${this.baseURL}/organizations/${t.encodeURISegment(n)}/role`,a.GET)},i.prototype.removeUserFromOrg=function(e,n){let c;if(!n&&!this.defaultOrganization?c="Please provide a organization name":e||(c="Please provide a userId"),c)return Promise.reject(new Error(s.getInvalidParameterMessage("DELETE",c)));const r=n||this.defaultOrganization,u=t.removeDocType(e);return this.dispatch(`${this.baseURL}/organizations/${t.encodeURISegment(r)}/users/${u}`,a.DELETE)},i.prototype.getDatabaseRolesOfUser=function(e,n){let c;if(!n&&!this.defaultOrganization?c="Please provide a organization name":e||(c="Please provide a user id"),c)return Promise.reject(new Error(s.getInvalidParameterMessage("GET",c)));const r=n||this.defaultOrganization,u=t.removeDocType(e);return this.dispatch(`${this.baseURL}/organizations/${t.encodeURISegment(r)}/users/${u}/databases`,a.GET)},i.prototype.createUserRole=function(e,n,c,r){let u;if(!r&&!this.defaultOrganization?u="Please provide a organization name":e?n?c||(u="Please provide a role"):u="Please provide a scope":u="Please provide a user id",u)return Promise.reject(new Error(s.getInvalidParameterMessage("POST",u)));const l=r||this.defaultOrganization,o=t.removeDocType(e);return this.dispatch(`${this.baseURL}/organizations/${t.encodeURISegment(l)}/users/${o}/capabilities`,a.POST,{scope:n,role:c})},i.prototype.updateUserRole=function(e,n,c,r,u){let l;if(!u&&!this.defaultOrganization?l="Please provide a organization name":e?n?c?r||(l="Please provide a role"):l="Please provide a scope":l="Please provide a capabilityId":l="Please provide a user id",l)return Promise.reject(new Error(s.getInvalidParameterMessage("PUT",l)));const o=u||this.defaultOrganization,y=t.removeDocType(e),b=t.removeDocType(n);return this.dispatch(`${this.baseURL}/organizations/${t.encodeURISegment(o)}/users/${y}/capabilities/${b}`,a.PUT,{scope:c,role:r})},i.prototype.accessRequestsList=function(e){if(!e&&!this.defaultOrganization)return Promise.reject(new Error(s.getInvalidParameterMessage("GET","Please provide a organization name")));const n=e||this.defaultOrganization;return this.dispatch(`${this.baseURL}/organizations/${t.encodeURISegment(n)}/access_requests`,a.GET)},i.prototype.sendAccessRequest=function(e,n,c,r){if(!r&&!this.defaultOrganization)return Promise.reject(new Error(s.getInvalidParameterMessage("POST","Please provide a organization name")));const u={email:e,affiliation:n,note:c},l=r||this.defaultOrganization;return this.dispatch(`${this.baseURL}/organizations/${t.encodeURISegment(l)}/access_requests`,a.POST,u)},i.prototype.deleteAccessRequest=function(e,n){if(!n&&!this.defaultOrganization)return Promise.reject(new Error(s.getInvalidParameterMessage("POST","Please provide a organization name")));const c=n||this.defaultOrganization;return this.dispatch(`${this.baseURL}/organizations/${t.encodeURISegment(c)}/access_requests/${e}`,a.DELETE)},i.prototype.getUserInfo=function(e){const n=e||"info";return this.dispatch(`${this.baseURL}/users/${t.encodeURISegment(n)}`,a.GET)},accessControl=i,accessControl}var terminusdbClient,hasRequiredTerminusdbClient;function requireTerminusdbClient(){if(hasRequiredTerminusdbClient)return terminusdbClient;hasRequiredTerminusdbClient=1;const{Var:h,Vars:s,Doc:a}=requireWoqlDoc(),t=requireWoqlClient(),i=requireUtils(),e=requireWoqlView(),n=requireWoql(),c=requireWoqlResult(),r=requireWoqlTable(),u=requireWoqlGraph(),l=requireAxiosInstance(),o=requireAccessControl(),y=requireWoqlBuilder();return terminusdbClient={Var:h,Doc:a,Vars:s,WOQLClient:t,UTILS:i,View:e,WOQL:n,WOQLResult:c,WOQLTable:r,WOQLGraph:u,axiosInstance:l,AccessControl:o,WOQLQuery:y},terminusdbClient}var terminusdbClientExports=requireTerminusdbClient();const TerminusClient=getDefaultExportFromCjs(terminusdbClientExports);var root_1=template('<tr class="svelte-s0mhjv"><td class="svelte-s0mhjv"> </td><td class="svelte-s0mhjv"> </td><td class="svelte-s0mhjv"><button class="svelte-s0mhjv">Delete</button></td></tr>'),root=template('<h1 class="svelte-s0mhjv">Add a schema</h1> <form class="svelte-s0mhjv"><label for="name" class="svelte-s0mhjv">Field Name:</label> <input type="text" name="name" required class="svelte-s0mhjv"> <br> <label for="type" class="svelte-s0mhjv">Field Type:</label> <select name="type" class="svelte-s0mhjv"><option>Text</option><option>Number</option><option>Date</option></select> <br> <button type="submit" class="svelte-s0mhjv">Add Field</button></form> <table class="svelte-s0mhjv"><thead><tr class="svelte-s0mhjv"><th class="svelte-s0mhjv">Field Name</th><th class="svelte-s0mhjv">Field Type</th><th class="svelte-s0mhjv">Action</th></tr></thead><tbody></tbody></table> <button class="svelte-s0mhjv">Submit Schema</button>',1);function _page(h,s){push(s,!1);const[a,t]=setup_stores(),i=()=>store_get(u,"$fields",a),e=new TerminusClient.WOQLClient("https://cloud.terminusdb.com/Myseelia",{user:"zaldarren@gmail.com",organization:"Myseelia",token:"dGVybWludXNkYjovLy9kYXRhL2tleXNfYXBpLzg5OTY0ZGI5OWFlYjQ1Zjc5OGM5ZTRiZWI2MzExOGJhZjhiOWRiOWNlOTJiNmU2NGI0NDEzZjIzNDFmOGVkMjc=_869e9bd2465ad84126151962994fcfa22d4b7ec9375edf16b4182e7f36e4b2b820075ba22e78f629e0691eddbeae6998a6504d5ce287aa1df2602cb556b58e1730b0b93feb0e9304"}),n=[{"@type":"Class","@id":"BankAccount","@key":{"@type":"Hash","@fields":["account_id"]},account_id:"xsd:string",owner:"Person",balance:"xsd:decimal"},{"@type":"Class","@id":"Person","@key":{"@type":"Lexical","@fields":["name"]},name:"xsd:string"}];function c(){alert("submitted"),r()}async function r(){try{await e.addDocument(n,{graph_type:"schema"},"myseelia","add new schema");const $={"@type":"BankAccount",account_id:"DBZDFGET23456",owner:{"@type":"Person",name:"Tom"},balance:1e3};await e.addDocument($),e.getDocument({as_list:!0,id:"Person/Tom"})}catch($){console.error($.message)}}const u=writable([]);function l($){$.preventDefault();const H=$.target.name.value,ae=$.target.type.value;u.update(K=>[...K,{name:H,type:ae}]),$.target.reset()}function o($){u.update(H=>(H.splice($,1),H))}init();var y=root(),b=sibling(first_child(y),2),A=sibling(child(b),8),j=child(A);j.value=j.__value="text";var F=sibling(j);F.value=F.__value="number";var oe=sibling(F);oe.value=oe.__value="date",reset(A),next(4),reset(b);var re=sibling(b,2),k=sibling(child(re));each(k,5,i,index,($,H,ae)=>{var K=root_1(),pe=child(K),_e=child(pe,!0);reset(pe);var Y=sibling(pe),ie=child(Y,!0);reset(Y);var Ae=sibling(Y),qe=child(Ae);reset(Ae),reset(K),template_effect(()=>{set_text(_e,get(H).name),set_text(ie,get(H).type)}),event("click",qe,()=>o(ae)),append($,K)}),reset(k),reset(re);var x=sibling(re,2);event("submit",b,preventDefault(l)),event("click",x,c),append(h,y),bind_prop(s,"createDataProduct",r);var U=pop({createDataProduct:r});return t(),U}export{_page as component};
