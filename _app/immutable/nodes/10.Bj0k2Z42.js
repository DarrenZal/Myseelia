import{d as Z,a as b,t as F,n as J}from"../chunks/BPyiyC_m.js";import"../chunks/B2YF9tyq.js";import{aq as I,m as $,q as R,C as U,ar as M,s as a,e,r as t,t as z,Z as y,n as K}from"../chunks/CpwNkmoQ.js";import{i as W}from"../chunks/BmgNgRVt.js";import{i as j}from"../chunks/D3sFF71D.js";import{s as L,a as N}from"../chunks/VC3jnv3y.js";import{s as P}from"../chunks/1DkUAA9P.js";import{e as Y}from"../chunks/DpYJPrsp.js";import{r as V}from"../chunks/jM2rXxed.js";import{a as B}from"../chunks/CVqB8m0L.js";import{j as O}from"../chunks/CWPP9cGa.js";import{F as Q}from"../chunks/BwE9HQGT.js";import{s as X}from"../chunks/BAHnar9m.js";var ee=F('<label for="registration" class="label mt-1"><span class="label-text-alt text-error text-left">There was an issue registering your account. Please try again.</span></label>'),te=F('<input type="checkbox" id="register-modal" checked class="modal-toggle"> <div class="modal"><div class="modal-box w-narrowModal relative text-center"><a href="/" class="btn btn-xs btn-circle absolute right-2 top-2">âœ•</a> <div><h3 class="mb-7 text-base">Choose a username</h3> <div class="relative"><input id="registration" type="text" placeholder="Enter a username (optional label)" class="input input-bordered focus:outline-none w-full px-3 block"></div> <!> <div class="text-left mt-3"><input type="checkbox" id="shared-computer" class="peer checkbox checkbox-primary border-2 border-base-content hover:border-orange-300 transition-colors duration-250 ease-in-out inline-grid align-bottom"> <label for="shared-computer" class="cursor-pointer ml-1 text-sm grid-inline">This is a shared computer</label> <label for="registration" class="label mt-1 hidden peer-checked:block"><span class="label-text-alt text-error text-left"></span></label></div> <div class="mt-5"><button id="register-button" type="button" class="ml-2 btn btn-primary">Register</button></div></div></div></div>',1);function ae(n,c){I(c,!1);let p="",o=U(!0),i=U(!1);const d=s=>{const{value:l}=s.target;p=l},m=async()=>{console.log("[Register.svelte] registerUser called"),y(i,!0),y(o,!0);try{y(o,await O(p))}catch(s){console.error("Error calling register function:",s),y(o,!1)}finally{y(i,!1)}};j();var v=Z(),u=$(v);{var r=s=>{Q(s,{activity:"Initializing"})},f=s=>{var l=te(),k=$(l);V(k);var h=a(k,2),g=e(h),x=a(e(g),2),_=a(e(x),2),w=e(_);t(_);var q=a(_,2);{var D=S=>{var H=ee();b(S,H)};W(q,S=>{R(o)||S(D)})}var C=a(q,2),A=a(e(C),4),G=e(A);G.textContent=`For security reasons, ${B} doesn't support shared computers at
              this time.`,t(A),t(C);var E=a(C,2),T=e(E);t(E),t(x),t(g),t(h),z(()=>T.disabled=R(i)),Y("input",w,d),Y("click",T,m),b(s,l)};W(u,s=>{R(i)?s(r):s(f,!1)})}b(n,v),M()}var se=J('<svg xmlns="http://www.w3.org/2000/svg" width="79" height="56" fill="none"><path fill="currentColor" fill-rule="evenodd" d="M77.06 1.64a5.6 5.6 0 0 1 0 7.92l-44.8 44.8a5.6 5.6 0 0 1-7.92 0l-22.4-22.4a5.6 5.6 0 0 1 7.92-7.92L28.3 42.48 69.14 1.64a5.6 5.6 0 0 1 7.92 0Z" clip-rule="evenodd"></path></svg>');function re(n){var c=se();b(n,c)}var oe=F(`<input type="checkbox" id="link-device-modal" checked class="modal-toggle"> <div class="modal"><div class="modal-box w-narrowModal relative text-center"><div><h3 class="mb-14 text-base"> </h3> <div class="flex justify-center mb-11 text-base-content"><!></div> <div><p class="mb-4 text-left">Your account has been created.</p> <div class="mb-8 text-left"><input type="checkbox" id="password-message" class="peer hidden"> <label class="text-primary underline mb-8 hover:cursor-pointer peer-checked:hidden" for="password-message">Wait&mdash;what's my password?</label> <p class="hidden peer-checked:block">You don't need a password! <br> </p></div> <a class="btn btn-primary" href="/backup">Continue</a></div></div></div></div>`,1);function ie(n,c){I(c,!1);const[p,o]=N(),i=()=>L(P,"$sessionStore",p);j();var d=oe(),m=$(d);V(m);var v=a(m,2),u=e(v),r=e(u),f=e(r),s=e(f);t(f);var l=a(f,2),k=e(l);re(k),t(l);var h=a(l,2),g=a(e(h),2),x=a(e(g),4),_=a(e(x),2);_.nodeValue=` ${B} uses public key cryptography to authenticate you with this
            device.`,t(x),t(g),K(2),t(h),t(r),t(u),t(v),z(()=>{var w;return X(s,`Welcome, ${((w=i())==null?void 0:w.username)??""}!`)}),b(n,d),M(),o()}function _e(n,c){I(c,!1);const[p,o]=N(),i=()=>L(P,"$sessionStore",p);j();var d=Z(),m=$(d);{var v=r=>{ie(r,{})},u=r=>{ae(r,{})};W(m,r=>{i().isAuthenticated?r(v):r(u,!1)})}b(n,d),M(),o()}export{_e as component};
